{"version":3,"sources":["system.src.js"],"names":["bootstrap","global","URLPolyfill","url","baseURL","TypeError","m","String","replace","match","RangeError","protocol","username","password","host","hostname","port","pathname","search","hash","undefined","base","flag","slice","lastIndexOf","output","p","pop","push","join","this","origin","href","self","__global","addToError","err","msg","originalErr","stack","message","toString","split","newStack","i","length","$__curScript","indexOf","src","newMsg","substr","isBrowser","isWindows","newErr","errArgs","Error","fileName","lineNumber","Module","Loader","options","_loader","loaderObj","loads","modules","importPromises","moduleRecords","defineProperty","get","SystemJSLoader","call","paths","systemJSConstructor","SystemProto","hook","name","prototype","hookConstructor","isAbsolute","absURLRegEx","isRel","isPlain","urlResolve","parent","baseURI","URL","baseURIObj","applyPaths","loader","wildcard","pathMatch","maxWildcardPrefixLen","pathsCache","hasOwnProperty","path","pathParts","wildcardPrefixLen","outPath","group","deps","names","indices","l","index","getESModule","exports","esModule","getOwnPropertyDescriptor","defineOrCopyProperty","extend","value","targetObj","sourceObj","propName","d","Object","ex","a","b","prepend","extendMeta","val","Array","concat","extendPkgConfig","pkgCfgA","pkgCfgB","pkgName","warnInvalidProperties","prop","map","meta","depCache","dNormalized","coreResolve","warn","setPkgConfig","cfg","prependConfig","pkg","packages","basePkg","main","warnings","console","readMemberExpression","pParts","shift","getMapMatch","bestMatch","bestMatchLength","curMatchLength","prepareBaseURL","setProduction","isProduction","isBuilder","set","envModule","newModule","browser","node","_nodeRequire","production","dev","build","default","getNodeModule","parentModuleContext","_nodeModulePaths","require","parentName","mapMatch","has","builder","envSet","envCallback","browserConfig","nodeConfig","devConfig","buildConfig","productionConfig","detectRegisterFormat","source","leadingCommentAndMeta","leadingCommentAndMetaRegEx","createEntry","originalIndices","declare","execute","executingRequire","declarative","normalizedDeps","groupIndex","evaluated","module","esmExports","getGlobalValue","globalValue","first","parseCondition","condition","conditionExport","conditionModule","negation","conditionExportIndex","sysConditions","negate","serializeCondition","conditionObj","resolveCondition","bool","normalize","then","normalizedCondition","load","q","interpolateConditional","conditionalMatch","interpolationRegEx","Promise","resolve","conditionValue","booleanConditional","booleanIndex","isWorker","window","importScripts","document","process","platform","assert","item","thisLen","e","obj","opt","getElementsByTagName","bases","location","cwd","nativeURL","createLoad","status","anonCnt","linkSets","dependencies","metadata","loadModule","asyncStartLoadPartwayThrough","step","address","moduleName","moduleMetadata","moduleSource","moduleAddress","requestLoad","request","refererName","refererAddress","reject","proceedToLocate","proceedToFetch","locate","proceedToTranslate","fetch","translate","instantiate","instantiateResult","depsList","loadPromises","depLoad","key","addLoadToLinkSet","all","updateLinkSetOnLoad","exc","exception","linkSetFailed","stepState","existingLoad","done","linkSet","createLinkSet","startingLoad","loadingCount","j","doLink","error","link","_newModule","finishLoad","abrupt","checkError","pLoad","dep","failed","linkIndex","splice","globalLoadsIndex","trace","depMap","forEach","loadIndex","doDynamicExecute","linkError","createImportPromise","promise","constructor","define","delete","import","parentAddress","sourcePromise","pNames","getOwnPropertyNames","configurable","enumerable","freeze","referrerName","referrerAddress","System","fetchTextFromURL","XMLHttpRequest","authorization","fulfill","xhr","responseText","statusText","sameDomain","doTimeout","domainCheck","exec","XDomainRequest","onload","onerror","ontimeout","onprogress","timeout","onreadystatechange","readyState","addEventListener","open","setRequestHeader","withCredentials","setTimeout","send","fs","readFile","data","dataString","opts","headers","Accept","credentials","r","ok","text","transpile","transpiler","pluginLoader","__useDefault","transpileFunction","Compiler","traceurTranspile","createLanguageService","typescriptTranspile","babelTranspile","traceur","traceurOptions","script","sourceMaps","filename","inputSourceMap","sourceMap","compiler","doTraceurCompile","compile","babel","babelOptions","code","ast","transform","ts","typescriptOptions","target","ScriptTarget","ES5","inlineSourceMap","ModuleKind","__exec","sourceMapString","hasBuffer","sourceMapPrefix","Buffer","btoa","unescape","encodeURIComponent","getSource","wrap","lastLineIndex","format","JSON","stringify","preExec","curLoad","callCounter","curSystem","SystemJS","postExec","scriptExec","head","body","documentElement","createElement","_e","apply","arguments","integrity","setAttribute","nonce","appendChild","removeChild","register","reduceRegister_","useVm","vm","supportsScriptExec","runInThisContext","eval","chrome","extension","navigator","userAgent","scriptSrc","defaultJSExtensions","pluginFirst","loaderErrorStack","skipExt","resolved","httpRequest","systemImport","systemTranslate","entry","parse","getConfig","curCurScript","config","isEnvConfig","checkHasConfig","transpilerRuntime","loadedTranspilerRuntime","bundles","packageConfigPaths","v","defaultJSExtension","decanonicalize","pkgMatch","packageLength","Math","max","normalized","bundle","normalizedBundleDep","c","getPackage","curPkg","pkgLen","curPkgLen","addDefaultExtension","subPath","skipExtensions","defaultExtension","metaMatch","getMetaMatches","metaPattern","matchMeta","matchDepth","applyPackageConfigSync","mapPath","mapped","doMapSync","validMapping","normalizeSync","applyPackageConfig","doMap","doStringMap","conditionPromises","conditions","conditionValues","createPkgConfigPathObj","lastWildcard","regEx","RegExp","getPackageConfigMatch","configPath","exactMatch","packageConfigPath","packageName","loadPackageConfigPath","pkgConfigPath","configLoader","systemjs","pkgMeta","matchFn","wildcardIndex","dotRel","exactMeta","decanonicalized","isPlugin","parentPackageName","parentPackage","parentMap","parentMapMatch","pkgConfigMatch","isConfigured","configured","bestDepth","getInteractiveScriptLoad","interactiveScript","interactiveLoadingScripts","webWorkerImport","workerLoad","curRequire","ieEvents","s","isOpera","opera","attachEvent","loadingCnt","registerQueue","pushRegister","scriptLoad","complete","evt","cleanup","detachEvent","removeEventListener","async","crossOrigin","buildGroups","groups","depName","depEntry","defined","depGroupIndex","startEntry","curGroupDeclarative","linkDeclarativeModule","linkDynamicModule","ModuleRecord","getOrCreateModuleRecord","importers","declaration","locked","importerModule","importerIndex","setter","setters","id","depExports","depModule","len","getModule","ensureEvaluated","nameNormalized","__esModule","seen","registerDynamic","pushRegister_","amd","curMeta","del","doLoad","grouped","normalizePromises","esmRegEx","traceurRuntimeRegEx","babelHelpersRegEx","args","depInject","loadedTranspiler","transpilerPromise","loaderModule","originalName","file","sources","originalSource","$traceurRuntime","babelHelpers","__globalName","g","globals","gl","exportName","retrieveGlobal","prepareGlobal","encapsulateGlobal","reduceRegister","forEachGlobal","callback","keys","forEachGlobalValue","globalName","ignoredGlobalProps","globalSnapshot","encapsulate","curDefine","oldGlobals","singleGlobal","multipleExports","getCJSDeps","inLocation","locations","cjsRequireRegEx","lastIndex","commentRegEx","stringRegEx","stringLocations","commentLocations","cjsExportsRegEx","hashBangRegEx","metaDeps","cjsRequireDetection","_require","requireResolve","cjsDeferDepsExecute","pathVars","getPathVars","__cjsWrapper","dirname","cjsWrapper","stripOrigin","windowOrigin","parentId","moduleId","pluginIndex","amdDefine","requireIndex","params","fnBracketRegEx","requireAlias","wsRegEx","requireRegEx","requireRegExs","cjsRequirePre","cjsRequirePost","errback","referer","dynamicRequires","factory","req","contextualRequire","depValues","uri","moduleIndex","exportsIndex","toUrl","amdRequire","amdRegEx","builderExecute","getParentName","parentPluginIndex","parsePlugin","argumentName","pluginName","argument","plugin","combinePluginParts","checkDefaultExtension","arg","createNormalizeSync","parsed","pluginSyntaxIndex","loaderNormalized","result","calledInstantiate","alias","aliasDeps","_export","setMetaProperty","curPart","depth","metaRegEx","metaPartRegEx","metaParts","firstChar","metaString","metaName","metaValue","loadedBundles","matched","curModule","parts","substring","version","doPolyfill","scripts","currentScript","defer","curPath","basePath","systemJSBootstrap","write","__filename"],"mappings":"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","file":"system.js","sourcesContent":["/*\n * SystemJS v0.19.41\n */\n(function() {\nfunction bootstrap() {// from https://gist.github.com/Yaffle/1088850\n(function(global) {\nfunction URLPolyfill(url, baseURL) {\n  if (typeof url != 'string')\n    throw new TypeError('URL must be a string');\n  var m = String(url).replace(/^\\s+|\\s+$/g, \"\").match(/^([^:\\/?#]+:)?(?:\\/\\/(?:([^:@\\/?#]*)(?::([^:@\\/?#]*))?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\n  if (!m)\n    throw new RangeError('Invalid URL format');\n  var protocol = m[1] || \"\";\n  var username = m[2] || \"\";\n  var password = m[3] || \"\";\n  var host = m[4] || \"\";\n  var hostname = m[5] || \"\";\n  var port = m[6] || \"\";\n  var pathname = m[7] || \"\";\n  var search = m[8] || \"\";\n  var hash = m[9] || \"\";\n  if (baseURL !== undefined) {\n    var base = baseURL instanceof URLPolyfill ? baseURL : new URLPolyfill(baseURL);\n    var flag = !protocol && !host && !username;\n    if (flag && !pathname && !search)\n      search = base.search;\n    if (flag && pathname[0] !== \"/\")\n      pathname = (pathname ? (((base.host || base.username) && !base.pathname ? \"/\" : \"\") + base.pathname.slice(0, base.pathname.lastIndexOf(\"/\") + 1) + pathname) : base.pathname);\n    // dot segments removal\n    var output = [];\n    pathname.replace(/^(\\.\\.?(\\/|$))+/, \"\")\n      .replace(/\\/(\\.(\\/|$))+/g, \"/\")\n      .replace(/\\/\\.\\.$/, \"/../\")\n      .replace(/\\/?[^\\/]*/g, function (p) {\n        if (p === \"/..\")\n          output.pop();\n        else\n          output.push(p);\n      });\n    pathname = output.join(\"\").replace(/^\\//, pathname[0] === \"/\" ? \"/\" : \"\");\n    if (flag) {\n      port = base.port;\n      hostname = base.hostname;\n      host = base.host;\n      password = base.password;\n      username = base.username;\n    }\n    if (!protocol)\n      protocol = base.protocol;\n  }\n\n  // convert URLs to use / always\n  pathname = pathname.replace(/\\\\/g, '/');\n\n  this.origin = host ? protocol + (protocol !== \"\" || host !== \"\" ? \"//\" : \"\") + host : \"\";\n  this.href = protocol + (protocol && host || protocol == \"file:\" ? \"//\" : \"\") + (username !== \"\" ? username + (password !== \"\" ? \":\" + password : \"\") + \"@\" : \"\") + host + pathname + search + hash;\n  this.protocol = protocol;\n  this.username = username;\n  this.password = password;\n  this.host = host;\n  this.hostname = hostname;\n  this.port = port;\n  this.pathname = pathname;\n  this.search = search;\n  this.hash = hash;\n}\nglobal.URLPolyfill = URLPolyfill;\n})(typeof self != 'undefined' ? self : global);(function(__global) {\n\n  var isWorker = typeof window == 'undefined' && typeof self != 'undefined' && typeof importScripts != 'undefined';\n  var isBrowser = typeof window != 'undefined' && typeof document != 'undefined';\n  var isWindows = typeof process != 'undefined' && typeof process.platform != 'undefined' && !!process.platform.match(/^win/);\n\n  if (!__global.console)\n    __global.console = { assert: function() {} };\n\n  // IE8 support\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, thisLen = this.length; i < thisLen; i++) {\n      if (this[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  \n  var defineProperty;\n  (function () {\n    try {\n      if (!!Object.defineProperty({}, 'a', {}))\n        defineProperty = Object.defineProperty;\n    }\n    catch (e) {\n      defineProperty = function(obj, prop, opt) {\n        try {\n          obj[prop] = opt.value || opt.get.call(obj);\n        }\n        catch(e) {}\n      }\n    }\n  })();\n\n  var errArgs = new Error(0, '_').fileName == '_';\n\n  function addToError(err, msg) {\n    // parse the stack removing loader code lines for simplification\n    if (!err.originalErr) {\n      var stack = ((err.message || err) + (err.stack ? '\\n' + err.stack : '')).toString().split('\\n');\n      var newStack = [];\n      for (var i = 0; i < stack.length; i++) {\n        if (typeof $__curScript == 'undefined' || stack[i].indexOf($__curScript.src) == -1)\n          newStack.push(stack[i]);\n      }\n    }\n\n    var newMsg = '(SystemJS) ' + (newStack ? newStack.join('\\n\\t') : err.message.substr(11)) + '\\n\\t' + msg;\n\n    // Convert file:/// URLs to paths in Node\n    if (!isBrowser)\n      newMsg = newMsg.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n    var newErr = errArgs ? new Error(newMsg, err.fileName, err.lineNumber) : new Error(newMsg);\n    \n    newErr.stack = newMsg;\n        \n    // track the original error\n    newErr.originalErr = err.originalErr || err;\n\n    return newErr;\n  }\n\n  function __eval(source, debugName, context) {\n    try {\n      new Function(source).call(context);\n    }\n    catch(e) {\n      throw addToError(e, 'Evaluating ' + debugName);\n    }\n  }\n\n  var baseURI;\n\n  // environent baseURI detection\n  if (typeof document != 'undefined' && document.getElementsByTagName) {\n    baseURI = document.baseURI;\n\n    if (!baseURI) {\n      var bases = document.getElementsByTagName('base');\n      baseURI = bases[0] && bases[0].href || window.location.href;\n    }\n  }\n  else if (typeof location != 'undefined') {\n    baseURI = __global.location.href;\n  }\n\n  // sanitize out the hash and querystring\n  if (baseURI) {\n    baseURI = baseURI.split('#')[0].split('?')[0];\n    baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n  }\n  else if (typeof process != 'undefined' && process.cwd) {\n    baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd() + '/';\n    if (isWindows)\n      baseURI = baseURI.replace(/\\\\/g, '/');\n  }\n  else {\n    throw new TypeError('No environment baseURI');\n  }\n\n  try {\n    var nativeURL = new __global.URL('test:///').protocol == 'test:';\n  }\n  catch(e) {}\n\n  var URL = nativeURL ? __global.URL : __global.URLPolyfill;\n\n/*\n*********************************************************************************************\n\n  Dynamic Module Loader Polyfill\n\n    - Implemented exactly to the former 2014-08-24 ES6 Specification Draft Rev 27, Section 15\n      http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts#august_24_2014_draft_rev_27\n\n    - Functions are commented with their spec numbers, with spec differences commented.\n\n    - Spec bugs are commented in this code with links.\n\n    - Abstract functions have been combined where possible, and their associated functions\n      commented.\n\n    - Realm implementation is entirely omitted.\n\n*********************************************************************************************\n*/\n\nfunction Module() {}\n// http://www.ecma-international.org/ecma-262/6.0/#sec-@@tostringtag\ndefineProperty(Module.prototype, 'toString', {\n  value: function() {\n    return 'Module';\n  }\n});\nfunction Loader(options) {\n  this._loader = {\n    loaderObj: this,\n    loads: [],\n    modules: {},\n    importPromises: {},\n    moduleRecords: {}\n  };\n\n  // 26.3.3.6\n  defineProperty(this, 'global', {\n    get: function() {\n      return __global;\n    }\n  });\n\n  // 26.3.3.13 realm not implemented\n}\n\n(function() {\n\n// Some Helpers\n\n// logs a linkset snapshot for debugging\n/* function snapshot(loader) {\n  console.log('---Snapshot---');\n  for (var i = 0; i < loader.loads.length; i++) {\n    var load = loader.loads[i];\n    var linkSetLog = '  ' + load.name + ' (' + load.status + '): ';\n\n    for (var j = 0; j < load.linkSets.length; j++) {\n      linkSetLog += '{' + logloads(load.linkSets[j].loads) + '} ';\n    }\n    console.log(linkSetLog);\n  }\n  console.log('');\n}\nfunction logloads(loads) {\n  var log = '';\n  for (var k = 0; k < loads.length; k++)\n    log += loads[k].name + (k != loads.length - 1 ? ' ' : '');\n  return log;\n} */\n\n\n/* function checkInvariants() {\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2603#c1\n\n  var loads = System._loader.loads;\n  var linkSets = [];\n\n  for (var i = 0; i < loads.length; i++) {\n    var load = loads[i];\n    console.assert(load.status == 'loading' || load.status == 'loaded', 'Each load is loading or loaded');\n\n    for (var j = 0; j < load.linkSets.length; j++) {\n      var linkSet = load.linkSets[j];\n\n      for (var k = 0; k < linkSet.loads.length; k++)\n        console.assert(loads.indexOf(linkSet.loads[k]) != -1, 'linkSet loads are a subset of loader loads');\n\n      if (linkSets.indexOf(linkSet) == -1)\n        linkSets.push(linkSet);\n    }\n  }\n\n  for (var i = 0; i < loads.length; i++) {\n    var load = loads[i];\n    for (var j = 0; j < linkSets.length; j++) {\n      var linkSet = linkSets[j];\n\n      if (linkSet.loads.indexOf(load) != -1)\n        console.assert(load.linkSets.indexOf(linkSet) != -1, 'linkSet contains load -> load contains linkSet');\n\n      if (load.linkSets.indexOf(linkSet) != -1)\n        console.assert(linkSet.loads.indexOf(load) != -1, 'load contains linkSet -> linkSet contains load');\n    }\n  }\n\n  for (var i = 0; i < linkSets.length; i++) {\n    var linkSet = linkSets[i];\n    for (var j = 0; j < linkSet.loads.length; j++) {\n      var load = linkSet.loads[j];\n\n      for (var k = 0; k < load.dependencies.length; k++) {\n        var depName = load.dependencies[k].value;\n        var depLoad;\n        for (var l = 0; l < loads.length; l++) {\n          if (loads[l].name != depName)\n            continue;\n          depLoad = loads[l];\n          break;\n        }\n\n        // loading records are allowed not to have their dependencies yet\n        // if (load.status != 'loading')\n        //  console.assert(depLoad, 'depLoad found');\n\n        // console.assert(linkSet.loads.indexOf(depLoad) != -1, 'linkset contains all dependencies');\n      }\n    }\n  }\n} */\n\n  // 15.2.3 - Runtime Semantics: Loader State\n\n  // 15.2.3.11\n  function createLoaderLoad(object) {\n    return {\n      // modules is an object for ES5 implementation\n      modules: {},\n      loads: [],\n      loaderObj: object\n    };\n  }\n\n  // 15.2.3.2 Load Records and LoadRequest Objects\n\n  var anonCnt = 0;\n\n  // 15.2.3.2.1\n  function createLoad(name) {\n    return {\n      status: 'loading',\n      name: name || '<Anonymous' + ++anonCnt + '>',\n      linkSets: [],\n      dependencies: [],\n      metadata: {}\n    };\n  }\n\n  // 15.2.3.2.2 createLoadRequestObject, absorbed into calling functions\n\n  // 15.2.4\n\n  // 15.2.4.1\n  function loadModule(loader, name, options) {\n    return new Promise(asyncStartLoadPartwayThrough({\n      step: options.address ? 'fetch' : 'locate',\n      loader: loader,\n      moduleName: name,\n      // allow metadata for import https://bugs.ecmascript.org/show_bug.cgi?id=3091\n      moduleMetadata: options && options.metadata || {},\n      moduleSource: options.source,\n      moduleAddress: options.address\n    }));\n  }\n\n  // 15.2.4.2\n  function requestLoad(loader, request, refererName, refererAddress) {\n    // 15.2.4.2.1 CallNormalize\n    return new Promise(function(resolve, reject) {\n      resolve(loader.loaderObj.normalize(request, refererName, refererAddress));\n    })\n    // 15.2.4.2.2 GetOrCreateLoad\n    .then(function(name) {\n      var load;\n      if (loader.modules[name]) {\n        load = createLoad(name);\n        load.status = 'linked';\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2795\n        load.module = loader.modules[name];\n        return load;\n      }\n\n      for (var i = 0, l = loader.loads.length; i < l; i++) {\n        load = loader.loads[i];\n        if (load.name != name)\n          continue;\n        return load;\n      }\n\n      load = createLoad(name);\n      loader.loads.push(load);\n\n      proceedToLocate(loader, load);\n\n      return load;\n    });\n  }\n\n  // 15.2.4.3\n  function proceedToLocate(loader, load) {\n    proceedToFetch(loader, load,\n      Promise.resolve()\n      // 15.2.4.3.1 CallLocate\n      .then(function() {\n        return loader.loaderObj.locate({ name: load.name, metadata: load.metadata });\n      })\n    );\n  }\n\n  // 15.2.4.4\n  function proceedToFetch(loader, load, p) {\n    proceedToTranslate(loader, load,\n      p\n      // 15.2.4.4.1 CallFetch\n      .then(function(address) {\n        // adjusted, see https://bugs.ecmascript.org/show_bug.cgi?id=2602\n        if (load.status != 'loading')\n          return;\n        load.address = address;\n\n        return loader.loaderObj.fetch({ name: load.name, metadata: load.metadata, address: address });\n      })\n    );\n  }\n\n  // 15.2.4.5\n  function proceedToTranslate(loader, load, p) {\n    p\n    // 15.2.4.5.1 CallTranslate\n    .then(function(source) {\n      if (load.status != 'loading')\n        return;\n\n      load.address = load.address || load.name;\n\n      return Promise.resolve(loader.loaderObj.translate({ name: load.name, metadata: load.metadata, address: load.address, source: source }))\n\n      // 15.2.4.5.2 CallInstantiate\n      .then(function(source) {\n        load.source = source;\n        return loader.loaderObj.instantiate({ name: load.name, metadata: load.metadata, address: load.address, source: source });\n      })\n\n      // 15.2.4.5.3 InstantiateSucceeded\n      .then(function(instantiateResult) {\n        if (instantiateResult === undefined)\n          throw new TypeError('Declarative modules unsupported in the polyfill.');\n        \n        if (typeof instantiateResult != 'object')\n          throw new TypeError('Invalid instantiate return value');\n\n        load.depsList = instantiateResult.deps || [];\n        load.execute = instantiateResult.execute;\n      })\n      // 15.2.4.6 ProcessLoadDependencies\n      .then(function() {\n        load.dependencies = [];\n        var depsList = load.depsList;\n\n        var loadPromises = [];\n        for (var i = 0, l = depsList.length; i < l; i++) (function(request, index) {\n          loadPromises.push(\n            requestLoad(loader, request, load.name, load.address)\n\n            // 15.2.4.6.1 AddDependencyLoad (load is parentLoad)\n            .then(function(depLoad) {\n\n              // adjusted from spec to maintain dependency order\n              // this is due to the System.register internal implementation needs\n              load.dependencies[index] = {\n                key: request,\n                value: depLoad.name\n              };\n\n              if (depLoad.status != 'linked') {\n                var linkSets = load.linkSets.concat([]);\n                for (var i = 0, l = linkSets.length; i < l; i++)\n                  addLoadToLinkSet(linkSets[i], depLoad);\n              }\n\n              // console.log('AddDependencyLoad ' + depLoad.name + ' for ' + load.name);\n              // snapshot(loader);\n            })\n          );\n        })(depsList[i], i);\n\n        return Promise.all(loadPromises);\n      })\n\n      // 15.2.4.6.2 LoadSucceeded\n      .then(function() {\n        // console.log('LoadSucceeded ' + load.name);\n        // snapshot(loader);\n\n        load.status = 'loaded';\n\n        var linkSets = load.linkSets.concat([]);\n        for (var i = 0, l = linkSets.length; i < l; i++)\n          updateLinkSetOnLoad(linkSets[i], load);\n      });\n    })\n    // 15.2.4.5.4 LoadFailed\n    ['catch'](function(exc) {\n      load.status = 'failed';\n      load.exception = exc;\n\n      var linkSets = load.linkSets.concat([]);\n      for (var i = 0, l = linkSets.length; i < l; i++) {\n        linkSetFailed(linkSets[i], load, exc);\n      }\n\n      console.assert(load.linkSets.length == 0, 'linkSets not removed');\n    });\n  }\n\n  // 15.2.4.7 PromiseOfStartLoadPartwayThrough absorbed into calling functions\n\n  // 15.2.4.7.1\n  function asyncStartLoadPartwayThrough(stepState) {\n    return function(resolve, reject) {\n      var loader = stepState.loader;\n      var name = stepState.moduleName;\n      var step = stepState.step;\n\n      if (loader.modules[name])\n        throw new TypeError('\"' + name + '\" already exists in the module table');\n\n      // adjusted to pick up existing loads\n      var existingLoad;\n      for (var i = 0, l = loader.loads.length; i < l; i++) {\n        if (loader.loads[i].name == name) {\n          existingLoad = loader.loads[i];\n\n          if (step == 'translate' && !existingLoad.source) {\n            existingLoad.address = stepState.moduleAddress;\n            proceedToTranslate(loader, existingLoad, Promise.resolve(stepState.moduleSource));\n          }\n\n          // a primary load -> use that existing linkset if it is for the direct load here\n          // otherwise create a new linkset unit\n          if (existingLoad.linkSets.length && existingLoad.linkSets[0].loads[0].name == existingLoad.name)\n            return existingLoad.linkSets[0].done.then(function() {\n              resolve(existingLoad);\n            });\n        }\n      }\n\n      var load = existingLoad || createLoad(name);\n\n      load.metadata = stepState.moduleMetadata;\n\n      var linkSet = createLinkSet(loader, load);\n\n      loader.loads.push(load);\n\n      resolve(linkSet.done);\n\n      if (step == 'locate')\n        proceedToLocate(loader, load);\n\n      else if (step == 'fetch')\n        proceedToFetch(loader, load, Promise.resolve(stepState.moduleAddress));\n\n      else {\n        console.assert(step == 'translate', 'translate step');\n        load.address = stepState.moduleAddress;\n        proceedToTranslate(loader, load, Promise.resolve(stepState.moduleSource));\n      }\n    }\n  }\n\n  // Declarative linking functions run through alternative implementation:\n  // 15.2.5.1.1 CreateModuleLinkageRecord not implemented\n  // 15.2.5.1.2 LookupExport not implemented\n  // 15.2.5.1.3 LookupModuleDependency not implemented\n\n  // 15.2.5.2.1\n  function createLinkSet(loader, startingLoad) {\n    var linkSet = {\n      loader: loader,\n      loads: [],\n      startingLoad: startingLoad, // added see spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995\n      loadingCount: 0\n    };\n    linkSet.done = new Promise(function(resolve, reject) {\n      linkSet.resolve = resolve;\n      linkSet.reject = reject;\n    });\n    addLoadToLinkSet(linkSet, startingLoad);\n    return linkSet;\n  }\n  // 15.2.5.2.2\n  function addLoadToLinkSet(linkSet, load) {\n    if (load.status == 'failed')\n      return;\n\n    for (var i = 0, l = linkSet.loads.length; i < l; i++)\n      if (linkSet.loads[i] == load)\n        return;\n\n    linkSet.loads.push(load);\n    load.linkSets.push(linkSet);\n\n    // adjustment, see https://bugs.ecmascript.org/show_bug.cgi?id=2603\n    if (load.status != 'loaded') {\n      linkSet.loadingCount++;\n    }\n\n    var loader = linkSet.loader;\n\n    for (var i = 0, l = load.dependencies.length; i < l; i++) {\n      if (!load.dependencies[i])\n        continue;\n\n      var name = load.dependencies[i].value;\n\n      if (loader.modules[name])\n        continue;\n\n      for (var j = 0, d = loader.loads.length; j < d; j++) {\n        if (loader.loads[j].name != name)\n          continue;\n\n        addLoadToLinkSet(linkSet, loader.loads[j]);\n        break;\n      }\n    }\n    // console.log('add to linkset ' + load.name);\n    // snapshot(linkSet.loader);\n  }\n\n  // linking errors can be generic or load-specific\n  // this is necessary for debugging info\n  function doLink(linkSet) {\n    var error = false;\n    try {\n      link(linkSet, function(load, exc) {\n        linkSetFailed(linkSet, load, exc);\n        error = true;\n      });\n    }\n    catch(e) {\n      linkSetFailed(linkSet, null, e);\n      error = true;\n    }\n    return error;\n  }\n\n  // 15.2.5.2.3\n  function updateLinkSetOnLoad(linkSet, load) {\n    // console.log('update linkset on load ' + load.name);\n    // snapshot(linkSet.loader);\n\n    console.assert(load.status == 'loaded' || load.status == 'linked', 'loaded or linked');\n\n    linkSet.loadingCount--;\n\n    if (linkSet.loadingCount > 0)\n      return;\n\n    // adjusted for spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995\n    var startingLoad = linkSet.startingLoad;\n\n    // non-executing link variation for loader tracing\n    // on the server. Not in spec.\n    /***/\n    if (linkSet.loader.loaderObj.execute === false) {\n      var loads = [].concat(linkSet.loads);\n      for (var i = 0, l = loads.length; i < l; i++) {\n        var load = loads[i];\n        load.module = {\n          name: load.name,\n          module: _newModule({}),\n          evaluated: true\n        };\n        load.status = 'linked';\n        finishLoad(linkSet.loader, load);\n      }\n      return linkSet.resolve(startingLoad);\n    }\n    /***/\n\n    var abrupt = doLink(linkSet);\n\n    if (abrupt)\n      return;\n\n    console.assert(linkSet.loads.length == 0, 'loads cleared');\n\n    linkSet.resolve(startingLoad);\n  }\n\n  // 15.2.5.2.4\n  function linkSetFailed(linkSet, load, exc) {\n    var loader = linkSet.loader;\n    var requests;\n\n    checkError: \n    if (load) {\n      if (linkSet.loads[0].name == load.name) {\n        exc = addToError(exc, 'Error loading ' + load.name);\n      }\n      else {\n        for (var i = 0; i < linkSet.loads.length; i++) {\n          var pLoad = linkSet.loads[i];\n          for (var j = 0; j < pLoad.dependencies.length; j++) {\n            var dep = pLoad.dependencies[j];\n            if (dep.value == load.name) {\n              exc = addToError(exc, 'Error loading ' + load.name + ' as \"' + dep.key + '\" from ' + pLoad.name);\n              break checkError;\n            }\n          }\n        }\n        exc = addToError(exc, 'Error loading ' + load.name + ' from ' + linkSet.loads[0].name);\n      }\n    }\n    else {\n      exc = addToError(exc, 'Error linking ' + linkSet.loads[0].name);\n    }\n\n\n    var loads = linkSet.loads.concat([]);\n    for (var i = 0, l = loads.length; i < l; i++) {\n      var load = loads[i];\n\n      // store all failed load records\n      loader.loaderObj.failed = loader.loaderObj.failed || [];\n      if (indexOf.call(loader.loaderObj.failed, load) == -1)\n        loader.loaderObj.failed.push(load);\n\n      var linkIndex = indexOf.call(load.linkSets, linkSet);\n      console.assert(linkIndex != -1, 'link not present');\n      load.linkSets.splice(linkIndex, 1);\n      if (load.linkSets.length == 0) {\n        var globalLoadsIndex = indexOf.call(linkSet.loader.loads, load);\n        if (globalLoadsIndex != -1)\n          linkSet.loader.loads.splice(globalLoadsIndex, 1);\n      }\n    }\n    linkSet.reject(exc);\n  }\n\n  // 15.2.5.2.5\n  function finishLoad(loader, load) {\n    // add to global trace if tracing\n    if (loader.loaderObj.trace) {\n      if (!loader.loaderObj.loads)\n        loader.loaderObj.loads = {};\n      var depMap = {};\n      load.dependencies.forEach(function(dep) {\n        depMap[dep.key] = dep.value;\n      });\n      loader.loaderObj.loads[load.name] = {\n        name: load.name,\n        deps: load.dependencies.map(function(dep){ return dep.key }),\n        depMap: depMap,\n        address: load.address,\n        metadata: load.metadata,\n        source: load.source\n      };\n    }\n    // if not anonymous, add to the module table\n    if (load.name) {\n      console.assert(!loader.modules[load.name] || loader.modules[load.name].module === load.module.module, 'load not in module table');\n      loader.modules[load.name] = load.module;\n    }\n    var loadIndex = indexOf.call(loader.loads, load);\n    if (loadIndex != -1)\n      loader.loads.splice(loadIndex, 1);\n    for (var i = 0, l = load.linkSets.length; i < l; i++) {\n      loadIndex = indexOf.call(load.linkSets[i].loads, load);\n      if (loadIndex != -1)\n        load.linkSets[i].loads.splice(loadIndex, 1);\n    }\n    load.linkSets.splice(0, load.linkSets.length);\n  }\n\n  function doDynamicExecute(linkSet, load, linkError) {\n    try {\n      var module = load.execute();\n    }\n    catch(e) {\n      linkError(load, e);\n      return;\n    }\n    if (!module || !(module instanceof Module))\n      linkError(load, new TypeError('Execution must define a Module instance'));\n    else\n      return module;\n  }\n\n  // 26.3 Loader\n\n  // 26.3.1.1\n  // defined at top\n\n  // importPromises adds ability to import a module twice without error - https://bugs.ecmascript.org/show_bug.cgi?id=2601\n  function createImportPromise(loader, name, promise) {\n    var importPromises = loader._loader.importPromises;\n    return importPromises[name] = promise.then(function(m) {\n      importPromises[name] = undefined;\n      return m;\n    }, function(e) {\n      importPromises[name] = undefined;\n      throw e;\n    });\n  }\n\n  Loader.prototype = {\n    // 26.3.3.1\n    constructor: Loader,\n    // 26.3.3.2\n    define: function(name, source, options) {\n      // check if already defined\n      if (this._loader.importPromises[name])\n        throw new TypeError('Module is already loading.');\n      return createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({\n        step: 'translate',\n        loader: this._loader,\n        moduleName: name,\n        moduleMetadata: options && options.metadata || {},\n        moduleSource: source,\n        moduleAddress: options && options.address\n      })));\n    },\n    // 26.3.3.3\n    'delete': function(name) {\n      var loader = this._loader;\n      delete loader.importPromises[name];\n      delete loader.moduleRecords[name];\n      return loader.modules[name] ? delete loader.modules[name] : false;\n    },\n    // 26.3.3.4 entries not implemented\n    // 26.3.3.5\n    get: function(key) {\n      if (!this._loader.modules[key])\n        return;\n      return this._loader.modules[key].module;\n    },\n    // 26.3.3.7\n    has: function(name) {\n      return !!this._loader.modules[name];\n    },\n    // 26.3.3.8\n    'import': function(name, parentName, parentAddress) {\n      if (typeof parentName == 'object')\n        parentName = parentName.name;\n\n      // run normalize first\n      var loaderObj = this;\n\n      // added, see https://bugs.ecmascript.org/show_bug.cgi?id=2659\n      return Promise.resolve(loaderObj.normalize(name, parentName))\n      .then(function(name) {\n        var loader = loaderObj._loader;\n\n        if (loader.modules[name])\n          return loader.modules[name].module;\n\n        return loader.importPromises[name] || createImportPromise(loaderObj, name,\n          loadModule(loader, name, {})\n          .then(function(load) {\n            delete loader.importPromises[name];\n            return load.module.module;\n          }));\n      });\n    },\n    // 26.3.3.9 keys not implemented\n    // 26.3.3.10\n    load: function(name) {\n      var loader = this._loader;\n      if (loader.modules[name])\n        return Promise.resolve();\n      return loader.importPromises[name] || createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({\n        step: 'locate',\n        loader: loader,\n        moduleName: name,\n        moduleMetadata: {},\n        moduleSource: undefined,\n        moduleAddress: undefined\n      }))\n      .then(function() {\n        delete loader.importPromises[name];\n      }));\n    },\n    // 26.3.3.11\n    module: function(source, options) {\n      var load = createLoad();\n      load.address = options && options.address;\n      var linkSet = createLinkSet(this._loader, load);\n      var sourcePromise = Promise.resolve(source);\n      var loader = this._loader;\n      var p = linkSet.done.then(function() {\n        return load.module.module;\n      });\n      proceedToTranslate(loader, load, sourcePromise);\n      return p;\n    },\n    // 26.3.3.12\n    newModule: function (obj) {\n      if (typeof obj != 'object')\n        throw new TypeError('Expected object');\n\n      var m = new Module();\n\n      var pNames = [];\n      if (Object.getOwnPropertyNames && obj != null)\n        pNames = Object.getOwnPropertyNames(obj);\n      else\n        for (var key in obj)\n          pNames.push(key);\n\n      for (var i = 0; i < pNames.length; i++) (function(key) {\n        defineProperty(m, key, {\n          configurable: false,\n          enumerable: true,\n          get: function () {\n            return obj[key];\n          },\n          set: function() {\n            throw new Error('Module exports cannot be changed externally.');\n          }\n        });\n      })(pNames[i]);\n\n      if (Object.freeze)\n        Object.freeze(m);\n\n      return m;\n    },\n    // 26.3.3.14\n    set: function(name, module) {\n      if (!(module instanceof Module))\n        throw new TypeError('Loader.set(' + name + ', module) must be a module');\n      this._loader.modules[name] = {\n        module: module\n      };\n    },\n    // 26.3.3.15 values not implemented\n    // 26.3.3.16 @@iterator not implemented\n    // 26.3.3.17 @@toStringTag not implemented\n\n    // 26.3.3.18.1\n    normalize: function(name, referrerName, referrerAddress) {},\n    // 26.3.3.18.2\n    locate: function(load) {\n      return load.name;\n    },\n    // 26.3.3.18.3\n    fetch: function(load) {\n    },\n    // 26.3.3.18.4\n    translate: function(load) {\n      return load.source;\n    },\n    // 26.3.3.18.5\n    instantiate: function(load) {\n    }\n  };\n\n  var _newModule = Loader.prototype.newModule;\n\n/*\n * ES6 Module Declarative Linking Code\n */\n  function link(linkSet, linkError) {\n\n    var loader = linkSet.loader;\n\n    if (!linkSet.loads.length)\n      return;\n\n    var loads = linkSet.loads.concat([]);\n\n    for (var i = 0; i < loads.length; i++) {\n      var load = loads[i];\n\n      var module = doDynamicExecute(linkSet, load, linkError);\n      if (!module)\n        return;\n      load.module = {\n        name: load.name,\n        module: module\n      };\n      load.status = 'linked';\n\n      finishLoad(loader, load);\n    }\n  }\n\n})();\n\nvar System;\n\n  var fetchTextFromURL;\n  if (typeof XMLHttpRequest != 'undefined') {\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      var xhr = new XMLHttpRequest();\n      var sameDomain = true;\n      var doTimeout = false;\n      if (!('withCredentials' in xhr)) {\n        // check if same domain\n        var domainCheck = /^(\\w+:)?\\/\\/([^\\/]+)/.exec(url);\n        if (domainCheck) {\n          sameDomain = domainCheck[2] === window.location.host;\n          if (domainCheck[1])\n            sameDomain &= domainCheck[1] === window.location.protocol;\n        }\n      }\n      if (!sameDomain && typeof XDomainRequest != 'undefined') {\n        xhr = new XDomainRequest();\n        xhr.onload = load;\n        xhr.onerror = error;\n        xhr.ontimeout = error;\n        xhr.onprogress = function() {};\n        xhr.timeout = 0;\n        doTimeout = true;\n      }\n      function load() {\n        fulfill(xhr.responseText);\n      }\n      function error() {\n        reject(new Error('XHR error' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));\n      }\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          // in Chrome on file:/// URLs, status is 0\n          if (xhr.status == 0) {\n            if (xhr.responseText) {\n              load();\n            }\n            else {\n              // when responseText is empty, wait for load or error event\n              // to inform if it is a 404 or empty file\n              xhr.addEventListener('error', error);\n              xhr.addEventListener('load', load);\n            }\n          }\n          else if (xhr.status === 200) {\n            load();\n          }\n          else {\n            error();\n          }\n        }\n      };\n      xhr.open(\"GET\", url, true);\n\n      if (xhr.setRequestHeader) {\n        xhr.setRequestHeader('Accept', 'application/x-es-module, */*');\n        // can set \"authorization: true\" to enable withCredentials only\n        if (authorization) {\n          if (typeof authorization == 'string')\n            xhr.setRequestHeader('Authorization', authorization);\n          xhr.withCredentials = true;\n        }\n      }\n\n      if (doTimeout) {\n        setTimeout(function() {\n          xhr.send();\n        }, 0);\n      } else {\n        xhr.send(null);\n      }\n    };\n  }\n  else if (typeof require != 'undefined' && typeof process != 'undefined') {\n    var fs;\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      if (url.substr(0, 8) != 'file:///')\n        throw new Error('Unable to fetch \"' + url + '\". Only file URLs of the form file:/// allowed running in Node.');\n      fs = fs || require('fs');\n      if (isWindows)\n        url = url.replace(/\\//g, '\\\\').substr(8);\n      else\n        url = url.substr(7);\n      return fs.readFile(url, function(err, data) {\n        if (err) {\n          return reject(err);\n        }\n        else {\n          // Strip Byte Order Mark out if it's the leading char\n          var dataString = data + '';\n          if (dataString[0] === '\\ufeff')\n            dataString = dataString.substr(1);\n\n          fulfill(dataString);\n        }\n      });\n    };\n  }\n  else if (typeof self != 'undefined' && typeof self.fetch != 'undefined') {\n    fetchTextFromURL = function(url, authorization, fulfill, reject) {\n      var opts = {\n        headers: {'Accept': 'application/x-es-module, */*'}\n      };\n\n      if (authorization) {\n        if (typeof authorization == 'string')\n          opts.headers['Authorization'] = authorization;\n        opts.credentials = 'include';\n      }\n\n      fetch(url, opts)\n        .then(function (r) {\n          if (r.ok) {\n            return r.text();\n          } else {\n            throw new Error('Fetch error: ' + r.status + ' ' + r.statusText);\n          }\n        })\n        .then(fulfill, reject);\n    }\n  }\n  else {\n    throw new TypeError('No environment fetch API available.');\n  }\n/*\n * Traceur, Babel and TypeScript transpile hook for Loader\n */\nvar transpile = (function() {\n\n  // use Traceur by default\n  Loader.prototype.transpiler = 'traceur';\n\n  function transpile(load) {\n    var self = this;\n\n    return Promise.resolve(__global[self.transpiler == 'typescript' ? 'ts' : self.transpiler]\n        || (self.pluginLoader || self)['import'](self.transpiler))\n    .then(function(transpiler) {\n      if (transpiler.__useDefault)\n        transpiler = transpiler['default'];\n\n      var transpileFunction;\n      if (transpiler.Compiler)\n        transpileFunction = traceurTranspile;\n      else if (transpiler.createLanguageService)\n        transpileFunction = typescriptTranspile;\n      else\n        transpileFunction = babelTranspile;\n\n      // note __moduleName will be part of the transformer meta in future when we have the spec for this\n      return '(function(__moduleName){' + transpileFunction.call(self, load, transpiler) + '\\n})(\"' + load.name + '\");\\n//# sourceURL=' + load.address + '!transpiled';\n    });\n  };\n\n  function traceurTranspile(load, traceur) {\n    var options = this.traceurOptions || {};\n    options.modules = 'instantiate';\n    options.script = false;\n    if (options.sourceMaps === undefined)\n      options.sourceMaps = 'inline';\n    options.filename = load.address;\n    options.inputSourceMap = load.metadata.sourceMap;\n    options.moduleName = false;\n\n    var compiler = new traceur.Compiler(options);\n\n    return doTraceurCompile(load.source, compiler, options.filename);\n  }\n  function doTraceurCompile(source, compiler, filename) {\n    try {\n      return compiler.compile(source, filename);\n    }\n    catch(e) {\n      // on older versions of traceur (<0.9.3), an array of errors is thrown\n      // rather than a single error.\n      if (e.length) {\n        throw e[0];\n      }\n      throw e;\n    }\n  }\n\n  function babelTranspile(load, babel) {\n    var options = this.babelOptions || {};\n    options.modules = 'system';\n    if (options.sourceMap === undefined)\n      options.sourceMap = 'inline';\n    options.inputSourceMap = load.metadata.sourceMap;\n    options.filename = load.address;\n    options.code = true;\n    options.ast = false;\n\n    return babel.transform(load.source, options).code;\n  }\n\n  function typescriptTranspile(load, ts) {\n    var options = this.typescriptOptions || {};\n    options.target = options.target || ts.ScriptTarget.ES5;\n    if (options.sourceMap === undefined)\n      options.sourceMap = true;\n    if (options.sourceMap && options.inlineSourceMap !== false)\n      options.inlineSourceMap = true;\n\n    options.module = ts.ModuleKind.System;\n\n    return ts.transpile(load.source, options, load.address);\n  }\n\n  return transpile;\n})();\n// SystemJS Loader Class and Extension helpers\nfunction SystemJSLoader() {\n  Loader.call(this);\n\n  this.paths = {};\n  this._loader.paths = {};\n\n  systemJSConstructor.call(this);\n}\n\n// inline Object.create-style class extension\nfunction SystemProto() {};\nSystemProto.prototype = Loader.prototype;\nSystemJSLoader.prototype = new SystemProto();\nSystemJSLoader.prototype.constructor = SystemJSLoader;\n\nvar systemJSConstructor;\n\nfunction hook(name, hook) {\n  SystemJSLoader.prototype[name] = hook(SystemJSLoader.prototype[name] || function() {});\n}\nfunction hookConstructor(hook) {\n  systemJSConstructor = hook(systemJSConstructor || function() {});\n}\n\n\nvar absURLRegEx = /^[^\\/]+:\\/\\//;\nfunction isAbsolute(name) {\n  return name.match(absURLRegEx);\n}\nfunction isRel(name) {\n  return (name[0] == '.' && (!name[1] || name[1] == '/' || name[1] == '.')) || name[0] == '/';\n}\nfunction isPlain(name) {\n  return !isRel(name) && !isAbsolute(name);\n}\n\nvar baseURIObj = new URL(baseURI);\n\nfunction urlResolve(name, parent) {\n  // url resolution shortpaths\n  if (name[0] == '.') {\n    // dot-relative url normalization\n    if (name[1] == '/' && name[2] != '.') {\n  \t// scoped module @mycompany/mymodule\n        if (parent && (parent.indexOf('@') > 0) && \n           (parent.indexOf('/', parent.indexOf('@') + 1) ===   parent.lastIndexOf('/')) \n        ){\n    \t  return parent + name.substr(1);\t\n        } else {\n          return (parent && parent.substr(0, parent.lastIndexOf('/') + 1) || baseURI) + name.substr(2);\n        }\n     }\n  }\n  else if (name[0] != '/' && name.indexOf(':') == -1) {\n    // plain parent normalization\n    return (parent && parent.substr(0, parent.lastIndexOf('/') + 1) || baseURI) + name;\n  }\n\n  return new URL(name, parent && parent.replace(/#/g, '%05') || baseURIObj).href.replace(/%05/g, '#');\n}\n\n// NB no specification provided for System.paths, used ideas discussed in https://github.com/jorendorff/js-loaders/issues/25\nfunction applyPaths(loader, name) {\n  // most specific (most number of slashes in path) match wins\n  var pathMatch = '', wildcard, maxWildcardPrefixLen = 0;\n\n  var paths = loader.paths;\n  var pathsCache = loader._loader.paths;\n\n  // check to see if we have a paths entry\n  for (var p in paths) {\n    if (paths.hasOwnProperty && !paths.hasOwnProperty(p))\n      continue;\n\n    // paths sanitization\n    var path = paths[p];\n    if (path !== pathsCache[p])\n      path = paths[p] = pathsCache[p] = urlResolve(paths[p], isRel(paths[p]) ? baseURI : loader.baseURL);\n\n    // exact path match\n    if (p.indexOf('*') === -1) {\n      if (name == p)\n        return paths[p];\n      \n      // support trailing / in paths rules\n      else if (name.substr(0, p.length - 1) == p.substr(0, p.length - 1) && (name.length < p.length || name[p.length - 1] == p[p.length - 1]) && (paths[p][paths[p].length - 1] == '/' || paths[p] == '')) {\n        return paths[p].substr(0, paths[p].length - 1) + (name.length > p.length ? (paths[p] && '/' || '') + name.substr(p.length) : '');\n      }\n    }\n    // wildcard path match\n    else {\n      var pathParts = p.split('*');\n      if (pathParts.length > 2)\n        throw new TypeError('Only one wildcard in a path is permitted');\n\n      var wildcardPrefixLen = pathParts[0].length;\n      if (wildcardPrefixLen >= maxWildcardPrefixLen &&\n          name.substr(0, pathParts[0].length) == pathParts[0] &&\n          name.substr(name.length - pathParts[1].length) == pathParts[1]) {\n            maxWildcardPrefixLen = wildcardPrefixLen;\n            pathMatch = p;\n            wildcard = name.substr(pathParts[0].length, name.length - pathParts[1].length - pathParts[0].length);\n          }\n    }\n  }\n\n  var outPath = paths[pathMatch];\n  if (typeof wildcard == 'string')\n    outPath = outPath.replace('*', wildcard);\n\n  return outPath;\n}\n\nfunction dedupe(deps) {\n  var newDeps = [];\n  for (var i = 0, l = deps.length; i < l; i++)\n    if (indexOf.call(newDeps, deps[i]) == -1)\n      newDeps.push(deps[i])\n  return newDeps;\n}\n\nfunction group(deps) {\n  var names = [];\n  var indices = [];\n  for (var i = 0, l = deps.length; i < l; i++) {\n    var index = indexOf.call(names, deps[i]);\n    if (index === -1) {\n      names.push(deps[i]);\n      indices.push([i]);\n    }\n    else {\n      indices[index].push(i);\n    }\n  }\n  return { names: names, indices: indices };\n}\n\nvar getOwnPropertyDescriptor = true;\ntry {\n  Object.getOwnPropertyDescriptor({ a: 0 }, 'a');\n}\ncatch(e) {\n  getOwnPropertyDescriptor = false;\n}\n\n// converts any module.exports object into an object ready for SystemJS.newModule\nfunction getESModule(exports) {\n  var esModule = {};\n  // don't trigger getters/setters in environments that support them\n  if ((typeof exports == 'object' || typeof exports == 'function') && exports !== __global) {\n      if (getOwnPropertyDescriptor) {\n        for (var p in exports) {\n          // The default property is copied to esModule later on\n          if (p === 'default')\n            continue;\n          defineOrCopyProperty(esModule, exports, p);\n        }\n      }\n      else {\n        extend(esModule, exports);\n      }\n  }\n  esModule['default'] = exports;\n  defineProperty(esModule, '__useDefault', {\n    value: true\n  });\n  return esModule;\n}\n\nfunction defineOrCopyProperty(targetObj, sourceObj, propName) {\n  try {\n    var d;\n    if (d = Object.getOwnPropertyDescriptor(sourceObj, propName))\n      defineProperty(targetObj, propName, d);\n  }\n  catch (ex) {\n    // Object.getOwnPropertyDescriptor threw an exception, fall back to normal set property\n    // we dont need hasOwnProperty here because getOwnPropertyDescriptor would have returned undefined above\n    targetObj[propName] = sourceObj[propName];\n    return false;\n  }\n}\n\nfunction extend(a, b, prepend) {\n  var hasOwnProperty = b && b.hasOwnProperty;\n  for (var p in b) {\n    if (hasOwnProperty && !b.hasOwnProperty(p))\n      continue;\n    if (!prepend || !(p in a))\n      a[p] = b[p];\n  }\n  return a;\n}\n\n// meta first-level extends where:\n// array + array appends\n// object + object extends\n// other properties replace\nfunction extendMeta(a, b, prepend) {\n  var hasOwnProperty = b && b.hasOwnProperty;\n  for (var p in b) {\n    if (hasOwnProperty && !b.hasOwnProperty(p))\n      continue;\n    var val = b[p];\n    if (!(p in a))\n      a[p] = val;\n    else if (val instanceof Array && a[p] instanceof Array)\n      a[p] = [].concat(prepend ? val : a[p]).concat(prepend ? a[p] : val);\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\n      a[p] = extend(extend({}, a[p]), val, prepend);\n    else if (!prepend)\n      a[p] = val;\n  }\n}\n\nfunction extendPkgConfig(pkgCfgA, pkgCfgB, pkgName, loader, warnInvalidProperties) {\n  for (var prop in pkgCfgB) {\n    if (indexOf.call(['main', 'format', 'defaultExtension', 'basePath'], prop) != -1) {\n      pkgCfgA[prop] = pkgCfgB[prop];\n    }\n    else if (prop == 'map') {\n      extend(pkgCfgA.map = pkgCfgA.map || {}, pkgCfgB.map);\n    }\n    else if (prop == 'meta') {\n      extend(pkgCfgA.meta = pkgCfgA.meta || {}, pkgCfgB.meta);\n    }\n    else if (prop == 'depCache') {\n      for (var d in pkgCfgB.depCache) {\n        var dNormalized;\n\n        if (d.substr(0, 2) == './')\n          dNormalized = pkgName + '/' + d.substr(2);\n        else\n          dNormalized = coreResolve.call(loader, d);\n        loader.depCache[dNormalized] = (loader.depCache[dNormalized] || []).concat(pkgCfgB.depCache[d]);\n      }\n    }\n    else if (warnInvalidProperties && indexOf.call(['browserConfig', 'nodeConfig', 'devConfig', 'productionConfig'], prop) == -1 && \n        (!pkgCfgB.hasOwnProperty || pkgCfgB.hasOwnProperty(prop))) {\n      warn.call(loader, '\"' + prop + '\" is not a valid package configuration option in package ' + pkgName);\n    }\n  }\n}\n\n// deeply-merge (to first level) config with any existing package config\nfunction setPkgConfig(loader, pkgName, cfg, prependConfig) {\n  var pkg;\n\n  // first package is config by reference for fast path, cloned after that\n  if (!loader.packages[pkgName]) {\n    pkg = loader.packages[pkgName] = cfg;\n  }\n  else {\n    var basePkg = loader.packages[pkgName];\n    pkg = loader.packages[pkgName] = {};\n\n    extendPkgConfig(pkg, prependConfig ? cfg : basePkg, pkgName, loader, prependConfig);\n    extendPkgConfig(pkg, prependConfig ? basePkg : cfg, pkgName, loader, !prependConfig);\n  }\n  \n  // main object becomes main map\n  if (typeof pkg.main == 'object') {\n    pkg.map = pkg.map || {};\n    pkg.map['./@main'] = pkg.main;\n    pkg.main['default'] = pkg.main['default'] || './';\n    pkg.main = '@main';\n  }\n\n  return pkg;\n}\n\nfunction warn(msg) {\n  if (this.warnings && typeof console != 'undefined' && console.warn)\n    console.warn(msg);\n}\n// we define a __exec for globally-scoped execution\n// used by module format implementations\nvar __exec;\n\n(function() {\n\n  var hasBuffer = typeof Buffer != 'undefined';\n  try {\n    if (hasBuffer && new Buffer('a').toString('base64') != 'YQ==')\n      hasBuffer = false;\n  }\n  catch(e) {\n    hasBuffer = false;\n  }\n\n  var sourceMapPrefix = '\\n//# sourceMappingURL=data:application/json;base64,';\n  function inlineSourceMap(sourceMapString) {\n    if (hasBuffer)\n      return sourceMapPrefix + new Buffer(sourceMapString).toString('base64');\n    else if (typeof btoa != 'undefined')\n      return sourceMapPrefix + btoa(unescape(encodeURIComponent(sourceMapString)));\n    else\n      return '';\n  }\n\n  function getSource(load, wrap) {\n    var lastLineIndex = load.source.lastIndexOf('\\n');\n\n    // wrap ES formats with a System closure for System global encapsulation\n    if (load.metadata.format == 'global')\n      wrap = false;\n\n    var sourceMap = load.metadata.sourceMap;\n    if (sourceMap) {\n      if (typeof sourceMap != 'object')\n        throw new TypeError('load.metadata.sourceMap must be set to an object.');\n\n      sourceMap = JSON.stringify(sourceMap);\n    }\n\n    return (wrap ? '(function(System, SystemJS) {' : '') + load.source + (wrap ? '\\n})(System, System);' : '')\n        // adds the sourceURL comment if not already present\n        + (load.source.substr(lastLineIndex, 15) != '\\n//# sourceURL='\n          ? '\\n//# sourceURL=' + load.address + (sourceMap ? '!transpiled' : '') : '')\n        // add sourceMappingURL if load.metadata.sourceMap is set\n        + (sourceMap && inlineSourceMap(sourceMap) || '');\n  }\n\n  var curLoad;\n\n  // System.register, System.registerDynamic, AMD define pipeline\n  // if currently evalling code here, immediately reduce the registered entry against the load record\n  hook('pushRegister_', function() {\n    return function(register) {\n      if (!curLoad)\n        return false;\n\n      this.reduceRegister_(curLoad, register);\n      return true;\n    };\n  });\n\n  // System clobbering protection (mostly for Traceur)\n  var curSystem;\n  var callCounter = 0;\n  function preExec(loader, load) {\n    curLoad = load;\n    if (callCounter++ == 0)\n      curSystem = __global.System;\n    __global.System = __global.SystemJS = loader;\n  }\n  function postExec() {\n    if (--callCounter == 0)\n      __global.System = __global.SystemJS = curSystem;\n    curLoad = undefined;\n  }\n\n  var useVm;\n  var vm;\n  __exec = function(load) {\n    if (!load.source)\n      return;\n    if ((load.metadata.integrity || load.metadata.nonce) && supportsScriptExec)\n      return scriptExec.call(this, load);\n    try {\n      preExec(this, load);\n      curLoad = load;\n      // global scoped eval for node (avoids require scope leak)\n      if (!vm && this._nodeRequire) {\n        vm = this._nodeRequire('vm');\n        useVm = vm.runInThisContext(\"typeof System !== 'undefined' && System\") === this;\n      }\n      if (useVm)\n        vm.runInThisContext(getSource(load, true), { filename: load.address + (load.metadata.sourceMap ? '!transpiled' : '') });\n      else\n        (0, eval)(getSource(load, true));\n      postExec();\n    }\n    catch(e) {\n      postExec();\n      throw addToError(e, 'Evaluating ' + load.address);\n    }\n  };\n\n  var supportsScriptExec = false;\n  if (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {\n    if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\\.js/)))\n      supportsScriptExec = true;\n  }\n\n  // script execution via injecting a script tag into the page\n  // this allows CSP integrity and nonce to be set for CSP environments\n  var head;\n  function scriptExec(load) {\n    if (!head)\n      head = document.head || document.body || document.documentElement;\n\n    var script = document.createElement('script');\n    script.text = getSource(load, false);\n    var onerror = window.onerror;\n    var e;\n    window.onerror = function(_e) {\n      e = addToError(_e, 'Evaluating ' + load.address);\n      if (onerror)\n        onerror.apply(this, arguments);\n    }\n    preExec(this, load);\n\n    if (load.metadata.integrity)\n      script.setAttribute('integrity', load.metadata.integrity);\n    if (load.metadata.nonce)\n      script.setAttribute('nonce', load.metadata.nonce);\n\n    head.appendChild(script);\n    head.removeChild(script);\n    postExec();\n    window.onerror = onerror;\n    if (e)\n      throw e;\n  }\n\n})();\nfunction readMemberExpression(p, value) {\n  var pParts = p.split('.');\n  while (pParts.length)\n    value = value[pParts.shift()];\n  return value;\n}\n\nfunction getMapMatch(map, name) {\n  var bestMatch, bestMatchLength = 0;\n\n  for (var p in map) {\n    if (name.substr(0, p.length) == p && (name.length == p.length || name[p.length] == '/')) {\n      var curMatchLength = p.split('/').length;\n      if (curMatchLength <= bestMatchLength)\n        continue;\n      bestMatch = p;\n      bestMatchLength = curMatchLength;\n    }\n  }\n\n  return bestMatch;\n}\n\nfunction prepareBaseURL(loader) {\n  // ensure baseURl is fully normalized\n  if (this._loader.baseURL !== this.baseURL) {\n    if (this.baseURL[this.baseURL.length - 1] != '/')\n      this.baseURL += '/';\n\n    this._loader.baseURL = this.baseURL = new URL(this.baseURL, baseURIObj).href;\n  }\n}\n\nvar envModule;\nfunction setProduction(isProduction, isBuilder) {\n  this.set('@system-env', envModule = this.newModule({\n    browser: isBrowser,\n    node: !!this._nodeRequire,\n    production: !isBuilder && isProduction,\n    dev: isBuilder || !isProduction,\n    build: isBuilder,\n    'default': true\n  }));\n}\n\nhookConstructor(function(constructor) {\n  return function() {\n    constructor.call(this);\n\n    // support baseURL\n    this.baseURL = baseURI;\n\n    // support map and paths\n    this.map = {};\n\n    // make the location of the system.js script accessible\n    if (typeof $__curScript != 'undefined')\n      this.scriptSrc = $__curScript.src;\n\n    // global behaviour flags\n    this.warnings = false;\n    this.defaultJSExtensions = false;\n    this.pluginFirst = false;\n    this.loaderErrorStack = false;\n\n    // by default load \".json\" files as json\n    // leading * meta doesn't need normalization\n    // NB add this in next breaking release\n    // this.meta['*.json'] = { format: 'json' };\n\n    // support the empty module, as a concept\n    this.set('@empty', this.newModule({}));\n\n    setProduction.call(this, false, false);\n  };\n});\n\n// include the node require since we're overriding it\nif (typeof require != 'undefined' && typeof process != 'undefined' && !process.browser)\n  SystemJSLoader.prototype._nodeRequire = require;\n\n/*\n  Core SystemJS Normalization\n\n  If a name is relative, we apply URL normalization to the page\n  If a name is an absolute URL, we leave it as-is\n\n  Plain names (neither of the above) run through the map and paths\n  normalization phases.\n\n  The paths normalization phase applies last (paths extension), which\n  defines the `decanonicalize` function and normalizes everything into\n  a URL.\n */\n\nvar parentModuleContext;\nfunction getNodeModule(name, baseURL) {\n  if (!isPlain(name))\n    throw new Error('Node module ' + name + ' can\\'t be loaded as it is not a package require.');\n\n  if (!parentModuleContext) {\n    var Module = this._nodeRequire('module');\n    var base = baseURL.substr(isWindows ? 8 : 7);\n    parentModuleContext = new Module(base);\n    parentModuleContext.paths = Module._nodeModulePaths(base);\n  }\n  return parentModuleContext.require(name);\n}\n\nfunction coreResolve(name, parentName) {\n  // standard URL resolution\n  if (isRel(name))\n    return urlResolve(name, parentName);\n  else if (isAbsolute(name))\n    return name;\n\n  // plain names not starting with './', '://' and '/' go through custom resolution\n  var mapMatch = getMapMatch(this.map, name);\n\n  if (mapMatch) {\n    name = this.map[mapMatch] + name.substr(mapMatch.length);\n\n    if (isRel(name))\n      return urlResolve(name);\n    else if (isAbsolute(name))\n      return name;\n  }\n\n  if (this.has(name))\n    return name;\n\n  // dynamically load node-core modules when requiring `@node/fs` for example\n  if (name.substr(0, 6) == '@node/') {\n    if (!this._nodeRequire)\n      throw new TypeError('Error loading ' + name + '. Can only load node core modules in Node.');\n    if (this.builder)\n      this.set(name, this.newModule({}));\n    else\n      this.set(name, this.newModule(getESModule(getNodeModule.call(this, name.substr(6), this.baseURL))));\n    return name;\n  }\n\n  // prepare the baseURL to ensure it is normalized\n  prepareBaseURL.call(this);\n\n  return applyPaths(this, name) || this.baseURL + name;\n}\n\nhook('normalize', function(normalize) {\n  return function(name, parentName, skipExt) {\n    var resolved = coreResolve.call(this, name, parentName);\n    if (this.defaultJSExtensions && !skipExt && resolved.substr(resolved.length - 3, 3) != '.js' && !isPlain(resolved))\n      resolved += '.js';\n    return resolved;\n  };\n});\n\n// percent encode just '#' in urls if using HTTP requests\nvar httpRequest = typeof XMLHttpRequest != 'undefined';\nhook('locate', function(locate) {\n  return function(load) {\n    return Promise.resolve(locate.call(this, load))\n    .then(function(address) {\n      if (httpRequest)\n        return address.replace(/#/g, '%23');\n      return address;\n    });\n  };\n});\n\n/*\n * Fetch with authorization\n */\nhook('fetch', function() {\n  return function(load) {\n    return new Promise(function(resolve, reject) {\n      fetchTextFromURL(load.address, load.metadata.authorization, resolve, reject);\n    });\n  };\n});\n\n/*\n  __useDefault\n\n  When a module object looks like:\n  newModule(\n    __useDefault: true,\n    default: 'some-module'\n  })\n\n  Then importing that module provides the 'some-module'\n  result directly instead of the full module.\n\n  Useful for eg module.exports = function() {}\n*/\nhook('import', function(systemImport) {\n  return function(name, parentName, parentAddress) {\n    if (parentName && parentName.name)\n      warn.call(this, 'SystemJS.import(name, { name: parentName }) is deprecated for SystemJS.import(name, parentName), while importing ' + name + ' from ' + parentName.name);\n    return systemImport.call(this, name, parentName, parentAddress).then(function(module) {\n      return module.__useDefault ? module['default'] : module;\n    });\n  };\n});\n\n/*\n * Allow format: 'detect' meta to enable format detection\n */\nhook('translate', function(systemTranslate) {\n  return function(load) {\n    if (load.metadata.format == 'detect')\n      load.metadata.format = undefined;\n    return systemTranslate.apply(this, arguments);\n  };\n});\n\n\n/*\n * JSON format support\n *\n * Supports loading JSON files as a module format itself\n *\n * Usage:\n *\n * SystemJS.config({\n *   meta: {\n *     '*.json': { format: 'json' }\n *   }\n * });\n *\n * Module is returned as if written:\n *\n * export default {JSON}\n *\n * No named exports are provided\n *\n * Files ending in \".json\" are treated as json automatically by SystemJS\n */\nhook('instantiate', function(instantiate) {\n  return function(load) {\n    if (load.metadata.format == 'json' && !this.builder) {\n      var entry = load.metadata.entry = createEntry();\n      entry.deps = [];\n      entry.execute = function() {\n        try {\n          return JSON.parse(load.source);\n        }\n        catch(e) {\n          throw new Error(\"Invalid JSON file \" + load.name);\n        }\n      };\n    }\n  };\n})\n\n/*\n Extend config merging one deep only\n\n  loader.config({\n    some: 'random',\n    config: 'here',\n    deep: {\n      config: { too: 'too' }\n    }\n  });\n\n  <=>\n\n  loader.some = 'random';\n  loader.config = 'here'\n  loader.deep = loader.deep || {};\n  loader.deep.config = { too: 'too' };\n\n\n  Normalizes meta and package configs allowing for:\n\n  SystemJS.config({\n    meta: {\n      './index.js': {}\n    }\n  });\n\n  To become\n\n  SystemJS.meta['https://thissite.com/index.js'] = {};\n\n  For easy normalization canonicalization with latest URL support.\n\n*/\nfunction envSet(loader, cfg, envCallback) {\n  if (envModule.browser && cfg.browserConfig)\n    envCallback(cfg.browserConfig);\n  if (envModule.node && cfg.nodeConfig)\n    envCallback(cfg.nodeConfig);\n  if (envModule.dev && cfg.devConfig)\n    envCallback(cfg.devConfig);\n  if (envModule.build && cfg.buildConfig)\n    envCallback(cfg.buildConfig);\n  if (envModule.production && cfg.productionConfig)\n    envCallback(cfg.productionConfig);\n}\n\nSystemJSLoader.prototype.getConfig = function(name) {\n  var cfg = {};\n  var loader = this;\n  for (var p in loader) {\n    if (loader.hasOwnProperty && !loader.hasOwnProperty(p) || p in SystemJSLoader.prototype && p != 'transpiler')\n      continue;\n    if (indexOf.call(['_loader', 'amdDefine', 'amdRequire', 'defined', 'failed', 'version', 'loads'], p) == -1)\n      cfg[p] = loader[p];\n  }\n  cfg.production = envModule.production;\n  return cfg;\n};\n\nvar curCurScript;\nSystemJSLoader.prototype.config = function(cfg, isEnvConfig) {\n  var loader = this;\n\n  if ('loaderErrorStack' in cfg) {\n    curCurScript = $__curScript;\n    if (cfg.loaderErrorStack)\n      $__curScript = undefined;\n    else\n      $__curScript = curCurScript;\n  }\n\n  if ('warnings' in cfg)\n    loader.warnings = cfg.warnings;\n\n  // transpiler deprecation path\n  if (cfg.transpilerRuntime === false)\n    loader._loader.loadedTranspilerRuntime = true;\n\n  if ('production' in cfg || 'build' in cfg)\n    setProduction.call(loader, !!cfg.production, !!(cfg.build || envModule && envModule.build));\n\n  if (!isEnvConfig) {\n    // if using nodeConfig / browserConfig / productionConfig, take baseURL from there\n    // these exceptions will be unnecessary when we can properly implement config queuings\n    var baseURL;\n    envSet(loader, cfg, function(cfg) {\n      baseURL = baseURL || cfg.baseURL;\n    });\n    baseURL = baseURL || cfg.baseURL;\n\n    // always configure baseURL first\n    if (baseURL) {\n      var hasConfig = false;\n      function checkHasConfig(obj) {\n        for (var p in obj)\n          if (obj.hasOwnProperty(p))\n            return true;\n      }\n      if (checkHasConfig(loader.packages) || checkHasConfig(loader.meta) || checkHasConfig(loader.depCache) || checkHasConfig(loader.bundles) || checkHasConfig(loader.packageConfigPaths))\n        throw new TypeError('Incorrect configuration order. The baseURL must be configured with the first SystemJS.config call.');\n\n      this.baseURL = baseURL;\n      prepareBaseURL.call(this);\n    }\n\n    if (cfg.paths)\n      extend(loader.paths, cfg.paths);\n\n    envSet(loader, cfg, function(cfg) {\n      if (cfg.paths)\n        extend(loader.paths, cfg.paths);\n    });\n\n    // warn on wildcard path deprecations\n    if (this.warnings) {\n      for (var p in loader.paths)\n        if (p.indexOf('*') != -1)\n          warn.call(loader, 'Paths configuration \"' + p + '\" -> \"' + loader.paths[p] + '\" uses wildcards which are being deprecated for just leaving a trailing \"/\" to indicate folder paths.');\n    }\n  }\n\n  if (cfg.defaultJSExtensions) {\n    loader.defaultJSExtensions = cfg.defaultJSExtensions;\n    warn.call(loader, 'The defaultJSExtensions configuration option is deprecated, use packages configuration instead.');\n  }\n\n  if (cfg.pluginFirst)\n    loader.pluginFirst = cfg.pluginFirst;\n\n  if (cfg.map) {\n    for (var p in cfg.map) {\n      var v = cfg.map[p];\n\n      // object map backwards-compat into packages configuration\n      if (typeof v !== 'string') {\n        var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';\n        var prop = loader.decanonicalize(p);\n        if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')\n          prop = prop.substr(0, prop.length - 3);\n\n        // if a package main, revert it\n        var pkgMatch = '';\n        for (var pkg in loader.packages) {\n          if (prop.substr(0, pkg.length) == pkg\n              && (!prop[pkg.length] || prop[pkg.length] == '/')\n              && pkgMatch.split('/').length < pkg.split('/').length)\n            pkgMatch = pkg;\n        }\n        if (pkgMatch && loader.packages[pkgMatch].main)\n          prop = prop.substr(0, prop.length - loader.packages[pkgMatch].main.length - 1);\n\n        var pkg = loader.packages[prop] = loader.packages[prop] || {};\n        pkg.map = v;\n      }\n      else {\n        loader.map[p] = v;\n      }\n    }\n  }\n\n  if (cfg.packageConfigPaths) {\n    var packageConfigPaths = [];\n    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {\n      var path = cfg.packageConfigPaths[i];\n      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));\n      var normalized = coreResolve.call(loader, path.substr(0, packageLength));\n      packageConfigPaths[i] = normalized + path.substr(packageLength);\n    }\n    loader.packageConfigPaths = packageConfigPaths;\n  }\n\n  if (cfg.bundles) {\n    for (var p in cfg.bundles) {\n      var bundle = [];\n      for (var i = 0; i < cfg.bundles[p].length; i++) {\n        var defaultJSExtension = loader.defaultJSExtensions && cfg.bundles[p][i].substr(cfg.bundles[p][i].length - 3, 3) != '.js';\n        var normalizedBundleDep = loader.decanonicalize(cfg.bundles[p][i]);\n        if (defaultJSExtension && normalizedBundleDep.substr(normalizedBundleDep.length - 3, 3) == '.js')\n          normalizedBundleDep = normalizedBundleDep.substr(0, normalizedBundleDep.length - 3);\n        bundle.push(normalizedBundleDep);\n      }\n      loader.bundles[p] = bundle;\n    }\n  }\n\n  if (cfg.packages) {\n    for (var p in cfg.packages) {\n      if (p.match(/^([^\\/]+:)?\\/\\/$/))\n        throw new TypeError('\"' + p + '\" is not a valid package name.');\n\n      var prop = coreResolve.call(loader, p);\n\n      // allow trailing slash in packages\n      if (prop[prop.length - 1] == '/')\n        prop = prop.substr(0, prop.length - 1);\n\n      setPkgConfig(loader, prop, cfg.packages[p], false);\n    }\n  }\n\n  for (var c in cfg) {\n    var v = cfg[c];\n\n    if (indexOf.call(['baseURL', 'map', 'packages', 'bundles', 'paths', 'warnings', 'packageConfigPaths',\n          'loaderErrorStack', 'browserConfig', 'nodeConfig', 'devConfig', 'buildConfig', 'productionConfig'], c) != -1)\n      continue;\n\n    if (typeof v != 'object' || v instanceof Array) {\n      loader[c] = v;\n    }\n    else {\n      loader[c] = loader[c] || {};\n\n      for (var p in v) {\n        // base-level wildcard meta does not normalize to retain catch-all quality\n        if (c == 'meta' && p[0] == '*') {\n          extend(loader[c][p] = loader[c][p] || {}, v[p]);\n        }\n        else if (c == 'meta') {\n          // meta can go through global map, with defaultJSExtensions adding\n          var resolved = coreResolve.call(loader, p);\n          if (loader.defaultJSExtensions && resolved.substr(resolved.length - 3, 3) != '.js' && !isPlain(resolved))\n            resolved += '.js';\n          extend(loader[c][resolved] = loader[c][resolved] || {}, v[p]);\n        }\n        else if (c == 'depCache') {\n          var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';\n          var prop = loader.decanonicalize(p);\n          if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')\n            prop = prop.substr(0, prop.length - 3);\n          loader[c][prop] = [].concat(v[p]);\n        }\n        else {\n          loader[c][p] = v[p];\n        }\n      }\n    }\n  }\n\n  envSet(loader, cfg, function(cfg) {\n    loader.config(cfg, true);\n  });\n};\n/*\n * Package Configuration Extension\n *\n * Example:\n *\n * SystemJS.packages = {\n *   jquery: {\n *     main: 'index.js', // when not set, package name is requested directly\n *     format: 'amd',\n *     defaultExtension: 'ts', // defaults to 'js', can be set to false\n *     modules: {\n *       '*.ts': {\n *         loader: 'typescript'\n *       },\n *       'vendor/sizzle.js': {\n *         format: 'global'\n *       }\n *     },\n *     map: {\n *        // map internal require('sizzle') to local require('./vendor/sizzle')\n *        sizzle: './vendor/sizzle.js',\n *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'\n *        './vendor/another.js': './another/index.js',\n *        // test.js / test -> lib/test.js\n *        './test.js': './lib/test.js',\n *\n *        // environment-specific map configurations\n *        './index.js': {\n *          '~browser': './index-node.js',\n *          './custom-condition.js|~export': './index-custom.js'\n *        }\n *     },\n *     // allows for setting package-prefixed depCache\n *     // keys are normalized module names relative to the package itself\n *     depCache: {\n *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js\n *       './index.js': ['./test'],\n *       './test.js': ['external-dep'],\n *       'external-dep/path.js': ['./another.js']\n *     }\n *   }\n * };\n *\n * Then:\n *   import 'jquery'                       -> jquery/index.js\n *   import 'jquery/submodule'             -> jquery/submodule.js\n *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript\n *   import 'jquery/vendor/another'        -> another/index.js\n *\n * Detailed Behaviours\n * - main can have a leading \"./\" can be added optionally\n * - map and defaultExtension are applied to the main\n * - defaultExtension adds the extension only if the exact extension is not present\n * - defaultJSExtensions applies after map when defaultExtension is not set\n * - if a meta value is available for a module, map and defaultExtension are skipped\n * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)\n * - condition module map is '@env' module in package or '@system-env' globally\n * - map targets support conditional interpolation ('./x': './x.#{|env}.js')\n * - internal package map targets cannot use boolean conditionals\n *\n * Package Configuration Loading\n *\n * Not all packages may already have their configuration present in the System config\n * For these cases, a list of packageConfigPaths can be provided, which when matched against\n * a request, will first request a \".json\" file by the package name to derive the package\n * configuration from. This allows dynamic loading of non-predetermined code, a key use\n * case in SystemJS.\n *\n * Example:\n *\n *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];\n *\n *   // will first request 'packages/new-package/package.json' for the package config\n *   // before completing the package request to 'packages/new-package/path'\n *   SystemJS.import('packages/new-package/path');\n *\n *   // will first request 'packages/test/package.json' before the main\n *   SystemJS.import('packages/test');\n *\n * When a package matches packageConfigPaths, it will always send a config request for\n * the package configuration.\n * The package name itself is taken to be the match up to and including the last wildcard\n * or trailing slash.\n * The most specific package config path will be used.\n * Any existing package configurations for the package will deeply merge with the\n * package config, with the existing package configurations taking preference.\n * To opt-out of the package configuration request for a package that matches\n * packageConfigPaths, use the { configured: true } package config option.\n *\n */\n(function() {\n\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.packages = {};\n      this.packageConfigPaths = [];\n    };\n  });\n\n  function getPackage(loader, normalized) {\n    // use most specific package\n    var curPkg, curPkgLen = 0, pkgLen;\n    for (var p in loader.packages) {\n      if (normalized.substr(0, p.length) === p && (normalized.length === p.length || normalized[p.length] === '/')) {\n        pkgLen = p.split('/').length;\n        if (pkgLen > curPkgLen) {\n          curPkg = p;\n          curPkgLen = pkgLen;\n        }\n      }\n    }\n    return curPkg;\n  }\n\n  function addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions) {\n    // don't apply extensions to folders or if defaultExtension = false\n    if (!subPath || subPath[subPath.length - 1] == '/' || skipExtensions || pkg.defaultExtension === false)\n      return subPath;\n\n    var metaMatch = false;\n\n    // exact meta or meta with any content after the last wildcard skips extension\n    if (pkg.meta)\n      getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {\n        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)\n          return metaMatch = true;\n      });\n\n    // exact global meta or meta with any content after the last wildcard skips extension\n    if (!metaMatch && loader.meta)\n      getMetaMatches(loader.meta, pkgName + '/' + subPath, function(metaPattern, matchMeta, matchDepth) {\n        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)\n          return metaMatch = true;\n      });\n\n    if (metaMatch)\n      return subPath;\n\n    // work out what the defaultExtension is and add if not there already\n    // NB reconsider if default should really be \".js\"?\n    var defaultExtension = '.' + (pkg.defaultExtension || 'js');\n    if (subPath.substr(subPath.length - defaultExtension.length) != defaultExtension)\n      return subPath + defaultExtension;\n    else\n      return subPath;\n  }\n\n  function applyPackageConfigSync(loader, pkg, pkgName, subPath, skipExtensions) {\n    // main\n    if (!subPath) {\n      if (pkg.main)\n        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;\n      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')\n      else\n        // NB can add a default package main convention here when defaultJSExtensions is deprecated\n        // if it becomes internal to the package then it would no longer be an exit path\n        return pkgName + (loader.defaultJSExtensions ? '.js' : '');\n    }\n\n    // map config checking without then with extensions\n    if (pkg.map) {\n      var mapPath = './' + subPath;\n\n      var mapMatch = getMapMatch(pkg.map, mapPath);\n\n      // we then check map with the default extension adding\n      if (!mapMatch) {\n        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);\n        if (mapPath != './' + subPath)\n          mapMatch = getMapMatch(pkg.map, mapPath);\n      }\n      if (mapMatch) {\n        var mapped = doMapSync(loader, pkg, pkgName, mapMatch, mapPath, skipExtensions);\n        if (mapped)\n          return mapped;\n      }\n    }\n\n    // normal package resolution\n    return pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);\n  }\n\n  function validMapping(mapMatch, mapped, pkgName, path) {\n    // disallow internal to subpath maps\n    if (mapMatch == '.')\n      throw new Error('Package ' + pkgName + ' has a map entry for \".\" which is not permitted.');\n    \n    // allow internal ./x -> ./x/y or ./x/ -> ./x/y recursive maps\n    // but only if the path is exactly ./x and not ./x/z\n    if (mapped.substr(0, mapMatch.length) == mapMatch && path.length > mapMatch.length)\n      return false;\n\n    return true;\n  }\n\n  function doMapSync(loader, pkg, pkgName, mapMatch, path, skipExtensions) {\n    if (path[path.length - 1] == '/')\n      path = path.substr(0, path.length - 1);\n    var mapped = pkg.map[mapMatch];\n\n    if (typeof mapped == 'object')\n      throw new Error('Synchronous conditional normalization not supported sync normalizing ' + mapMatch + ' in ' + pkgName);\n\n    if (!validMapping(mapMatch, mapped, pkgName, path) || typeof mapped != 'string')\n      return;\n\n    // package map to main / base-level\n    if (mapped == '.')\n      mapped = pkgName;\n\n    // internal package map\n    else if (mapped.substr(0, 2) == './')\n      return pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions);\n    \n    // external map reference\n    return loader.normalizeSync(mapped + path.substr(mapMatch.length), pkgName + '/');\n  }\n\n  function applyPackageConfig(loader, pkg, pkgName, subPath, skipExtensions) {\n    // main\n    if (!subPath) {\n      if (pkg.main)\n        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;\n      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')\n      else\n        // NB can add a default package main convention here when defaultJSExtensions is deprecated\n        // if it becomes internal to the package then it would no longer be an exit path\n        return Promise.resolve(pkgName + (loader.defaultJSExtensions ? '.js' : ''));\n    }\n\n    // map config checking without then with extensions\n    var mapPath, mapMatch;\n\n    if (pkg.map) {\n      mapPath = './' + subPath;\n      mapMatch = getMapMatch(pkg.map, mapPath);\n\n      // we then check map with the default extension adding\n      if (!mapMatch) {\n        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);\n        if (mapPath != './' + subPath)\n          mapMatch = getMapMatch(pkg.map, mapPath);\n      }\n    }\n\n    return (mapMatch ? doMap(loader, pkg, pkgName, mapMatch, mapPath, skipExtensions) : Promise.resolve())\n    .then(function(mapped) {\n      if (mapped)\n        return Promise.resolve(mapped);\n\n      // normal package resolution / fallback resolution for no conditional match\n      return Promise.resolve(pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions));\n    });\n  }\n\n  function doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions) {\n    // NB the interpolation cases should strictly skip subsequent interpolation\n    // package map to main / base-level\n    if (mapped == '.')\n      mapped = pkgName;\n    \n    // internal package map\n    else if (mapped.substr(0, 2) == './')\n      return Promise.resolve(pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions))\n      .then(function(name) {\n        return interpolateConditional.call(loader, name, pkgName + '/');\n      });\n    \n    // external map reference\n    return loader.normalize(mapped + path.substr(mapMatch.length), pkgName + '/');\n  }\n\n  function doMap(loader, pkg, pkgName, mapMatch, path, skipExtensions) {\n    if (path[path.length - 1] == '/')\n      path = path.substr(0, path.length - 1);\n\n    var mapped = pkg.map[mapMatch];\n\n    if (typeof mapped == 'string') {\n      if (!validMapping(mapMatch, mapped, pkgName, path))\n        return Promise.resolve();\n      return doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions);\n    }\n\n    // we use a special conditional syntax to allow the builder to handle conditional branch points further\n    if (loader.builder)\n      return Promise.resolve(pkgName + '/#:' + path);\n\n    // we load all conditions upfront\n    var conditionPromises = [];\n    var conditions = [];\n    for (var e in mapped) {\n      var c = parseCondition(e);\n      conditions.push({\n        condition: c,\n        map: mapped[e]\n      });\n      conditionPromises.push(loader['import'](c.module, pkgName));\n    }\n\n    // map object -> conditional map\n    return Promise.all(conditionPromises)\n    .then(function(conditionValues) {\n      // first map condition to match is used\n      for (var i = 0; i < conditions.length; i++) {\n        var c = conditions[i].condition;\n        var value = readMemberExpression(c.prop, conditionValues[i]);\n        if (!c.negate && value || c.negate && !value)\n          return conditions[i].map;\n      }\n    })\n    .then(function(mapped) {\n      if (mapped) {\n        if (!validMapping(mapMatch, mapped, pkgName, path))\n          return;\n        return doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions);\n      }\n\n      // no environment match -> fallback to original subPath by returning undefined\n    });\n  }\n\n  // normalizeSync = decanonicalize + package resolution\n  SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalize;\n\n  // decanonicalize must JUST handle package defaultExtension: false case when defaultJSExtensions is set\n  // to be deprecated!\n  hook('decanonicalize', function(decanonicalize) {\n    return function(name, parentName) {\n      if (this.builder)\n        return decanonicalize.call(this, name, parentName, true);\n\n      var decanonicalized = decanonicalize.call(this, name, parentName, false);\n\n      if (!this.defaultJSExtensions)\n        return decanonicalized;\n    \n      var pkgName = getPackage(this, decanonicalized);\n\n      var pkg = this.packages[pkgName];\n      var defaultExtension = pkg && pkg.defaultExtension;\n\n      if (defaultExtension == undefined && pkg && pkg.meta)\n        getMetaMatches(pkg.meta, decanonicalized.substr(pkgName), function(metaPattern, matchMeta, matchDepth) {\n          if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1) {\n            defaultExtension = false;\n            return true;\n          }\n        });\n      \n      if ((defaultExtension === false || defaultExtension && defaultExtension != '.js') && name.substr(name.length - 3, 3) != '.js' && decanonicalized.substr(decanonicalized.length - 3, 3) == '.js')\n        decanonicalized = decanonicalized.substr(0, decanonicalized.length - 3);\n\n      return decanonicalized;\n    };\n  });\n\n  hook('normalizeSync', function(normalizeSync) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n      isPlugin = isPlugin === true;\n\n      // apply contextual package map first\n      // (we assume the parent package config has already been loaded)\n      if (parentName)\n        var parentPackageName = getPackage(loader, parentName) ||\n            loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&\n            getPackage(loader, parentName.substr(0, parentName.length - 3));\n\n      var parentPackage = parentPackageName && loader.packages[parentPackageName];\n\n      // ignore . since internal maps handled by standard package resolution\n      if (parentPackage && name[0] != '.') {\n        var parentMap = parentPackage.map;\n        var parentMapMatch = parentMap && getMapMatch(parentMap, name);\n\n        if (parentMapMatch && typeof parentMap[parentMapMatch] == 'string') {\n          var mapped = doMapSync(loader, parentPackage, parentPackageName, parentMapMatch, name, isPlugin);      \n          if (mapped)\n            return mapped;\n        }\n      }\n\n      var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n\n      // apply map, core, paths, contextual package map\n      var normalized = normalizeSync.call(loader, name, parentName, false);\n\n      // undo defaultJSExtension\n      if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')\n        defaultJSExtension = false;\n      if (defaultJSExtension)\n        normalized = normalized.substr(0, normalized.length - 3);\n\n      var pkgConfigMatch = getPackageConfigMatch(loader, normalized);\n      var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);\n\n      if (!pkgName)\n        return normalized + (defaultJSExtension ? '.js' : '');\n\n      var subPath = normalized.substr(pkgName.length + 1);\n\n      return applyPackageConfigSync(loader, loader.packages[pkgName] || {}, pkgName, subPath, isPlugin);\n    };\n  });\n\n  hook('normalize', function(normalize) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n      isPlugin = isPlugin === true;\n\n      return Promise.resolve()\n      .then(function() {\n        // apply contextual package map first\n        // (we assume the parent package config has already been loaded)\n        if (parentName)\n          var parentPackageName = getPackage(loader, parentName) ||\n              loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&\n              getPackage(loader, parentName.substr(0, parentName.length - 3));\n\n        var parentPackage = parentPackageName && loader.packages[parentPackageName];\n\n        // ignore . since internal maps handled by standard package resolution\n        if (parentPackage && name.substr(0, 2) != './') {\n          var parentMap = parentPackage.map;\n          var parentMapMatch = parentMap && getMapMatch(parentMap, name);\n\n          if (parentMapMatch)\n            return doMap(loader, parentPackage, parentPackageName, parentMapMatch, name, isPlugin);\n        }\n\n        return Promise.resolve();\n      })\n      .then(function(mapped) {\n        if (mapped)\n          return mapped;\n\n        var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n\n        // apply map, core, paths, contextual package map\n        var normalized = normalize.call(loader, name, parentName, false);\n\n        // undo defaultJSExtension\n        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')\n          defaultJSExtension = false;\n        if (defaultJSExtension)\n          normalized = normalized.substr(0, normalized.length - 3);\n\n        var pkgConfigMatch = getPackageConfigMatch(loader, normalized);\n        var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);\n\n        if (!pkgName)\n          return Promise.resolve(normalized + (defaultJSExtension ? '.js' : ''));\n\n        var pkg = loader.packages[pkgName];\n\n        // if package is already configured or not a dynamic config package, use existing package config\n        var isConfigured = pkg && (pkg.configured || !pkgConfigMatch);\n        return (isConfigured ? Promise.resolve(pkg) : loadPackageConfigPath(loader, pkgName, pkgConfigMatch.configPath))\n        .then(function(pkg) {\n          var subPath = normalized.substr(pkgName.length + 1);\n\n          return applyPackageConfig(loader, pkg, pkgName, subPath, isPlugin);\n        });\n      });\n    };\n  });\n\n  // check if the given normalized name matches a packageConfigPath\n  // if so, loads the config\n  var packageConfigPaths = {};\n\n  // data object for quick checks against package paths\n  function createPkgConfigPathObj(path) {\n    var lastWildcard = path.lastIndexOf('*');\n    var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));\n    return {\n      length: length,\n      regEx: new RegExp('^(' + path.substr(0, length).replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/\\*/g, '[^\\\\/]+') + ')(\\\\/|$)'),\n      wildcard: lastWildcard != -1\n    };\n  }\n\n  // most specific match wins\n  function getPackageConfigMatch(loader, normalized) {\n    var pkgName, exactMatch = false, configPath;\n    for (var i = 0; i < loader.packageConfigPaths.length; i++) {\n      var packageConfigPath = loader.packageConfigPaths[i];\n      var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));\n      if (normalized.length < p.length)\n        continue;\n      var match = normalized.match(p.regEx);\n      if (match && (!pkgName || (!(exactMatch && p.wildcard) && pkgName.length < match[1].length))) {\n        pkgName = match[1];\n        exactMatch = !p.wildcard;\n        configPath = pkgName + packageConfigPath.substr(p.length);\n      }\n    }\n\n    if (!pkgName)\n      return;\n\n    return {\n      packageName: pkgName,\n      configPath: configPath\n    };\n  }\n\n  function loadPackageConfigPath(loader, pkgName, pkgConfigPath) {\n    var configLoader = loader.pluginLoader || loader;\n\n    // NB remove this when json is default\n    (configLoader.meta[pkgConfigPath] = configLoader.meta[pkgConfigPath] || {}).format = 'json';\n    configLoader.meta[pkgConfigPath].loader = null;\n\n    return configLoader.load(pkgConfigPath)\n    .then(function() {\n      var cfg = configLoader.get(pkgConfigPath)['default'];\n\n      // support \"systemjs\" prefixing\n      if (cfg.systemjs)\n        cfg = cfg.systemjs;\n\n      // modules backwards compatibility\n      if (cfg.modules) {\n        cfg.meta = cfg.modules;\n        warn.call(loader, 'Package config file ' + pkgConfigPath + ' is configured with \"modules\", which is deprecated as it has been renamed to \"meta\".');\n      }\n\n      return setPkgConfig(loader, pkgName, cfg, true);\n    });\n  }\n\n  function getMetaMatches(pkgMeta, subPath, matchFn) {\n    // wildcard meta\n    var meta = {};\n    var wildcardIndex;\n    for (var module in pkgMeta) {\n      // allow meta to start with ./ for flexibility\n      var dotRel = module.substr(0, 2) == './' ? './' : '';\n      if (dotRel)\n        module = module.substr(2);\n\n      wildcardIndex = module.indexOf('*');\n      if (wildcardIndex === -1)\n        continue;\n\n      if (module.substr(0, wildcardIndex) == subPath.substr(0, wildcardIndex)\n          && module.substr(wildcardIndex + 1) == subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {\n        // alow match function to return true for an exit path\n        if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))\n          return;\n      }\n    }\n    // exact meta\n    var exactMeta = pkgMeta[subPath] && pkgMeta.hasOwnProperty && pkgMeta.hasOwnProperty(subPath) ? pkgMeta[subPath] : pkgMeta['./' + subPath];\n    if (exactMeta)\n      matchFn(exactMeta, exactMeta, 0);\n  }\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      return Promise.resolve(locate.call(this, load))\n      .then(function(address) {\n        var pkgName = getPackage(loader, load.name);\n        if (pkgName) {\n          var pkg = loader.packages[pkgName];\n          var subPath = load.name.substr(pkgName.length + 1);\n\n          var meta = {};\n          if (pkg.meta) {\n            var bestDepth = 0;\n\n            // NB support a main shorthand in meta here?\n            getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {\n              if (matchDepth > bestDepth)\n                bestDepth = matchDepth;\n              extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);\n            });\n\n            extendMeta(load.metadata, meta);\n          }\n\n          // format\n          if (pkg.format && !load.metadata.loader)\n            load.metadata.format = load.metadata.format || pkg.format;\n        }\n\n        return address;\n      });\n    };\n  });\n\n})();\n/*\n * Script tag fetch\n *\n * When load.metadata.scriptLoad is true, we load via script tag injection.\n */\n(function() {\n\n  if (typeof document != 'undefined')\n    var head = document.getElementsByTagName('head')[0];\n\n  var curSystem;\n  var curRequire;\n\n  // if doing worker executing, this is set to the load record being executed\n  var workerLoad = null;\n  \n  // interactive mode handling method courtesy RequireJS\n  var ieEvents = head && (function() {\n    var s = document.createElement('script');\n    var isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';\n    return s.attachEvent && !(s.attachEvent.toString && s.attachEvent.toString().indexOf('[native code') < 0) && !isOpera;\n  })();\n\n  // IE interactive-only part\n  // we store loading scripts array as { script: <script>, load: {...} }\n  var interactiveLoadingScripts = [];\n  var interactiveScript;\n  function getInteractiveScriptLoad() {\n    if (interactiveScript && interactiveScript.script.readyState === 'interactive')\n      return interactiveScript.load;\n\n    for (var i = 0; i < interactiveLoadingScripts.length; i++)\n      if (interactiveLoadingScripts[i].script.readyState == 'interactive') {\n        interactiveScript = interactiveLoadingScripts[i];\n        return interactiveScript.load;\n      }\n  }\n  \n  // System.register, System.registerDynamic, AMD define pipeline\n  // this is called by the above methods when they execute\n  // we then run the reduceRegister_ collection function either immediately\n  // if we are in IE and know the currently executing script (interactive)\n  // or later if we need to wait for the synchronous load callback to know the script\n  var loadingCnt = 0;\n  var registerQueue = [];\n  hook('pushRegister_', function(pushRegister) {\n    return function(register) {\n      // if using eval-execution then skip\n      if (pushRegister.call(this, register))\n        return false;\n\n      // if using worker execution, then we're done\n      if (workerLoad)\n        this.reduceRegister_(workerLoad, register);\n\n      // detect if we know the currently executing load (IE)\n      // if so, immediately call reduceRegister\n      else if (ieEvents)\n        this.reduceRegister_(getInteractiveScriptLoad(), register);\n\n      // otherwise, add to our execution queue\n      // to call reduceRegister on sync script load event\n      else if (loadingCnt)\n        registerQueue.push(register);\n\n      // if we're not currently loading anything though\n      // then do the reduction against a null load\n      // (out of band named define or named register)\n      // note even in non-script environments, this catch is used\n      else\n        this.reduceRegister_(null, register);\n\n      return true;\n    };\n  });\n\n  function webWorkerImport(loader, load) {\n    return new Promise(function(resolve, reject) {\n      if (load.metadata.integrity)\n        reject(new Error('Subresource integrity checking is not supported in web workers.'));\n\n      workerLoad = load;\n      try {\n        importScripts(load.address);\n      }\n      catch(e) {\n        workerLoad = null;\n        reject(e);\n      }\n      workerLoad = null;\n\n      // if nothing registered, then something went wrong\n      if (!load.metadata.entry)\n        reject(new Error(load.address + ' did not call System.register or AMD define. If loading a global, ensure the meta format is set to global.'));\n\n      resolve('');\n    });\n  }\n\n  // override fetch to use script injection\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var loader = this;\n\n      if (load.metadata.format == 'json' || !load.metadata.scriptLoad || (!isBrowser && !isWorker))\n        return fetch.call(this, load);\n\n      if (isWorker)\n        return webWorkerImport(loader, load);\n\n      return new Promise(function(resolve, reject) {\n        var s = document.createElement('script');\n        \n        s.async = true;\n\n        if (load.metadata.crossOrigin)\n          s.crossOrigin = load.metadata.crossOrigin;\n\n        if (load.metadata.integrity)\n          s.setAttribute('integrity', load.metadata.integrity);\n\n        if (ieEvents) {\n          s.attachEvent('onreadystatechange', complete);\n          interactiveLoadingScripts.push({\n            script: s,\n            load: load\n          });\n        }\n        else {\n          s.addEventListener('load', complete, false);\n          s.addEventListener('error', error, false);\n        }\n\n        loadingCnt++;\n\n        curSystem = __global.System;\n        curRequire = __global.require;\n\n        s.src = load.address;\n        head.appendChild(s);\n\n        function complete(evt) {\n          if (s.readyState && s.readyState != 'loaded' && s.readyState != 'complete')\n            return;\n\n          loadingCnt--;\n\n          // complete call is sync on execution finish\n          // (in ie already done reductions)\n          if (!load.metadata.entry && !registerQueue.length) {\n            loader.reduceRegister_(load);\n          }\n          else if (!ieEvents) {\n            for (var i = 0; i < registerQueue.length; i++)\n              loader.reduceRegister_(load, registerQueue[i]);\n            registerQueue = [];\n          }\n\n          cleanup();\n\n          // if nothing registered, then something went wrong\n          if (!load.metadata.entry && !load.metadata.bundle)\n            reject(new Error(load.name + ' did not call System.register or AMD define. If loading a global module configure the global name via the meta exports property for script injection support.'));\n\n          resolve('');\n        }\n\n        function error(evt) {\n          cleanup();\n          reject(new Error('Unable to load script ' + load.address));\n        }\n\n        function cleanup() {\n          __global.System = curSystem;\n          __global.require = curRequire;\n\n          if (s.detachEvent) {\n            s.detachEvent('onreadystatechange', complete);\n            for (var i = 0; i < interactiveLoadingScripts.length; i++)\n              if (interactiveLoadingScripts[i].script == s) {\n                if (interactiveScript && interactiveScript.script == s)\n                  interactiveScript = null;\n                interactiveLoadingScripts.splice(i, 1);\n              }\n          }\n          else {\n            s.removeEventListener('load', complete, false);\n            s.removeEventListener('error', error, false);\n          }\n\n          head.removeChild(s);\n        }\n      });\n    };\n  });\n})();\n/*\n * Instantiate registry extension\n *\n * Supports Traceur System.register 'instantiate' output for loading ES6 as ES5.\n *\n * - Creates the loader.register function\n * - Also supports metadata.format = 'register' in instantiate for anonymous register modules\n * - Also supports metadata.deps, metadata.execute and metadata.executingRequire\n *     for handling dynamic modules alongside register-transformed ES6 modules\n *\n *\n * The code here replicates the ES6 linking groups algorithm to ensure that\n * circular ES6 compiled into System.register can work alongside circular AMD \n * and CommonJS, identically to the actual ES6 loader.\n *\n */\n\n\n/*\n * Registry side table entries in loader.defined\n * Registry Entry Contains:\n *    - name\n *    - deps \n *    - declare for declarative modules\n *    - execute for dynamic modules, different to declarative execute on module\n *    - executingRequire indicates require drives execution for circularity of dynamic modules\n *    - declarative optional boolean indicating which of the above\n *\n * Can preload modules directly on SystemJS.defined['my/module'] = { deps, execute, executingRequire }\n *\n * Then the entry gets populated with derived information during processing:\n *    - normalizedDeps derived from deps, created in instantiate\n *    - groupIndex used by group linking algorithm\n *    - evaluated indicating whether evaluation has happend\n *    - module the module record object, containing:\n *      - exports actual module exports\n *\n *    For dynamic we track the es module with:\n *    - esModule actual es module value\n *    - esmExports whether to extend the esModule with named exports\n *      \n *    Then for declarative only we track dynamic bindings with the 'module' records:\n *      - name\n *      - exports\n *      - setters declarative setter functions\n *      - dependencies, module records of dependencies\n *      - importers, module records of dependents\n *\n * After linked and evaluated, entries are removed, declarative module records remain in separate\n * module binding table\n *\n */\n\nvar leadingCommentAndMetaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)*\\s*/;\nfunction detectRegisterFormat(source) {\n  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);\n  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) == 'System.register';\n}\n\nfunction createEntry() {\n  return {\n    name: null,\n    deps: null,\n    originalIndices: null,\n    declare: null,\n    execute: null,\n    executingRequire: false,\n    declarative: false,\n    normalizedDeps: null,\n    groupIndex: null,\n    evaluated: false,\n    module: null,\n    esModule: null,\n    esmExports: false\n  };\n}\n\n(function() {\n\n  /*\n   * There are two variations of System.register:\n   * 1. System.register for ES6 conversion (2-3 params) - System.register([name, ]deps, declare)\n   *    see https://github.com/ModuleLoader/es6-module-loader/wiki/System.register-Explained\n   *\n   * 2. System.registerDynamic for dynamic modules (3-4 params) - System.registerDynamic([name, ]deps, executingRequire, execute)\n   * the true or false statement \n   *\n   * this extension implements the linking algorithm for the two variations identical to the spec\n   * allowing compiled ES6 circular references to work alongside AMD and CJS circular references.\n   *\n   */\n  SystemJSLoader.prototype.register = function(name, deps, declare) {\n    if (typeof name != 'string') {\n      declare = deps;\n      deps = name;\n      name = null;\n    }\n\n    // dynamic backwards-compatibility\n    // can be deprecated eventually\n    if (typeof declare == 'boolean')\n      return this.registerDynamic.apply(this, arguments);\n\n    var entry = createEntry();\n    // ideally wouldn't apply map config to bundle names but \n    // dependencies go through map regardless so we can't restrict\n    // could reconsider in shift to new spec\n    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);\n    entry.declarative = true;\n    entry.deps = deps;\n    entry.declare = declare;\n\n    this.pushRegister_({\n      amd: false,\n      entry: entry\n    });\n  };\n  SystemJSLoader.prototype.registerDynamic = function(name, deps, declare, execute) {\n    if (typeof name != 'string') {\n      execute = declare;\n      declare = deps;\n      deps = name;\n      name = null;\n    }\n\n    // dynamic\n    var entry = createEntry();\n    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);\n    entry.deps = deps;\n    entry.execute = execute;\n    entry.executingRequire = declare;\n\n    this.pushRegister_({\n      amd: false,\n      entry: entry\n    });\n  };\n  hook('reduceRegister_', function() {\n    return function(load, register) {\n      if (!register)\n        return;\n\n      var entry = register.entry;\n      var curMeta = load && load.metadata;\n\n      // named register\n      if (entry.name) {\n        if (!(entry.name in this.defined))\n          this.defined[entry.name] = entry;\n\n        if (curMeta)\n          curMeta.bundle = true;\n      }\n      // anonymous register\n      if (!entry.name || load && !curMeta.entry && entry.name == load.name) {\n        if (!curMeta)\n          throw new TypeError('Invalid System.register call. Anonymous System.register calls can only be made by modules loaded by SystemJS.import and not via script tags.');\n        if (curMeta.entry) {\n          if (curMeta.format == 'register')\n            throw new Error('Multiple anonymous System.register calls in module ' + load.name + '. If loading a bundle, ensure all the System.register calls are named.');\n          else\n            throw new Error('Module ' + load.name + ' interpreted as ' + curMeta.format + ' module format, but called System.register.');\n        }\n        if (!curMeta.format)\n          curMeta.format = 'register';\n        curMeta.entry = entry;\n      }\n    };\n  });\n\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n\n      this.defined = {};\n      this._loader.moduleRecords = {};\n    };\n  });\n\n  function buildGroups(entry, loader, groups) {\n    groups[entry.groupIndex] = groups[entry.groupIndex] || [];\n\n    if (indexOf.call(groups[entry.groupIndex], entry) != -1)\n      return;\n\n    groups[entry.groupIndex].push(entry);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = loader.defined[depName];\n      \n      // not in the registry means already linked / ES6\n      if (!depEntry || depEntry.evaluated)\n        continue;\n      \n      // now we know the entry is in our unlinked linkage group\n      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);\n\n      // the group index of an entry is always the maximum\n      if (depEntry.groupIndex === null || depEntry.groupIndex < depGroupIndex) {\n        \n        // if already in a group, remove from the old group\n        if (depEntry.groupIndex !== null) {\n          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);\n\n          // if the old group is empty, then we have a mixed depndency cycle\n          if (groups[depEntry.groupIndex].length == 0)\n            throw new Error(\"Mixed dependency cycle detected\");\n        }\n\n        depEntry.groupIndex = depGroupIndex;\n      }\n\n      buildGroups(depEntry, loader, groups);\n    }\n  }\n\n  function link(name, startEntry, loader) {\n    // skip if already linked\n    if (startEntry.module)\n      return;\n\n    startEntry.groupIndex = 0;\n\n    var groups = [];\n\n    buildGroups(startEntry, loader, groups);\n\n    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;\n    for (var i = groups.length - 1; i >= 0; i--) {\n      var group = groups[i];\n      for (var j = 0; j < group.length; j++) {\n        var entry = group[j];\n\n        // link each group\n        if (curGroupDeclarative)\n          linkDeclarativeModule(entry, loader);\n        else\n          linkDynamicModule(entry, loader);\n      }\n      curGroupDeclarative = !curGroupDeclarative; \n    }\n  }\n\n  // module binding records\n  function ModuleRecord() {}\n  defineProperty(ModuleRecord, 'toString', {\n    value: function() {\n      return 'Module';\n    }\n  });\n\n  function getOrCreateModuleRecord(name, moduleRecords) {\n    return moduleRecords[name] || (moduleRecords[name] = {\n      name: name,\n      dependencies: [],\n      exports: new ModuleRecord(), // start from an empty module and extend\n      importers: []\n    });\n  }\n\n  function linkDeclarativeModule(entry, loader) {\n    // only link if already not already started linking (stops at circular)\n    if (entry.module)\n      return;\n\n    var moduleRecords = loader._loader.moduleRecords;\n    var module = entry.module = getOrCreateModuleRecord(entry.name, moduleRecords);\n    var exports = entry.module.exports;\n\n    var declaration = entry.declare.call(__global, function(name, value) {\n      module.locked = true;\n\n      if (typeof name == 'object') {\n        for (var p in name)\n          exports[p] = name[p];\n      }\n      else {\n        exports[name] = value;\n      }\n\n      for (var i = 0, l = module.importers.length; i < l; i++) {\n        var importerModule = module.importers[i];\n        if (!importerModule.locked) {\n          var importerIndex = indexOf.call(importerModule.dependencies, module);\n          var setter = importerModule.setters[importerIndex];\n          if (setter)\n            setter(exports);\n        }\n      }\n\n      module.locked = false;\n      return value;\n    }, { id: entry.name });\n\n    if (typeof declaration == 'function')\n      declaration = { setters: [], execute: declaration };\n\n    // allowing undefined declaration was a mistake! To be deprecated.\n    declaration = declaration || { setters: [], execute: function() {} };\n    \n    module.setters = declaration.setters;\n    module.execute = declaration.execute;\n\n    if (!module.setters || !module.execute) {\n      throw new TypeError('Invalid System.register form for ' + entry.name);\n    }\n\n    // now link all the module dependencies\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = loader.defined[depName];\n      var depModule = moduleRecords[depName];\n\n      // work out how to set depExports based on scenarios...\n      var depExports;\n\n      if (depModule) {\n        depExports = depModule.exports;\n      }\n      // dynamic, already linked in our registry\n      else if (depEntry && !depEntry.declarative) {\n        depExports = depEntry.esModule;\n      }\n      // in the loader registry\n      else if (!depEntry) {\n        depExports = loader.get(depName);\n      }\n      // we have an entry -> link\n      else {\n        linkDeclarativeModule(depEntry, loader);\n        depModule = depEntry.module;\n        depExports = depModule.exports;\n      }\n\n      // only declarative modules have dynamic bindings\n      if (depModule && depModule.importers) {\n        depModule.importers.push(module);\n        module.dependencies.push(depModule);\n      }\n      else {\n        module.dependencies.push(null);\n      }\n      \n      // run setters for all entries with the matching dependency name\n      var originalIndices = entry.originalIndices[i];\n      for (var j = 0, len = originalIndices.length; j < len; ++j) {\n        var index = originalIndices[j];\n        if (module.setters[index]) {\n          module.setters[index](depExports);\n        }\n      }\n    }\n  }\n\n  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)\n  function getModule(name, loader) {\n    var exports;\n    var entry = loader.defined[name];\n\n    if (!entry) {\n      exports = loader.get(name);\n      if (!exports)\n        throw new Error('Unable to load dependency ' + name + '.');\n    }\n\n    else {\n      if (entry.declarative)\n        ensureEvaluated(name, entry, [], loader);\n    \n      else if (!entry.evaluated)\n        linkDynamicModule(entry, loader);\n\n      exports = entry.module.exports;\n    }\n\n    if ((!entry || entry.declarative) && exports && exports.__useDefault)\n      return exports['default'];\n    \n    return exports;\n  }\n\n  function linkDynamicModule(entry, loader) {\n    if (entry.module)\n      return;\n\n    var exports = {};\n\n    var module = entry.module = { exports: exports, id: entry.name };\n\n    // AMD requires execute the tree first\n    if (!entry.executingRequire) {\n      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n        var depName = entry.normalizedDeps[i];\n        // we know we only need to link dynamic due to linking algorithm\n        var depEntry = loader.defined[depName];\n        if (depEntry)\n          linkDynamicModule(depEntry, loader);\n      }\n    }\n\n    // now execute\n    entry.evaluated = true;\n    var output = entry.execute.call(__global, function(name) {\n      for (var i = 0, l = entry.deps.length; i < l; i++) {\n        if (entry.deps[i] != name)\n          continue;\n        return getModule(entry.normalizedDeps[i], loader);\n      }\n      // try and normalize the dependency to see if we have another form\n      var nameNormalized = loader.normalizeSync(name, entry.name);\n      if (indexOf.call(entry.normalizedDeps, nameNormalized) != -1)\n        return getModule(nameNormalized, loader);\n\n      throw new Error('Module ' + name + ' not declared as a dependency of ' + entry.name);\n    }, exports, module);\n    \n    if (output !== undefined)\n      module.exports = output;\n\n    // create the esModule object, which allows ES6 named imports of dynamics\n    exports = module.exports;\n\n    // __esModule flag treats as already-named\n    if (exports && (exports.__esModule || exports instanceof Module))\n      entry.esModule = loader.newModule(exports);\n    // set module as 'default' export, then fake named exports by iterating properties\n    else if (entry.esmExports && exports !== __global)\n      entry.esModule = loader.newModule(getESModule(exports));\n    // just use the 'default' export\n    else\n      entry.esModule = loader.newModule({ 'default': exports, __useDefault: true });\n  }\n\n  /*\n   * Given a module, and the list of modules for this current branch,\n   *  ensure that each of the dependencies of this module is evaluated\n   *  (unless one is a circular dependency already in the list of seen\n   *  modules, in which case we execute it)\n   *\n   * Then we evaluate the module itself depth-first left to right \n   * execution to match ES6 modules\n   */\n  function ensureEvaluated(moduleName, entry, seen, loader) {\n    // if already seen, that means it's an already-evaluated non circular dependency\n    if (!entry || entry.evaluated || !entry.declarative)\n      return;\n\n    // this only applies to declarative modules which late-execute\n\n    seen.push(moduleName);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      if (indexOf.call(seen, depName) == -1) {\n        if (!loader.defined[depName])\n          loader.get(depName);\n        else\n          ensureEvaluated(depName, loader.defined[depName], seen, loader);\n      }\n    }\n\n    if (entry.evaluated)\n      return;\n\n    entry.evaluated = true;\n    entry.module.execute.call(__global);\n  }\n\n  // override the delete method to also clear the register caches\n  hook('delete', function(del) {\n    return function(name) {\n      delete this._loader.moduleRecords[name];\n      delete this.defined[name];\n      return del.call(this, name);\n    };\n  });\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      if (this.defined[load.name]) {\n        load.metadata.format = 'defined';\n        return '';\n      }\n\n      load.metadata.deps = load.metadata.deps || [];\n      \n      return fetch.call(this, load);\n    };\n  });\n\n  hook('translate', function(translate) {\n    // we run the meta detection here (register is after meta)\n    return function(load) {\n      load.metadata.deps = load.metadata.deps || [];\n      return Promise.resolve(translate.apply(this, arguments)).then(function(source) {\n        // run detection for register format\n        if (load.metadata.format == 'register' || !load.metadata.format && detectRegisterFormat(load.source))\n          load.metadata.format = 'register';\n        return source;\n      });\n    };\n  });\n\n  // implement a perforance shortpath for System.load with no deps\n  hook('load', function(doLoad) {\n    return function(normalized) {\n      var loader = this;\n      var entry = loader.defined[normalized];\n\n      if (!entry || entry.deps.length)\n        return doLoad.apply(this, arguments);\n\n      entry.originalIndices = entry.normalizedDeps = [];\n\n      // recursively ensure that the module and all its \n      // dependencies are linked (with dependency group handling)\n      link(normalized, entry, loader);\n\n      // now handle dependency execution in correct order\n      ensureEvaluated(normalized, entry, [], loader);\n      if (!entry.esModule)\n        entry.esModule = loader.newModule(entry.module.exports);\n\n      // remove from the registry\n      if (!loader.trace)\n        loader.defined[normalized] = undefined;\n\n      // return the defined module object\n      loader.set(normalized, entry.esModule);\n\n      return Promise.resolve();\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      if (load.metadata.format == 'detect')\n        load.metadata.format = undefined;\n\n      // assumes previous instantiate is sync\n      // (core json support)\n      instantiate.call(this, load);\n\n      var loader = this;\n\n      var entry;\n\n      // first we check if this module has already been defined in the registry\n      if (loader.defined[load.name]) {\n        entry = loader.defined[load.name];\n        // don't support deps for ES modules\n        if (!entry.declarative)\n          entry.deps = entry.deps.concat(load.metadata.deps);\n        entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // picked up already by an anonymous System.register script injection\n      // or via the dynamic formats\n      else if (load.metadata.entry) {\n        entry = load.metadata.entry;\n        entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // Contains System.register calls\n      // (dont run bundles in the builder)\n      else if (!(loader.builder && load.metadata.bundle) \n          && (load.metadata.format == 'register' || load.metadata.format == 'esm' || load.metadata.format == 'es6')) {\n        \n        if (typeof __exec != 'undefined')\n          __exec.call(loader, load);\n\n        if (!load.metadata.entry && !load.metadata.bundle)\n          throw new Error(load.name + ' detected as ' + load.metadata.format + ' but didn\\'t execute.');\n\n        entry = load.metadata.entry;\n\n        // support metadata deps for System.register\n        if (entry && load.metadata.deps)\n          entry.deps = entry.deps.concat(load.metadata.deps);\n      }\n\n      // named bundles are just an empty module\n      if (!entry) {\n        entry = createEntry();\n        entry.deps = load.metadata.deps;\n        entry.execute = function() {};\n      }\n\n      // place this module onto defined for circular references\n      loader.defined[load.name] = entry;\n      \n      var grouped = group(entry.deps);\n      \n      entry.deps = grouped.names;\n      entry.originalIndices = grouped.indices;\n      entry.name = load.name;\n      entry.esmExports = load.metadata.esmExports !== false;\n\n      // first, normalize all dependencies\n      var normalizePromises = [];\n      for (var i = 0, l = entry.deps.length; i < l; i++)\n        normalizePromises.push(Promise.resolve(loader.normalize(entry.deps[i], load.name)));\n\n      return Promise.all(normalizePromises).then(function(normalizedDeps) {\n\n        entry.normalizedDeps = normalizedDeps;\n\n        return {\n          deps: entry.deps,\n          execute: function() {\n            // recursively ensure that the module and all its \n            // dependencies are linked (with dependency group handling)\n            link(load.name, entry, loader);\n\n            // now handle dependency execution in correct order\n            ensureEvaluated(load.name, entry, [], loader);\n\n            if (!entry.esModule)\n              entry.esModule = loader.newModule(entry.module.exports);\n\n            // remove from the registry\n            if (!loader.trace)\n              loader.defined[load.name] = undefined;\n\n            // return the defined module object\n            return entry.esModule;\n          }\n        };\n      });\n    };\n  });\n})();\n/*\n * Extension to detect ES6 and auto-load Traceur or Babel for processing\n */\n(function() {\n  // good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case\n  var esmRegEx = /(^\\s*|[}\\);\\n]\\s*)(import\\s*(['\"]|(\\*\\s+as\\s+)?[^\"'\\(\\)\\n;]+\\s*from\\s*['\"]|\\{)|export\\s+\\*\\s+from\\s+[\"']|export\\s*(\\{|default|function|class|var|const|let|async\\s+function))/;\n\n  var traceurRuntimeRegEx = /\\$traceurRuntime\\s*\\./;\n  var babelHelpersRegEx = /babelHelpers\\s*\\./;\n\n  hook('translate', function(translate) {\n    return function(load) {\n      var loader = this;\n      var args = arguments;\n      return translate.apply(loader, args)\n      .then(function(source) {\n        // detect & transpile ES6\n        if (load.metadata.format == 'esm' || load.metadata.format == 'es6' || !load.metadata.format && source.match(esmRegEx)) {\n          if (load.metadata.format == 'es6')\n            warn.call(loader, 'Module ' + load.name + ' has metadata setting its format to \"es6\", which is deprecated.\\nThis should be updated to \"esm\".');\n\n          load.metadata.format = 'esm';\n\n          if (load.metadata.deps) {\n            var depInject = '';\n            for (var i = 0; i < load.metadata.deps.length; i++)\n              depInject += 'import \"' + load.metadata.deps[i] + '\"; ';\n            load.source = depInject + source;\n          }\n\n          if (loader.transpiler === false) {\n            // we accept translation to esm for builds though to enable eg rollup optimizations\n            if (loader.builder)\n              return source;\n            throw new TypeError('Unable to dynamically transpile ES module as SystemJS.transpiler set to false.');\n          }\n\n          // setting _loader.loadedTranspiler = false tells the next block to\n          // do checks for setting transpiler metadata\n          loader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;\n          if (loader.pluginLoader)\n            loader.pluginLoader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;\n\n          // do transpilation\n          return (loader._loader.transpilerPromise || (\n            loader._loader.transpilerPromise = Promise.resolve(\n              __global[loader.transpiler == 'typescript' ? 'ts' : loader.transpiler] || (loader.pluginLoader || loader)['import'](loader.transpiler)\n          ))).then(function(transpiler) {\n            loader._loader.loadedTranspilerRuntime = true;\n\n            // translate hooks means this is a transpiler plugin instead of a raw implementation\n            if (transpiler.translate) {\n              // if transpiler is the same as the plugin loader, then don't run twice\n              if (transpiler == load.metadata.loaderModule)\n                return load.source;\n\n              // convert the source map into an object for transpilation chaining\n              if (typeof load.metadata.sourceMap == 'string')\n                load.metadata.sourceMap = JSON.parse(load.metadata.sourceMap);\n\n              return Promise.resolve(transpiler.translate.apply(loader, args))\n              .then(function(source) {\n                // sanitize sourceMap if an object not a JSON string\n                var sourceMap = load.metadata.sourceMap;\n                if (sourceMap && typeof sourceMap == 'object') {\n                  var originalName = load.address.split('!')[0];\n                  \n                  // force set the filename of the original file\n                  if (!sourceMap.file || sourceMap.file == load.address)\n                    sourceMap.file = originalName + '!transpiled';\n\n                  // force set the sources list if only one source\n                  if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] == load.address))\n                    sourceMap.sources = [originalName];\n                }\n\n                if (load.metadata.format == 'esm' && !loader.builder && detectRegisterFormat(source))\n                  load.metadata.format = 'register';\n                return source;\n              });\n            }\n\n            // legacy builder support\n            if (loader.builder)\n              load.metadata.originalSource = load.source;\n            \n            // defined in es6-module-loader/src/transpile.js\n            return transpile.call(loader, load)\n            .then(function(source) {\n              // clear sourceMap as transpiler embeds it\n              load.metadata.sourceMap = undefined;\n              return source;\n            });            \n          }, function(err) {\n            throw addToError(err, 'Unable to load transpiler to transpile ' + load.name);\n          });\n        }\n\n        // skip transpiler and transpiler runtime loading when transpiler is disabled\n        if (loader.transpiler === false)\n          return source;\n\n        // load the transpiler correctly\n        if (loader._loader.loadedTranspiler === false && (loader.transpiler == 'traceur' || loader.transpiler == 'typescript' || loader.transpiler == 'babel')\n            && load.name == loader.normalizeSync(loader.transpiler)) {\n\n          // always load transpiler as a global\n          if (source.length > 100 && !load.metadata.format) {\n            load.metadata.format = 'global';\n\n            if (loader.transpiler === 'traceur')\n              load.metadata.exports = 'traceur';\n            if (loader.transpiler === 'typescript')\n              load.metadata.exports = 'ts';\n          }\n\n          loader._loader.loadedTranspiler = true;\n        }\n\n        // load the transpiler runtime correctly\n        if (loader._loader.loadedTranspilerRuntime === false) {\n          if (load.name == loader.normalizeSync('traceur-runtime')\n              || load.name == loader.normalizeSync('babel/external-helpers*')) {\n            if (source.length > 100)\n              load.metadata.format = load.metadata.format || 'global';\n\n            loader._loader.loadedTranspilerRuntime = true;\n          }\n        }\n\n        // detect transpiler runtime usage to load runtimes\n        if ((load.metadata.format == 'register' || load.metadata.bundle) && loader._loader.loadedTranspilerRuntime !== true) {\n          if (loader.transpiler == 'traceur' && !__global.$traceurRuntime && load.source.match(traceurRuntimeRegEx)) {\n            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;\n            return loader['import']('traceur-runtime').then(function() {\n              return source;\n            });\n          }\n          if (loader.transpiler == 'babel' && !__global.babelHelpers && load.source.match(babelHelpersRegEx)) {\n            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;\n            return loader['import']('babel/external-helpers').then(function() {\n              return source;\n            });\n          }\n        }\n\n        return source;\n      });\n    };\n  });\n\n})();\n/*\n  SystemJS Global Format\n\n  Supports\n    metadata.deps\n    metadata.globals\n    metadata.exports\n\n  Without metadata.exports, detects writes to the global object.\n*/\nvar __globalName = typeof self != 'undefined' ? 'self' : 'global';\n\nhook('fetch', function(fetch) {\n  return function(load) {\n    if (load.metadata.exports && !load.metadata.format)\n      load.metadata.format = 'global';\n    return fetch.call(this, load);\n  };\n});\n\n// ideally we could support script loading for globals, but the issue with that is that\n// we can't do it with AMD support side-by-side since AMD support means defining the\n// global define, and global support means not definining it, yet we don't have any hook\n// into the \"pre-execution\" phase of a script tag being loaded to handle both cases\nhook('instantiate', function(instantiate) {\n  return function(load) {\n    var loader = this;\n\n    if (!load.metadata.format)\n      load.metadata.format = 'global';\n\n    // global is a fallback module format\n    if (load.metadata.format == 'global' && !load.metadata.entry) {\n\n      var entry = createEntry();\n\n      load.metadata.entry = entry;\n\n      entry.deps = [];\n\n      for (var g in load.metadata.globals) {\n        var gl = load.metadata.globals[g];\n        if (gl)\n          entry.deps.push(gl);\n      }\n\n      entry.execute = function(require, exports, module) {\n\n        var globals;\n        if (load.metadata.globals) {\n          globals = {};\n          for (var g in load.metadata.globals)\n            if (load.metadata.globals[g])\n              globals[g] = require(load.metadata.globals[g]);\n        }\n        \n        var exportName = load.metadata.exports;\n\n        if (exportName)\n          load.source += '\\n' + __globalName + '[\"' + exportName + '\"] = ' + exportName + ';';\n\n        var retrieveGlobal = loader.get('@@global-helpers').prepareGlobal(module.id, exportName, globals, !!load.metadata.encapsulateGlobal);\n        __exec.call(loader, load);\n\n        return retrieveGlobal();\n      }\n    }\n    return instantiate.call(this, load);\n  };\n});\n\n\nfunction getGlobalValue(exports) {\n  if (typeof exports == 'string')\n    return readMemberExpression(exports, __global);\n\n  if (!(exports instanceof Array))\n    throw new Error('Global exports must be a string or array.');\n\n  var globalValue = {};\n  var first = true;\n  for (var i = 0; i < exports.length; i++) {\n    var val = readMemberExpression(exports[i], __global);\n    if (first) {\n      globalValue['default'] = val;\n      first = false;\n    }\n    globalValue[exports[i].split('.').pop()] = val;\n  }\n  return globalValue;\n}\n\nhook('reduceRegister_', function(reduceRegister) {\n  return function(load, register) {\n    if (register || (!load.metadata.exports && !(isWorker && load.metadata.format == 'global')))\n      return reduceRegister.call(this, load, register);\n\n    load.metadata.format = 'global';\n    var entry = load.metadata.entry = createEntry();\n    entry.deps = load.metadata.deps;\n    var globalValue = getGlobalValue(load.metadata.exports);\n    entry.execute = function() {\n      return globalValue;\n    };\n  };\n});\n\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(loader);\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    // bare minimum ignores\n    var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external', \n      'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];\n\n    var globalSnapshot;\n\n    function forEachGlobal(callback) {\n      if (Object.keys)\n        Object.keys(__global).forEach(callback);\n      else\n        for (var g in __global) {\n          if (!hasOwnProperty.call(__global, g))\n            continue;\n          callback(g);\n        }\n    }\n\n    function forEachGlobalValue(callback) {\n      forEachGlobal(function(globalName) {\n        if (indexOf.call(ignoredGlobalProps, globalName) != -1)\n          return;\n        try {\n          var value = __global[globalName];\n        }\n        catch (e) {\n          ignoredGlobalProps.push(globalName);\n        }\n        callback(globalName, value);\n      });\n    }\n\n    loader.set('@@global-helpers', loader.newModule({\n      prepareGlobal: function(moduleName, exports, globals, encapsulate) {\n        // disable module detection\n        var curDefine = __global.define;\n        \n        __global.define = undefined;\n\n        // set globals\n        var oldGlobals;\n        if (globals) {\n          oldGlobals = {};\n          for (var g in globals) {\n            oldGlobals[g] = __global[g];\n            __global[g] = globals[g];\n          }\n        }\n\n        // store a complete copy of the global object in order to detect changes\n        if (!exports) {\n          globalSnapshot = {};\n\n          forEachGlobalValue(function(name, value) {\n            globalSnapshot[name] = value;\n          });\n        }\n\n        // return function to retrieve global\n        return function() {\n          var globalValue = exports ? getGlobalValue(exports) : {};\n\n          var singleGlobal;\n          var multipleExports = !!exports;\n\n          if (!exports || encapsulate)\n            forEachGlobalValue(function(name, value) {\n              if (globalSnapshot[name] === value)\n                return;\n              if (typeof value == 'undefined')\n                return;\n              \n              // allow global encapsulation where globals are removed\n              if (encapsulate)\n                __global[name] = undefined;\n\n              if (!exports) {\n                globalValue[name] = value;\n\n                if (typeof singleGlobal != 'undefined') {\n                  if (!multipleExports && singleGlobal !== value)\n                    multipleExports = true;\n                }\n                else {\n                  singleGlobal = value;\n                }\n              }\n            });\n\n          globalValue = multipleExports ? globalValue : singleGlobal;\n\n          // revert globals\n          if (oldGlobals) {\n            for (var g in oldGlobals)\n              __global[g] = oldGlobals[g];\n          }\n          __global.define = curDefine;\n\n          return globalValue;\n        };\n      }\n    }));\n  };\n});\n/*\n  SystemJS CommonJS Format\n*/\n(function() {\n  // CJS Module Format\n  // require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...\n  var cjsExportsRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])(exports\\s*(\\[['\"]|\\.)|module(\\.exports|\\['exports'\\]|\\[\"exports\"\\])\\s*(\\[['\"]|[=,\\.]))/;\n  // RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\n  var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*')\\s*\\)/g;\n  var commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n\n  var stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n  // used to support leading #!/usr/bin/env in scripts as supported in Node\n  var hashBangRegEx = /^\\#\\!.*/;\n\n  function getCJSDeps(source) {\n    cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\n\n    var deps = [];\n\n    var match;\n\n    // track string and comment locations for unminified source    \n    var stringLocations = [], commentLocations = [];\n\n    function inLocation(locations, match) {\n      for (var i = 0; i < locations.length; i++)\n        if (locations[i][0] < match.index && locations[i][1] > match.index)\n          return true;\n      return false;\n    }\n\n    if (source.length / source.split('\\n').length < 200) {\n      while (match = stringRegEx.exec(source))\n        stringLocations.push([match.index, match.index + match[0].length]);\n\n      // TODO: track template literals here before comments\n      \n      while (match = commentRegEx.exec(source)) {\n        // only track comments not starting in strings\n        if (!inLocation(stringLocations, match))\n          commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);\n      }\n    }\n\n    while (match = cjsRequireRegEx.exec(source)) {\n      // ensure we're not within a string or comment location\n      if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\n        var dep = match[1].substr(1, match[1].length - 2);\n        // skip cases like require('\" + file + \"')\n        if (dep.match(/\"|'/))\n          continue;\n        // trailing slash requires are removed as they don't map mains in SystemJS\n        if (dep[dep.length - 1] == '/')\n          dep = dep.substr(0, dep.length - 1);\n        deps.push(dep);\n      }\n    }\n\n    return deps;\n  }\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      if (!load.metadata.format) {\n        cjsExportsRegEx.lastIndex = 0;\n        cjsRequireRegEx.lastIndex = 0;\n        if (cjsRequireRegEx.exec(load.source) || cjsExportsRegEx.exec(load.source))\n          load.metadata.format = 'cjs';\n      }\n\n      if (load.metadata.format == 'cjs') {\n        var metaDeps = load.metadata.deps;\n        var deps = load.metadata.cjsRequireDetection === false ? [] : getCJSDeps(load.source);\n\n        for (var g in load.metadata.globals)\n          if (load.metadata.globals[g])\n            deps.push(load.metadata.globals[g]);\n\n        var entry = createEntry();\n\n        load.metadata.entry = entry;\n\n        entry.deps = deps;\n        entry.executingRequire = true;\n        entry.execute = function(_require, exports, module) {\n          function require(name) {\n            if (name[name.length - 1] == '/')\n              name = name.substr(0, name.length - 1);\n            return _require.apply(this, arguments);\n          }\n          require.resolve = function(name) {\n            return loader.get('@@cjs-helpers').requireResolve(name, module.id);\n          };\n          // support module.paths ish\n          module.paths = [];\n          module.require = _require;\n\n          // ensure meta deps execute first\n          if (!load.metadata.cjsDeferDepsExecute)\n            for (var i = 0; i < metaDeps.length; i++)\n              require(metaDeps[i]);\n\n          var pathVars = loader.get('@@cjs-helpers').getPathVars(module.id);\n          var __cjsWrapper = {\n            exports: exports,\n            args: [require, exports, module, pathVars.filename, pathVars.dirname, __global, __global]\n          };\n\n          var cjsWrapper = \"(function(require, exports, module, __filename, __dirname, global, GLOBAL\";\n\n          // add metadata.globals to the wrapper arguments\n          if (load.metadata.globals)\n            for (var g in load.metadata.globals) {\n              __cjsWrapper.args.push(require(load.metadata.globals[g]));\n              cjsWrapper += \", \" + g;\n            }\n\n          // disable AMD detection\n          var define = __global.define;\n          __global.define = undefined;\n          __global.__cjsWrapper = __cjsWrapper;\n\n          load.source = cjsWrapper + \") {\" + load.source.replace(hashBangRegEx, '') + \"\\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);\";\n\n          __exec.call(loader, load);\n\n          __global.__cjsWrapper = undefined;\n          __global.define = define;\n        };\n      }\n\n      return instantiate.call(loader, load);\n    };\n  });\n})();\nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(loader);\n\n    if (typeof window != 'undefined' && typeof document != 'undefined' && window.location)\n      var windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n\n    function stripOrigin(path) {\n      if (path.substr(0, 8) == 'file:///')\n        return path.substr(7 + !!isWindows);\n      \n      if (windowOrigin && path.substr(0, windowOrigin.length) == windowOrigin)\n        return path.substr(windowOrigin.length);\n\n      return path;\n    }\n\n    loader.set('@@cjs-helpers', loader.newModule({\n      requireResolve: function(request, parentId) {\n        return stripOrigin(loader.normalizeSync(request, parentId));\n      },\n      getPathVars: function(moduleId) {\n        // remove any plugin syntax\n        var pluginIndex = moduleId.lastIndexOf('!');\n        var filename;\n        if (pluginIndex != -1)\n          filename = moduleId.substr(0, pluginIndex);\n        else\n          filename = moduleId;\n\n        var dirname = filename.split('/');\n        dirname.pop();\n        dirname = dirname.join('/');\n\n        return {\n          filename: stripOrigin(filename),\n          dirname: stripOrigin(dirname)\n        };\n      }\n    }))\n  };\n});/*\n * AMD Helper function module\n * Separated into its own file as this is the part needed for full AMD support in SFX builds\n * NB since implementations have now diverged this can be merged back with amd.js\n */\n\nhook('fetch', function(fetch) {\n  return function(load) {\n    // script load implies define global leak\n    if (load.metadata.scriptLoad && isBrowser)\n      __global.define = this.amdDefine;\n    return fetch.call(this, load);\n  };\n});\n \nhookConstructor(function(constructor) {\n  return function() {\n    var loader = this;\n    constructor.call(this);\n\n    var commentRegEx = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n    var cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\n    var cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\n    var fnBracketRegEx = /\\(([^\\)]*)\\)/;\n    var wsRegEx = /^\\s+|\\s+$/g;\n    \n    var requireRegExs = {};\n\n    function getCJSDeps(source, requireIndex) {\n\n      // remove comments\n      source = source.replace(commentRegEx, '');\n\n      // determine the require alias\n      var params = source.match(fnBracketRegEx);\n      var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n      // find or generate the regex for this requireAlias\n      var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n      requireRegEx.lastIndex = 0;\n\n      var deps = [];\n\n      var match;\n      while (match = requireRegEx.exec(source))\n        deps.push(match[2] || match[3]);\n\n      return deps;\n    }\n\n    /*\n      AMD-compatible require\n      To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n    */\n    function require(names, callback, errback, referer) {\n      // in amd, first arg can be a config object... we just ignore\n      if (typeof names == 'object' && !(names instanceof Array))\n        return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n      // amd require\n      if (typeof names == 'string' && typeof callback == 'function')\n        names = [names];\n      if (names instanceof Array) {\n        var dynamicRequires = [];\n        for (var i = 0; i < names.length; i++)\n          dynamicRequires.push(loader['import'](names[i], referer));\n        Promise.all(dynamicRequires).then(function(modules) {\n          if (callback)\n            callback.apply(null, modules);\n        }, errback);\n      }\n\n      // commonjs require\n      else if (typeof names == 'string') {\n        var defaultJSExtension = loader.defaultJSExtensions && names.substr(names.length - 3, 3) != '.js';\n        var normalized = loader.decanonicalize(names, referer);\n        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) == '.js')\n          normalized = normalized.substr(0, normalized.length - 3);\n        var module = loader.get(normalized);\n        if (!module)\n          throw new Error('Module not already loaded loading \"' + names + '\" as ' + normalized + (referer ? ' from \"' + referer + '\".' : '.'));\n        return module.__useDefault ? module['default'] : module;\n      }\n\n      else\n        throw new TypeError('Invalid require');\n    }\n\n    function define(name, deps, factory) {\n      if (typeof name != 'string') {\n        factory = deps;\n        deps = name;\n        name = null;\n      }\n      if (!(deps instanceof Array)) {\n        factory = deps;\n        deps = ['require', 'exports', 'module'].splice(0, factory.length);\n      }\n\n      if (typeof factory != 'function')\n        factory = (function(factory) {\n          return function() { return factory; }\n        })(factory);\n\n      // in IE8, a trailing comma becomes a trailing undefined entry\n      if (deps[deps.length - 1] === undefined)\n        deps.pop();\n\n      // remove system dependencies\n      var requireIndex, exportsIndex, moduleIndex;\n      \n      if ((requireIndex = indexOf.call(deps, 'require')) != -1) {\n        \n        deps.splice(requireIndex, 1);\n\n        // only trace cjs requires for non-named\n        // named defines assume the trace has already been done\n        if (!name)\n          deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));\n      }\n\n      if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)\n        deps.splice(exportsIndex, 1);\n      \n      if ((moduleIndex = indexOf.call(deps, 'module')) != -1)\n        deps.splice(moduleIndex, 1);\n\n      function execute(req, exports, module) {\n        var depValues = [];\n        for (var i = 0; i < deps.length; i++)\n          depValues.push(req(deps[i]));\n\n        module.uri = module.id;\n\n        module.config = function() {};\n\n        // add back in system dependencies\n        if (moduleIndex != -1)\n          depValues.splice(moduleIndex, 0, module);\n        \n        if (exportsIndex != -1)\n          depValues.splice(exportsIndex, 0, exports);\n        \n        if (requireIndex != -1) {\n          function contextualRequire(names, callback, errback) {\n            if (typeof names == 'string' && typeof callback != 'function')\n              return req(names);\n            return require.call(loader, names, callback, errback, module.id);\n          }\n          contextualRequire.toUrl = function(name) {\n            // normalize without defaultJSExtensions\n            var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';\n            var url = loader.decanonicalize(name, module.id);\n            if (defaultJSExtension && url.substr(url.length - 3, 3) == '.js')\n              url = url.substr(0, url.length - 3);\n            return url;\n          };\n          depValues.splice(requireIndex, 0, contextualRequire);\n        }\n\n        // set global require to AMD require\n        var curRequire = __global.require;\n        __global.require = require;\n\n        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);\n\n        __global.require = curRequire;\n\n        if (typeof output == 'undefined' && module)\n          output = module.exports;\n\n        if (typeof output != 'undefined')\n          return output;\n      }\n\n      var entry = createEntry();\n      entry.name = name && (loader.decanonicalize || loader.normalize).call(loader, name);\n      entry.deps = deps;\n      entry.execute = execute;\n\n      loader.pushRegister_({\n        amd: true,\n        entry: entry\n      });\n    }\n    define.amd = {};\n\n    // reduction function to attach defines to a load record\n    hook('reduceRegister_', function(reduceRegister) {\n      return function(load, register) {\n        // only handle AMD registers here\n        if (!register || !register.amd)\n          return reduceRegister.call(this, load, register);\n\n        var curMeta = load && load.metadata;\n        var entry = register.entry;\n\n        if (curMeta) {\n          if (!curMeta.format || curMeta.format == 'detect')\n            curMeta.format = 'amd';\n          else if (!entry.name && curMeta.format != 'amd')\n            throw new Error('AMD define called while executing ' + curMeta.format + ' module ' + load.name);\n        }\n\n        // anonymous define\n        if (!entry.name) {\n          if (!curMeta)\n            throw new TypeError('Unexpected anonymous AMD define.');\n\n          if (curMeta.entry && !curMeta.entry.name)\n            throw new Error('Multiple anonymous defines in module ' + load.name);\n          \n          curMeta.entry = entry;\n        }\n        // named define\n        else {\n          // if we don't have any other defines, \n          // then let this be an anonymous define\n          // this is just to support single modules of the form:\n          // define('jquery')\n          // still loading anonymously\n          // because it is done widely enough to be useful\n          // as soon as there is more than one define, this gets removed though\n          if (curMeta) {\n            if (!curMeta.entry && !curMeta.bundle)\n              curMeta.entry = entry;\n            else if (curMeta.entry && curMeta.entry.name && curMeta.entry.name != load.name)\n              curMeta.entry = undefined;\n\n            // note this is now a bundle\n            curMeta.bundle = true;\n          }\n\n          // define the module through the register registry\n          if (!(entry.name in this.defined))\n            this.defined[entry.name] = entry;\n        }\n      };\n    });\n\n    loader.amdDefine = define;\n    loader.amdRequire = require;\n  };\n});/*\n  SystemJS AMD Format\n*/\n(function() {\n  // AMD Module Format Detection RegEx\n  // define([.., .., ..], ...)\n  // define(varName); || define(function(require, exports) {}); || define({})\n  var amdRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])define\\s*\\(\\s*(\"[^\"]+\"\\s*,\\s*|'[^']+'\\s*,\\s*)?\\s*(\\[(\\s*((\"[^\"]+\"|'[^']+')\\s*,|\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*(\\s*(\"[^\"]+\"|'[^']+')\\s*,?)?(\\s*(\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*\\s*\\]|function\\s*|{|[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*\\))/;\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      \n      if (load.metadata.format == 'amd' || !load.metadata.format && load.source.match(amdRegEx)) {\n        load.metadata.format = 'amd';\n        \n        if (!loader.builder && loader.execute !== false) {\n          var curDefine = __global.define;\n          __global.define = this.amdDefine;\n\n          try {\n            __exec.call(loader, load);\n          }\n          finally {\n            __global.define = curDefine;\n          }\n\n          if (!load.metadata.entry && !load.metadata.bundle)\n            throw new TypeError('AMD module ' + load.name + ' did not define');\n        }\n        else {\n          load.metadata.execute = function() {\n            return load.metadata.builderExecute.apply(this, arguments);\n          };\n        }\n      }\n\n      return instantiate.call(loader, load);\n    };\n  });\n\n})();\n/*\n  SystemJS Loader Plugin Support\n\n  Supports plugin loader syntax with \"!\", or via metadata.loader\n\n  The plugin name is loaded as a module itself, and can override standard loader hooks\n  for the plugin resource. See the plugin section of the systemjs readme.\n*/\n\n(function() {\n  function getParentName(loader, parentName) {\n    // if parent is a plugin, normalize against the parent plugin argument only\n    if (parentName) {\n      var parentPluginIndex;\n      if (loader.pluginFirst) {\n        if ((parentPluginIndex = parentName.lastIndexOf('!')) != -1)\n          return parentName.substr(parentPluginIndex + 1);\n      }\n      else {\n        if ((parentPluginIndex = parentName.indexOf('!')) != -1)\n          return parentName.substr(0, parentPluginIndex);\n      }\n\n      return parentName;\n    }\n  }\n\n  function parsePlugin(loader, name) {\n    var argumentName;\n    var pluginName;\n\n    var pluginIndex = name.lastIndexOf('!');\n\n    if (pluginIndex == -1)\n      return;\n\n    if (loader.pluginFirst) {\n      argumentName = name.substr(pluginIndex + 1);\n      pluginName = name.substr(0, pluginIndex);\n    }\n    else {\n      argumentName = name.substr(0, pluginIndex);\n      pluginName = name.substr(pluginIndex + 1) || argumentName.substr(argumentName.lastIndexOf('.') + 1);\n    }\n\n    return {\n      argument: argumentName,\n      plugin: pluginName\n    };\n  }\n\n  // put name back together after parts have been normalized\n  function combinePluginParts(loader, argumentName, pluginName, defaultExtension) {\n    if (defaultExtension && argumentName.substr(argumentName.length - 3, 3) == '.js')\n      argumentName = argumentName.substr(0, argumentName.length - 3);\n\n    if (loader.pluginFirst) {\n      return pluginName + '!' + argumentName;\n    }\n    else {\n      return argumentName + '!' + pluginName;\n    }\n  }\n\n  // note if normalize will add a default js extension\n  // if so, remove for backwards compat\n  // this is strange and sucks, but will be deprecated\n  function checkDefaultExtension(loader, arg) {\n    return loader.defaultJSExtensions && arg.substr(arg.length - 3, 3) != '.js';\n  }\n\n  function createNormalizeSync(normalizeSync) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n\n      var parsed = parsePlugin(loader, name);\n      parentName = getParentName(this, parentName);\n\n      if (!parsed)\n        return normalizeSync.call(this, name, parentName, isPlugin);\n\n      // if this is a plugin, normalize the plugin name and the argument\n      var argumentName = loader.normalizeSync(parsed.argument, parentName, true);\n      var pluginName = loader.normalizeSync(parsed.plugin, parentName, true);\n      return combinePluginParts(loader, argumentName, pluginName, checkDefaultExtension(loader, parsed.argument));\n    };\n  }\n\n  hook('decanonicalize', createNormalizeSync);\n  hook('normalizeSync', createNormalizeSync);\n\n  hook('normalize', function(normalize) {\n    return function(name, parentName, isPlugin) {\n      var loader = this;\n\n      parentName = getParentName(this, parentName);\n\n      var parsed = parsePlugin(loader, name);\n\n      if (!parsed)\n        return normalize.call(loader, name, parentName, isPlugin);\n\n      return Promise.all([\n        loader.normalize(parsed.argument, parentName, true),\n        loader.normalize(parsed.plugin, parentName, false)\n      ])\n      .then(function(normalized) {\n        return combinePluginParts(loader, normalized[0], normalized[1], checkDefaultExtension(loader, parsed.argument));\n      });\n    }\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n\n      var name = load.name;\n\n      // plugin syntax\n      var pluginSyntaxIndex;\n      if (loader.pluginFirst) {\n        if ((pluginSyntaxIndex = name.indexOf('!')) != -1) {\n          load.metadata.loader = name.substr(0, pluginSyntaxIndex);\n          load.name = name.substr(pluginSyntaxIndex + 1);\n        }\n      }\n      else {\n        if ((pluginSyntaxIndex = name.lastIndexOf('!')) != -1) {\n          load.metadata.loader = name.substr(pluginSyntaxIndex + 1);\n          load.name = name.substr(0, pluginSyntaxIndex);\n        }\n      }\n\n      return locate.call(loader, load)\n      .then(function(address) {\n        if (pluginSyntaxIndex != -1 || !load.metadata.loader)\n          return address;\n\n        // normalize plugin relative to parent in locate here when\n        // using plugin via loader metadata\n        return (loader.pluginLoader || loader).normalize(load.metadata.loader, load.name)\n        .then(function(loaderNormalized) {\n          load.metadata.loader = loaderNormalized;\n          return address;\n        });\n      })\n      .then(function(address) {\n        var plugin = load.metadata.loader;\n\n        if (!plugin)\n          return address;\n\n        // don't allow a plugin to load itself\n        if (load.name == plugin)\n          throw new Error('Plugin ' + plugin + ' cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.');\n\n        // only fetch the plugin itself if this name isn't defined\n        if (loader.defined && loader.defined[name])\n          return address;\n\n        var pluginLoader = loader.pluginLoader || loader;\n\n        // load the plugin module and run standard locate\n        return pluginLoader['import'](plugin)\n        .then(function(loaderModule) {\n          // store the plugin module itself on the metadata\n          load.metadata.loaderModule = loaderModule;\n\n          load.address = address;\n          if (loaderModule.locate)\n            return loaderModule.locate.call(loader, load);\n\n          return address;\n        });\n      });\n    };\n  });\n\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var loader = this;\n      if (load.metadata.loaderModule && load.metadata.loaderModule.fetch && load.metadata.format != 'defined') {\n        load.metadata.scriptLoad = false;\n        return load.metadata.loaderModule.fetch.call(loader, load, function(load) {\n          return fetch.call(loader, load);\n        });\n      }\n      else {\n        return fetch.call(loader, load);\n      }\n    };\n  });\n\n  hook('translate', function(translate) {\n    return function(load) {\n      var loader = this;\n      var args = arguments;\n      if (load.metadata.loaderModule && load.metadata.loaderModule.translate && load.metadata.format != 'defined') {\n        return Promise.resolve(load.metadata.loaderModule.translate.apply(loader, args)).then(function(result) {\n          var sourceMap = load.metadata.sourceMap;\n\n          // sanitize sourceMap if an object not a JSON string\n          if (sourceMap) {\n            if (typeof sourceMap != 'object')\n              throw new Error('load.metadata.sourceMap must be set to an object.');\n\n            var originalName = load.address.split('!')[0];\n\n            // force set the filename of the original file\n            if (!sourceMap.file || sourceMap.file == load.address)\n              sourceMap.file = originalName + '!transpiled';\n\n            // force set the sources list if only one source\n            if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] == load.address))\n              sourceMap.sources = [originalName];\n          }\n\n          // if running on file:/// URLs, sourcesContent is necessary\n          // load.metadata.sourceMap.sourcesContent = [load.source];\n\n          if (typeof result == 'string')\n            load.source = result;\n\n          return translate.apply(loader, args);\n        });\n      }\n      else {\n        return translate.apply(loader, args);\n      }\n    };\n  });\n\n  hook('instantiate', function(instantiate) {\n    return function(load) {\n      var loader = this;\n      var calledInstantiate = false;\n\n      if (load.metadata.loaderModule && load.metadata.loaderModule.instantiate && !loader.builder && load.metadata.format != 'defined')\n        return Promise.resolve(load.metadata.loaderModule.instantiate.call(loader, load, function(load) {\n          if (calledInstantiate)\n            throw new Error('Instantiate must only be called once.');\n          calledInstantiate = true;\n          return instantiate.call(loader, load);\n        })).then(function(result) {\n          if (calledInstantiate)\n            return result;\n\n          if (result !== undefined) {\n            load.metadata.entry = createEntry();\n            load.metadata.entry.execute = function() {\n              return result;\n            }\n            load.metadata.entry.deps = load.metadata.deps;\n            load.metadata.format = 'defined';\n          }\n          return instantiate.call(loader, load);\n        });\n      else\n        return instantiate.call(loader, load);\n    };\n  });\n\n})();\n/*\n * Conditions Extension\n *\n *   Allows a condition module to alter the resolution of an import via syntax:\n *\n *     import $ from 'jquery/#{browser}';\n *\n *   Will first load the module 'browser' via `SystemJS.import('browser')` and \n *   take the default export of that module.\n *   If the default export is not a string, an error is thrown.\n * \n *   We then substitute the string into the require to get the conditional resolution\n *   enabling environment-specific variations like:\n * \n *     import $ from 'jquery/ie'\n *     import $ from 'jquery/firefox'\n *     import $ from 'jquery/chrome'\n *     import $ from 'jquery/safari'\n *\n *   It can be useful for a condition module to define multiple conditions.\n *   This can be done via the `|` modifier to specify an export member expression:\n *\n *     import 'jquery/#{./browser.js|grade.version}'\n *\n *   Where the `grade` export `version` member in the `browser.js` module  is substituted.\n *\n *\n * Boolean Conditionals\n *\n *   For polyfill modules, that are used as imports but have no module value,\n *   a binary conditional allows a module not to be loaded at all if not needed:\n *\n *     import 'es5-shim#?./conditions.js|needs-es5shim'\n *\n *   These conditions can also be negated via:\n *     \n *     import 'es5-shim#?./conditions.js|~es6'\n *\n */\n\n  var sysConditions = ['browser', 'node', 'dev', 'build', 'production', 'default'];\n\n  function parseCondition(condition) {\n    var conditionExport, conditionModule, negation;\n\n    var negation = condition[0] == '~';\n    var conditionExportIndex = condition.lastIndexOf('|');\n    if (conditionExportIndex != -1) {\n      conditionExport = condition.substr(conditionExportIndex + 1);\n      conditionModule = condition.substr(negation, conditionExportIndex - negation);\n      \n      if (negation)\n        warn.call(this, 'Condition negation form \"' + condition + '\" is deprecated for \"' + conditionModule + '|~' + conditionExport + '\"');\n\n      if (conditionExport[0] == '~') {\n        negation = true;\n        conditionExport = conditionExport.substr(1);\n      }\n    }\n    else {\n      conditionExport = 'default';\n      conditionModule = condition.substr(negation);\n      if (sysConditions.indexOf(conditionModule) != -1) {\n        conditionExport = conditionModule;\n        conditionModule = null;\n      }\n    }\n\n    return {\n      module: conditionModule || '@system-env',\n      prop: conditionExport,\n      negate: negation\n    };\n  }\n\n  function serializeCondition(conditionObj) {\n    return conditionObj.module + '|' + (conditionObj.negate ? '~' : '') + conditionObj.prop;\n  }\n\n  function resolveCondition(conditionObj, parentName, bool) {\n    var self = this;\n    return this.normalize(conditionObj.module, parentName)\n    .then(function(normalizedCondition) {\n      return self.load(normalizedCondition)\n      .then(function(q) {\n        var m = readMemberExpression(conditionObj.prop, self.get(normalizedCondition));\n\n        if (bool && typeof m != 'boolean')\n          throw new TypeError('Condition ' + serializeCondition(conditionObj) + ' did not resolve to a boolean.');\n\n        return conditionObj.negate ? !m : m;\n      });\n    });\n  }\n\n  var interpolationRegEx = /#\\{[^\\}]+\\}/;\n  function interpolateConditional(name, parentName) {\n    // first we normalize the conditional\n    var conditionalMatch = name.match(interpolationRegEx);\n\n    if (!conditionalMatch)\n      return Promise.resolve(name);\n\n    var conditionObj = parseCondition.call(this, conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));\n\n    // in builds, return normalized conditional\n    if (this.builder)\n      return this['normalize'](conditionObj.module, parentName)\n      .then(function(conditionModule) {\n        conditionObj.module = conditionModule;\n        return name.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');\n      });\n\n    return resolveCondition.call(this, conditionObj, parentName, false)\n    .then(function(conditionValue) {\n      if (typeof conditionValue !== 'string')\n        throw new TypeError('The condition value for ' + name + ' doesn\\'t resolve to a string.');\n\n      if (conditionValue.indexOf('/') != -1)\n        throw new TypeError('Unabled to interpolate conditional ' + name + (parentName ? ' in ' + parentName : '') + '\\n\\tThe condition value ' + conditionValue + ' cannot contain a \"/\" separator.');\n\n      return name.replace(interpolationRegEx, conditionValue);\n    });\n  }\n\n  function booleanConditional(name, parentName) {\n    // first we normalize the conditional\n    var booleanIndex = name.lastIndexOf('#?');\n\n    if (booleanIndex == -1)\n      return Promise.resolve(name);\n\n    var conditionObj = parseCondition.call(this, name.substr(booleanIndex + 2));\n\n    // in builds, return normalized conditional\n    if (this.builder)\n      return this['normalize'](conditionObj.module, parentName)\n      .then(function(conditionModule) {\n        conditionObj.module = conditionModule;\n        return name.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);\n      });\n\n    return resolveCondition.call(this, conditionObj, parentName, true)\n    .then(function(conditionValue) {\n      return conditionValue ? name.substr(0, booleanIndex) : '@empty';\n    });\n  }\n\n  // normalizeSync does not parse conditionals at all although it could\n  hook('normalize', function(normalize) {\n    return function(name, parentName, skipExt) {\n      var loader = this;\n      return booleanConditional.call(loader, name, parentName)\n      .then(function(name) {\n        return normalize.call(loader, name, parentName, skipExt);\n      })\n      .then(function(normalized) {\n        return interpolateConditional.call(loader, normalized, parentName);\n      });\n    };\n  });\n/*\n * Alias Extension\n *\n * Allows a module to be a plain copy of another module by module name\n *\n * SystemJS.meta['mybootstrapalias'] = { alias: 'bootstrap' };\n *\n */\n(function() {\n  // aliases\n  hook('fetch', function(fetch) {\n    return function(load) {\n      var alias = load.metadata.alias;\n      var aliasDeps = load.metadata.deps || [];\n      if (alias) {\n        load.metadata.format = 'defined';\n        var entry = createEntry();\n        this.defined[load.name] = entry;\n        entry.declarative = true;\n        entry.deps = aliasDeps.concat([alias]);\n        entry.declare = function(_export) {\n          return {\n            setters: [function(module) {\n              for (var p in module)\n                _export(p, module[p]);\n              if (module.__useDefault)\n                entry.module.exports.__useDefault = true;\n            }],\n            execute: function() {}\n          };\n        };\n        return '';\n      }\n\n      return fetch.call(this, load);\n    };\n  });\n})();/*\n * Meta Extension\n *\n * Sets default metadata on a load record (load.metadata) from\n * loader.metadata via SystemJS.meta function.\n *\n *\n * Also provides an inline meta syntax for module meta in source.\n *\n * Eg:\n *\n * loader.meta({\n *   'my/module': { deps: ['jquery'] }\n *   'my/*': { format: 'amd' }\n * });\n *\n * Which in turn populates loader.metadata.\n *\n * load.metadata.deps and load.metadata.format will then be set\n * for 'my/module'\n *\n * The same meta could be set with a my/module.js file containing:\n *\n * my/module.js\n *   \"format amd\";\n *   \"deps[] jquery\";\n *   \"globals.some value\"\n *   console.log('this is my/module');\n *\n * Configuration meta always takes preference to inline meta.\n *\n * Multiple matches in wildcards are supported and ammend the meta.\n *\n *\n * The benefits of the function form is that paths are URL-normalized\n * supporting say\n *\n * loader.meta({ './app': { format: 'cjs' } });\n *\n * Instead of needing to set against the absolute URL (https://site.com/app.js)\n *\n */\n\n(function() {\n\n  hookConstructor(function(constructor) {\n    return function() {\n      this.meta = {};\n      constructor.call(this);\n    };\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var meta = this.meta;\n      var name = load.name;\n\n      // NB for perf, maybe introduce a fast-path wildcard lookup cache here\n      // which is checked first\n\n      // apply wildcard metas\n      var bestDepth = 0;\n      var wildcardIndex;\n      for (var module in meta) {\n        wildcardIndex = module.indexOf('*');\n        if (wildcardIndex === -1)\n          continue;\n        if (module.substr(0, wildcardIndex) === name.substr(0, wildcardIndex)\n            && module.substr(wildcardIndex + 1) === name.substr(name.length - module.length + wildcardIndex + 1)) {\n          var depth = module.split('/').length;\n          if (depth > bestDepth)\n            bestDepth = depth;\n          extendMeta(load.metadata, meta[module], bestDepth != depth);\n        }\n      }\n\n      // apply exact meta\n      if (meta[name])\n        extendMeta(load.metadata, meta[name]);\n\n      return locate.call(this, load);\n    };\n  });\n\n  // detect any meta header syntax\n  // only set if not already set\n  var metaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)+/;\n  var metaPartRegEx = /\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\/\\/[^\\n]*|\"[^\"]+\"\\s*;?|'[^']+'\\s*;?/g;\n\n  function setMetaProperty(target, p, value) {\n    var pParts = p.split('.');\n    var curPart;\n    while (pParts.length > 1) {\n      curPart = pParts.shift();\n      target = target[curPart] = target[curPart] || {};\n    }\n    curPart = pParts.shift();\n    if (!(curPart in target))\n      target[curPart] = value;\n  }\n\n  hook('translate', function(translate) {\n    return function(load) {\n      // shortpath for bundled\n      if (load.metadata.format == 'defined') {\n        load.metadata.deps = load.metadata.deps || [];\n        return Promise.resolve(load.source);\n      }\n\n      // NB meta will be post-translate pending transpiler conversion to plugins\n      var meta = load.source.match(metaRegEx);\n      if (meta) {\n        var metaParts = meta[0].match(metaPartRegEx);\n\n        for (var i = 0; i < metaParts.length; i++) {\n          var curPart = metaParts[i];\n          var len = curPart.length;\n\n          var firstChar = curPart.substr(0, 1);\n          if (curPart.substr(len - 1, 1) == ';')\n            len--;\n\n          if (firstChar != '\"' && firstChar != \"'\")\n            continue;\n\n          var metaString = curPart.substr(1, curPart.length - 3);\n          var metaName = metaString.substr(0, metaString.indexOf(' '));\n\n          if (metaName) {\n            var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);\n\n            if (metaName.substr(metaName.length - 2, 2) == '[]') {\n              metaName = metaName.substr(0, metaName.length - 2);\n              load.metadata[metaName] = load.metadata[metaName] || [];\n              load.metadata[metaName].push(metaValue);\n            }\n            else if (load.metadata[metaName] instanceof Array) {\n              // temporary backwards compat for previous \"deps\" syntax\n              warn.call(this, 'Module ' + load.name + ' contains deprecated \"deps ' + metaValue + '\" meta syntax.\\nThis should be updated to \"deps[] ' + metaValue + '\" for pushing to array meta.');\n              load.metadata[metaName].push(metaValue);\n            }\n            else {\n              setMetaProperty(load.metadata, metaName, metaValue);\n            }\n          }\n          else {\n            load.metadata[metaString] = true;\n          }\n        }\n      }\n\n      return translate.apply(this, arguments);\n    };\n  });\n})();\n/*\n  System bundles\n\n  Allows a bundle module to be specified which will be dynamically \n  loaded before trying to load a given module.\n\n  For example:\n  SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']\n\n  Will result in a load to \"mybundle\" whenever a load to \"jquery\"\n  or \"bootstrap/js/bootstrap\" is made.\n\n  In this way, the bundle becomes the request that provides the module\n*/\n\n(function() {\n  // bundles support (just like RequireJS)\n  // bundle name is module name of bundle itself\n  // bundle is array of modules defined by the bundle\n  // when a module in the bundle is requested, the bundle is loaded instead\n  // of the form SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.bundles = {};\n      this._loader.loadedBundles = {};\n    };\n  });\n\n  // assign bundle metadata for bundle loads\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      var matched = false;\n\n      if (!(load.name in loader.defined))\n        for (var b in loader.bundles) {\n          for (var i = 0; i < loader.bundles[b].length; i++) {\n            var curModule = loader.bundles[b][i];\n\n            if (curModule == load.name) {\n              matched = true;\n              break;\n            }\n\n            // wildcard in bundles does not include / boundaries\n            if (curModule.indexOf('*') != -1) {\n              var parts = curModule.split('*');\n              if (parts.length != 2) {\n                loader.bundles[b].splice(i--, 1);\n                continue;\n              }\n              \n              if (load.name.substring(0, parts[0].length) == parts[0] &&\n                  load.name.substr(load.name.length - parts[1].length, parts[1].length) == parts[1] &&\n                  load.name.substr(parts[0].length, load.name.length - parts[1].length - parts[0].length).indexOf('/') == -1) {\n                matched = true;\n                break;\n              }\n            }\n          }\n\n          if (matched)\n            return loader['import'](b)\n            .then(function() {\n              return locate.call(loader, load);\n            });\n        }\n\n      return locate.call(loader, load);\n    };\n  });\n})();\n/*\n * Dependency Tree Cache\n * \n * Allows a build to pre-populate a dependency trace tree on the loader of \n * the expected dependency tree, to be loaded upfront when requesting the\n * module, avoinding the n round trips latency of module loading, where \n * n is the dependency tree depth.\n *\n * eg:\n * SystemJS.depCache = {\n *  'app': ['normalized', 'deps'],\n *  'normalized': ['another'],\n *  'deps': ['tree']\n * };\n * \n * SystemJS.import('app') \n * // simultaneously starts loading all of:\n * // 'normalized', 'deps', 'another', 'tree'\n * // before \"app\" source is even loaded\n *\n */\n\n(function() {\n  hookConstructor(function(constructor) {\n    return function() {\n      constructor.call(this);\n      this.depCache = {};\n    }\n  });\n\n  hook('locate', function(locate) {\n    return function(load) {\n      var loader = this;\n      // load direct deps, in turn will pick up their trace trees\n      var deps = loader.depCache[load.name];\n      if (deps)\n        for (var i = 0; i < deps.length; i++)\n          loader['import'](deps[i], load.name);\n\n      return locate.call(loader, load);\n    };\n  });\n})();\n  \nSystem = new SystemJSLoader();\n\n__global.SystemJS = System;\nSystem.version = '0.19.41 Standard';\n  if (typeof module == 'object' && module.exports && typeof exports == 'object')\n    module.exports = System;\n\n  __global.System = System;\n\n})(typeof self != 'undefined' ? self : global);}\n\n// auto-load Promise polyfill if needed in the browser\nvar doPolyfill = typeof Promise === 'undefined';\n\n// document.write\nif (typeof document !== 'undefined') {\n  var scripts = document.getElementsByTagName('script');\n  $__curScript = scripts[scripts.length - 1];\n  if (document.currentScript && ($__curScript.defer || $__curScript.async))\n    $__curScript = document.currentScript;\n  if (!$__curScript.src)\n    $__curScript = undefined;\n  if (doPolyfill) {\n    var curPath = $__curScript.src;\n    var basePath = curPath.substr(0, curPath.lastIndexOf('/') + 1);\n    window.systemJSBootstrap = bootstrap;\n    document.write(\n      '<' + 'script type=\"text/javascript\" src=\"' + basePath + 'system-polyfills.js\">' + '<' + '/script>'\n    );\n  }\n  else {\n    bootstrap();\n  }\n}\n// importScripts\nelse if (typeof importScripts !== 'undefined') {\n  var basePath = '';\n  try {\n    throw new Error('_');\n  } catch (e) {\n    e.stack.replace(/(?:at|@).*(http.+):[\\d]+:[\\d]+/, function(m, url) {\n      $__curScript = { src: url };\n      basePath = url.replace(/\\/[^\\/]*$/, '/');\n    });\n  }\n  if (doPolyfill)\n    importScripts(basePath + 'system-polyfills.js');\n  bootstrap();\n}\nelse {\n  $__curScript = typeof __filename != 'undefined' ? { src: __filename } : null;\n  bootstrap();\n}\n\n\n})();\n"]}