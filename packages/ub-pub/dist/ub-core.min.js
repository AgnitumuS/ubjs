webpackJsonp([1],[function(e,t,n){"use strict";var r=n(6),o=n(1),i=n(12),s=n(18),a=n(22),u=n(10),c=n(8),l=n(7);e.exports={i18n:r.i18n,i18nExtend:r.i18nExtend,format:o.format,apply:o.apply,ns:o.ns,booleanParse:o.booleanParse,iso8601Parse:o.iso8601Parse,iso8601ParseAsDate:o.iso8601ParseAsDate,base64FromAny:o.base64FromAny,base64toArrayBuffer:o.base64toArrayBuffer,UBError:o.UBError,UBAbortError:o.UBAbortError,xhr:i.xhr,get:i.get,post:i.post,connect:s.connect,ClientRepository:u,log:o.log,logError:o.logError,logWarn:o.logWarn,logDebug:o.logDebug,userAgent:o.userAgent,isChrome:o.isChrome,isWebKit:o.isWebKit,isGecko:o.isGecko,isOpera:o.isOpera,isMac:o.isMac,isSecureBrowser:o.isSecureBrowser,inject:a.inject,addResourceVersion:a.addResourceVersion,SHA256:c,MD5:l}},function(e,t,n){"use strict";function r(e,t,n){this.name="UBError",this.detail=t,this.code=n,this.message=e||"UBError",Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=Error().stack}function o(e,t){this.name="UBAbortError",this.detail=t,this.code="UBAbortError",this.message=e||"UBAbortError",Error.captureStackTrace?Error.captureStackTrace(this,o):this.stack=Error().stack}var i=n(2);e.exports.apply=function(e,t){return Array.prototype.forEach.call(arguments,function(t){t&&t!==e&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e};var s=/\{(\d+)}/g;e.exports.format=function(e,t){var n=i.toArray(arguments).slice(1);return e.replace(s,function(e,t){return n[t]})},e.exports.ns=function(e){var t=window,n=void 0,r=void 0,o=void 0,i=void 0;for(n=e.split("."),o=0,i=n.length;o<i;o++)r=n[o],t[r]||(t[r]={}),t=t[r];return t},e.exports.iso8601Parse=function(e){return e?new Date(e):null},e.exports.iso8601ParseAsDate=function(e){var t=e?new Date(e):null;return t&&t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3),t},e.exports.booleanParse=function(e){return"boolean"==typeof e?e:void 0===e||null===e||""===e?null:1===e},e.exports.base64FromAny=function(e){return new Promise(function(t,n){var r=new FileReader,o=e instanceof Blob?e:new Blob([e]);r.addEventListener("loadend",function(){t(r.result.split(",",2)[1])}),r.addEventListener("error",function(e){n(e)}),r.readAsDataURL(o)})};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=[];!function(){for(var e=0,t=a.length-1;e<t;e++)u.push(a[e])}();var c=new Uint8Array(256);!function(){for(var e=0,t=a.length;e<t;e++)c[a[e].charCodeAt(0)]=e}(),e.exports.base64toArrayBuffer=function(e){var t=.75*e.length,n=e.length,r=0,o=void 0,i=void 0,s=void 0,a=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var u=new ArrayBuffer(t),l=new Uint8Array(u),h=0;h<n;h+=4)o=c[e.charCodeAt(h)],i=c[e.charCodeAt(h+1)],s=c[e.charCodeAt(h+2)],a=c[e.charCodeAt(h+3)],l[r++]=o<<2|i>>4,l[r++]=(15&i)<<4|s>>2,l[r++]=(3&s)<<6|63&a;return u},r.prototype=Error(),r.prototype.constructor=r,e.exports.UBError=r,o.prototype=Error(),o.prototype.constructor=o,e.exports.UBAbortError=o,e.exports.log=function(e){console&&console.log.apply(console,arguments)},e.exports.logError=function(e){console&&console.error.apply(console,arguments)},e.exports.logWarn=function(e){console&&console.warn.apply(console,arguments)},e.exports.logDebug=console.info.bind(console);var l=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"";e.exports.userAgent=navigator.userAgent.toLowerCase(),e.exports.isChrome=/\bchrome\b/.test(l),e.exports.isWebKit=/webkit/.test(l),e.exports.isGecko=!/webkit/.test(l)&&/gecko/.test(l),e.exports.isOpera=/opr|opera/.test(l),e.exports.isMac=/macintosh|mac os x/.test(l),e.exports.isSecureBrowser=/\belectron\b/.test(l)},,,function(e,t,n){!function(n,r){e.exports=t=r()}(this,function(){var e=e||function(e,t){var n={},r=n.lib={},o=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else if(n.length>65535)for(var i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var o=(n<<16)+t&r;return o/=4294967296,o+=.5,o*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var a=o(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new i.init(r,t)}}),s=n.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,s=this.blockSize,a=4*s,u=o/a;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*s,l=e.min(4*c,o);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(r,h);var f=r.splice(0,c);n.sigBytes-=l}return new i.init(f,l)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(r.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),n.algo={});return n}(Math);return e})},function(e,t){"use strict";function n(){n.init.call(this)}function r(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function o(e,t,n){if(t)e.call(n);else for(var r=e.length,o=h(e,r),i=0;i<r;++i)o[i].call(n)}function i(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=h(e,o),s=0;s<o;++s)i[s].call(n,r)}function s(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=h(e,i),a=0;a<i;++a)s[a].call(n,r,o)}function a(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=h(e,s),u=0;u<s;++u)a[u].call(n,r,o,i)}function u(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=h(e,o),s=0;s<o;++s)i[s].apply(n,r)}function c(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function l(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}function h(e,t){for(var n=Array(t);t--;)n[t]=e[t];return n}n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.init=function(){this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events={},this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(e){var t,n,r,c,l,h,f="error"===e;if(h=this._events)f=f&&null==h.error;else if(!f)return!1;if(f){if(t=arguments[1],t instanceof Error)throw t;var p=Error('Uncaught, unspecified "error" event. ('+t+")");throw p.context=t,p}if(n=h[e],!n)return!1;var d="function"==typeof n;switch(r=arguments.length){case 1:o(n,d,this);break;case 2:i(n,d,this,arguments[1]);break;case 3:s(n,d,this,arguments[1],arguments[2]);break;case 4:a(n,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(c=Array(r-1),l=1;l<r;l++)c[l-1]=arguments[l];u(n,d,this,c)}return!0},n.prototype.addListener=function(e,t){var n,o,i;if("function"!=typeof t)throw new TypeError("listener must be a function");return o=this._events,o?(o.newListener&&(this.emit("newListener",e,t.listener?t.listener:t),o=this._events),i=o[e]):(o=this._events={},this._eventsCount=0),i?("function"==typeof i?i=o[e]=[i,t]:i.push(t),i.warned||(n=r(this),n&&n>0&&i.length>n&&(i.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d %s listeners added. Use emitter.setMaxListeners() to increase limit.",i.length,e),console.trace()))):(i=o[e]=t,++this._eventsCount),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if("function"!=typeof t)throw new TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,i;if("function"!=typeof t)throw new TypeError("listener must be a function");if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener&&n.listener===t)0===--this._eventsCount?this._events={}:(delete r[e],r.removeListener&&this.emit("removeListener",e,t));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0===--this._eventsCount)return this._events={},this;delete r[e]}else l(n,o);r.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events={},this._eventsCount=0):n[e]&&(0===--this._eventsCount?this._events={}:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)r=o[i],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events={},this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},n.prototype.listeners=function(e){var t,n,r=this._events;return r?(t=r[e],n=t?"function"==typeof t?[t]:h(t,t.length):[]):n=[],n},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},n.prototype.listenerCount=c,e.exports=n},function(e,t,n){"use strict";function r(e){return s[e]||e}function o(e){i.merge(s,e)}var i=n(2),s={monkeyRequestsDetected:"Your request has been processed, but we found that it is repeated several times. Maybe you key fuse?"};e.exports={i18n:r,i18nExtend:o}},function(e,t,n){!function(r,o){e.exports=t=o(n(4))}(this,function(e){return function(t){function n(e,t,n,r,o,i,s){var a=e+(t&n|~t&r)+o+s;return(a<<i|a>>>32-i)+t}function r(e,t,n,r,o,i,s){var a=e+(t&r|n&~r)+o+s;return(a<<i|a>>>32-i)+t}function o(e,t,n,r,o,i,s){var a=e+(t^n^r)+o+s;return(a<<i|a>>>32-i)+t}function i(e,t,n,r,o,i,s){var a=e+(n^(t|~r))+o+s;return(a<<i|a>>>32-i)+t}var s=e,a=s.lib,u=a.WordArray,c=a.Hasher,l=s.algo,h=[];!function(){for(var e=0;e<64;e++)h[e]=4294967296*t.abs(t.sin(e+1))|0}();var f=l.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var a=t+s,u=e[a];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,l=e[t+0],f=e[t+1],p=e[t+2],d=e[t+3],y=e[t+4],m=e[t+5],v=e[t+6],g=e[t+7],b=e[t+8],E=e[t+9],w=e[t+10],x=e[t+11],S=e[t+12],T=e[t+13],A=e[t+14],C=e[t+15],D=c[0],N=c[1],k=c[2],I=c[3];D=n(D,N,k,I,l,7,h[0]),I=n(I,D,N,k,f,12,h[1]),k=n(k,I,D,N,p,17,h[2]),N=n(N,k,I,D,d,22,h[3]),D=n(D,N,k,I,y,7,h[4]),I=n(I,D,N,k,m,12,h[5]),k=n(k,I,D,N,v,17,h[6]),N=n(N,k,I,D,g,22,h[7]),D=n(D,N,k,I,b,7,h[8]),I=n(I,D,N,k,E,12,h[9]),k=n(k,I,D,N,w,17,h[10]),N=n(N,k,I,D,x,22,h[11]),D=n(D,N,k,I,S,7,h[12]),I=n(I,D,N,k,T,12,h[13]),k=n(k,I,D,N,A,17,h[14]),N=n(N,k,I,D,C,22,h[15]),D=r(D,N,k,I,f,5,h[16]),I=r(I,D,N,k,v,9,h[17]),k=r(k,I,D,N,x,14,h[18]),N=r(N,k,I,D,l,20,h[19]),D=r(D,N,k,I,m,5,h[20]),I=r(I,D,N,k,w,9,h[21]),k=r(k,I,D,N,C,14,h[22]),N=r(N,k,I,D,y,20,h[23]),D=r(D,N,k,I,E,5,h[24]),I=r(I,D,N,k,A,9,h[25]),k=r(k,I,D,N,d,14,h[26]),N=r(N,k,I,D,b,20,h[27]),D=r(D,N,k,I,T,5,h[28]),I=r(I,D,N,k,p,9,h[29]),k=r(k,I,D,N,g,14,h[30]),N=r(N,k,I,D,S,20,h[31]),D=o(D,N,k,I,m,4,h[32]),I=o(I,D,N,k,b,11,h[33]),k=o(k,I,D,N,x,16,h[34]),N=o(N,k,I,D,A,23,h[35]),D=o(D,N,k,I,f,4,h[36]),I=o(I,D,N,k,y,11,h[37]),k=o(k,I,D,N,g,16,h[38]),N=o(N,k,I,D,w,23,h[39]),D=o(D,N,k,I,T,4,h[40]),I=o(I,D,N,k,l,11,h[41]),k=o(k,I,D,N,d,16,h[42]),N=o(N,k,I,D,v,23,h[43]),D=o(D,N,k,I,E,4,h[44]),I=o(I,D,N,k,S,11,h[45]),k=o(k,I,D,N,C,16,h[46]),N=o(N,k,I,D,p,23,h[47]),D=i(D,N,k,I,l,6,h[48]),I=i(I,D,N,k,g,10,h[49]),k=i(k,I,D,N,A,15,h[50]),N=i(N,k,I,D,m,21,h[51]),D=i(D,N,k,I,S,6,h[52]),I=i(I,D,N,k,d,10,h[53]),k=i(k,I,D,N,w,15,h[54]),N=i(N,k,I,D,f,21,h[55]),D=i(D,N,k,I,b,6,h[56]),I=i(I,D,N,k,C,10,h[57]),k=i(k,I,D,N,v,15,h[58]),N=i(N,k,I,D,T,21,h[59]),D=i(D,N,k,I,y,6,h[60]),I=i(I,D,N,k,x,10,h[61]),k=i(k,I,D,N,p,15,h[62]),N=i(N,k,I,D,E,21,h[63]),c[0]=c[0]+D|0,c[1]=c[1]+N|0,c[2]=c[2]+k|0,c[3]=c[3]+I|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296),s=r;n[(o+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(o+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});s.MD5=c._createHelper(f),s.HmacMD5=c._createHmacHelper(f)}(Math),e.MD5})},function(e,t,n){!function(r,o){e.exports=t=o(n(4))}(this,function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.algo,a=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(a[o]=n(t.pow(r,.5))),u[o]=n(t.pow(r,1/3)),o++),r++}();var c=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5],h=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var d=c[p-15],y=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,m=c[p-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=y+c[p-7]+v+c[p-16]}var g=a&l^~a&h,b=r&o^r&i^o&i,E=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),x=f+w+g+u[p]+c[p],S=E+b;f=h,h=l,l=a,a=s+x|0,s=i,i=o,o=r,r=x+S|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(l),n.HmacSHA256=i._createHmacHelper(l)}(Math),e.SHA256})},function(e,t,n){"use strict";function r(e,t){function n(e){var n=e.expression||"";if("custom"===e.condition)throw Error('Condition "custom" is not supported for cached instances.');if(n=(n.replace(/(\[)|(])/gi,"")||"").trim(),r=t.indexOf(n),r===-1)throw Error("Filtering by field "+n+" is not allowed, because it is not pressing in fieldList");i=o.values(e.values)[0],a.push(s(r,e.condition,i))}var r=void 0,i=void 0,s=void 0,a=[],u=function(e){return e&&"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},c=e.whereList;return s=function(e,t,n){var r=void 0;switch(t){case"like":return r=RegExp(u(n),"i"),function(t){var n=t[e];return n&&r.test(n)};case"equal":return function(t){return t[e]===n};case"notEqual":return function(t){return t[e]!==n};case"more":return function(t){return t[e]>n};case"moreEqual":return function(t){return t[e]>=n};case"less":return function(t){return t[e]<n};case"lessEqual":return function(t){return t[e]<=n};case"isNull":return function(t){return null===t[e]};case"notIsNull":return function(t){return null!==t[e]};case"notLike":return r=RegExp(u(n),"i"),function(t){var n=t[e];return n&&!r.test(n)};case"startWith":return function(t){var r=t[e];return r&&0===r.indexOf(n)};case"notStartWith":return function(t){var r=t[e];return r&&0!==r.indexOf(n)};case"in":return function(t){var r=t[e];return r&&n.indexOf(r)>=0};case"notIn":return function(t){var r=t[e];return r&&n.indexOf(r)<0};default:throw Error("Unknown whereList condition")}},e.ID&&n({expression:"[ID]",condition:"equal",values:{ID:e.ID}}),o.forEach(c,n),a}var o=n(3);e.exports.doFilterAndSort=function(e,t){var n=void 0,r=this.doFiltration(e,t),o=r.length;return this.doSorting(r,e,t),t.options&&(n=t.options.start||0,r=t.options.limit?r.slice(n,n+t.options.limit):r.slice(n)),{resultData:{data:r,fields:e.fields},total:o}},e.exports.byID=function(e,t){return this.doFilterAndSort(e,{ID:t})},e.exports.doFiltration=function(e,t){var n=void 0,o=void 0,i=e.data,s=!!t.ID,a=r(t,e.fields),u=a.length;if(0===u)return i;for(var c=[],l=i.length,h=-1;++h<l;){for(o=!0,n=-1;++n<u&&o===!0;)o=a[n](i[h]);if(o&&(c.push(i[h]),s))return c}return c},e.exports.doSorting=function(e,t,n){var r=[];n.orderList&&!function(){o.each(n.orderList,function(e){var n=t.fields.indexOf(e.expression);if(n<0)throw Error("Ordering by "+e.expression+" attribute that don't present in fieldList not allowed");r.push({idx:n,modifier:"desc"===e.order?-1:1})});var i=r.length;if(i){var s=function(e,t){for(var n=0,o=-1;++o<i&&0===n;){var s=r[o].idx;e[s]!==t[s]&&(n=null===e[s]&&null!==t[s]?1:null===t[s]&&null!==e[s]?-1:null===t[s]&&null===e[s]?0:e[s]>t[s]?1:-1,n*=r[o].modifier)}return n};e.sort(s)}}()},e.exports.selectResultToArrayOfObjects=function(e,t){var n=e.resultData.data,r=e.resultData.fields,i=n.length,s=i?Array(i):[];t&&o.forEach(t,function(e,t){var n=r.indexOf(t);n>=0&&(r[n]=e)});for(var a=0;a<i;a++)s[a]=o.zipObject(r,n[a]);return s},e.exports.flatten=function(e,t){var n=[],r=t.fields,o=-1,i=-1,s=0,a=[],u=t.data.length,c=void 0,l=void 0,h=void 0;if(!e||!e.length)throw Error("fieldList not exist or empty");for(1===e.length&&"*"===e[0]&&(e=t.fields),e.forEach(function(e){if(c=r.indexOf(e),c===-1)throw Error("Invalid field list. Attribute "+e+" not found in local data store");n.push(c)}),h=e.length,a.length=u*(h+1);++i<h;)a[s]=e[s],s++;for(;++o<u;)for(i=-1,l=t.data[o];++i<h;)a[s++]=l[n[i]];return{fieldCount:h,rowCount:u,values:a}},e.exports.arrayOfObjectsToSelectResult=function(e,t){var n=[];return e.forEach(function(e){var r=[];t.forEach(function(t){r.push(e[t])}),n.push(r)}),n}},function(e,t,n){"use strict";function r(e,t){i.call(this,t),this.connection=e}var o=n(9),i=n(14);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.selectAsObject=function(e){return this.connection.select(this.ubql()).then(function(t){return o.selectResultToArrayOfObjects(t,e)})},r.prototype.selectAsArray=function(){return this.connection.select(this.ubql())},r.prototype.selectAsStore=r.prototype.selectAsObject,r.prototype.select=r.prototype.selectAsObject,r.prototype.selectSingle=function(e){return this.selectAsObject(e).then(function(e){return e[0]})},r.prototype.selectScalar=function(){return this.selectAsArray().then(function(e){return e.resultData.rowCount>0?e.resultData.data[0][0]:void 0})},r.prototype.selectById=function(e,t){return this.where("[ID]","=",e).selectSingle()},e.exports=r},function(e,t,n){"use strict";function r(e){var t=this,n=0;if(t.getMessageId=function(){return"m"+ ++n},++r.prototype.idCounter,t.id="UBPlugin"+r.prototype.idCounter,t.pendingMessages={},t.feature=e||"extension",t.pluginName=e,t.hostAppName=r.features[e].host,!t.hostAppName)throw Error("unknown feature "+e+" for UBNativeMessage");if(t.featureVersion="",t.callTimeOut=3e4,o.isSecureBrowser)t.eventElm={},s.call(t.eventElm),_.assign(t.eventElm,s.prototype),t.eventElm.addEventListener=t.eventElm.addListener;else if(t.eventElm=document.getElementById("ubExtensionPageMessageObj"),!(t.eventElm||window.parent&&window.parent!==window))throw Error('Message exchange element with id="ubExtensionPageMessageObj" not found');t.onContentMessage=function(e){var n,r,i,s,a,u,c;if(n=e.detail,n&&n.hasOwnProperty("msgType")&&n.hasOwnProperty("messageID")&&n.hasOwnProperty("clientID")||console.error("Empty or invalid content message"),n.clientID===t.id)if(i=n.messageID,s=n.msgType,c=n.data,r=t.pendingMessages[i],r&&clearTimeout(r.timerID),"disconnected"===s)r&&(delete t.pendingMessages[i],r.deffer.resolve(c)),t.doOnDisconnect(c);else if("notify"===s)!r&&t.onMessage?t.onMessage.call(t,c):(r.timerID=setTimeout(function(){t.onMsgTimeOut(i)},r.timeoutValue),r.deffer.notify(c));else if(r)if("resolve"===s)if(n.hasOwnProperty("part")&&n.hasOwnProperty("totalParts")){if(a=n.totalParts,u=n.part,r.partials){if(a!==r.partials.length||u>=a)throw r.deffer.reject("Invalid part count"),delete t.pendingMessages[i],Error("Invalid part count")}else{if(a>100)throw r.deffer.reject(new o.UBError("unknownError","UBNativeMessage. Result exceed 100Mb limit")),delete t.pendingMessages[i],Error(new o.UBError("unknownError","UBNativeMessage. Result exceed 100Mb limit"));r.partials=Array(a)}r.partials[u]=c,_.indexOf(r.partials,void 0)===-1?(c=r.partials.join(""),delete t.pendingMessages[i],"{"!==c.charAt(0)&&"["!==c.charAt(0)||(c=JSON.parse(c)),r.deffer.resolve(c)):r.timerID=setTimeout(function(){t.onMsgTimeOut(i)},r.timeoutValue)}else delete t.pendingMessages[i],r.deffer.resolve(c);else{if("reject"!==s)throw Error("UBNativeMessage. Invalid msgType type in: "+n);delete t.pendingMessages[i];var l,h=!1;/<<<.*>>>/.test(c)&&(c=c.match(/<<<(.*)>>>/)[1],h=!0),l=h?new o.UBError(c):new o.UBError("unknownError",c),r.deffer.reject(l)}else console.error("UBNativeMessage. unknown messageID:"+i)},t.eventElm.addEventListener("UBExtensionMsg",t.onContentMessage),t.onDisconnected=null,t.onMessage=null}var o=n(1),i=n(6).i18n,s=n(5);r.features={extension:{host:"none",UIName:"NMUBExtension",minVersion:"1.0.0",installer:"pgffhmifenmomiabibdpnceahangimdi"},dstu:{host:"com.inbase.dstu",UIName:"NMFeatureDSTU",minVersion:"1.0.0.5",installer:"models/DSTU/ub-extension/UBHostDSTUIITSetup{0}.exe",libraryName:"UBHostDSTU.dll"},iit:{host:"com.inbase.iit",UIName:"NMFeatureIIT",minVersion:"1.0.0.5",installer:"models/DSTU/ub-extension/UBHostDSTUIITSetup{0}.exe",libraryName:"UBHostIIT.dll"},pdfsigner:{host:"com.inbase.pdfsigner",UIName:"NMFeaturePDFSigner",minVersion:"1.0.0.3",installer:"models/PDF/ub-extension/UBHostPdfSignSetup{0}."+(o.isMac?"pkg":"exe"),libraryName:"SET _LIB_NAME_IN_UBNATIVENMESSAGES.dll"},scanner:{host:"com.inbase.scanner",UIName:"NMFeatureScanner",minVersion:"1.0.0.4",installer:"models/PDF/ub-extension/UBHostScannerSetup{0}.exe",libraryName:"UBHostScanner.dll"},docedit:{host:"com.inbase.docedit",UIName:"NMFeatureDocEdit",minVersion:"1.0.0.1",installer:"models/UB/ub-extension/UBHostDocEditSetup{0}.exe",libraryName:"UBHostDocEdit.dll"}},r.features.iit.minVersion=r.features.dstu.minVersion,r.versionToNumber=function(e){var t,n=e.split("."),r=1,o=n.length,i=0;if(n.length>4)throw Error("Invalid version number "+e);for(t=o-1;t>=0;t--)i+=parseInt(n[t],10)*r,r*=t===o-1?1e4:1e3;return i},r.prototype.invoke=function(e,t,n){var r,i=this,s=i.getMessageId();return i.connected||"__"===e.substr(0,2)?(n=n||i.callTimeOut,r={clientID:i.id,messageID:s,method:e,params:t},new Promise(function(e,t){var o={request:null,deffer:{resolve:e,reject:t},timerID:setTimeout(function(){i.onMsgTimeOut(s)},n),partials:null,timeoutValue:n||i.callTimeOut,stTime:(new Date).getTime()};i.pendingMessages[s]=o,i.iFarmeMode?window.parent.postMessage({detail:r,messageType:"UBPageMsg"},"*"):i.eventElm.dispatchEvent(new CustomEvent("UBPageMsg",{detail:r}))})):Promise.reject(new o.UBError("unknownError","UBNativeMessage. Not connected. call connect() first"))},r.extensionExists=function(){if(o.isSecureBrowser)return!0;var e;return e=document.getElementById("ubExtensionPageMessageObj"),!(!window.parent||window.parent===window)||!!e&&"YES"===e.getAttribute("data-extensionAttached")},r.prototype.doOnDisconnect=function(e){var t=this,n=t.pendingMessages;t.pendingMessages={},t.connected=!1,n&&_.forEach(n,function(t){t&&t.deffer&&t.deffer.reject(e)})},r.prototype.onParentWinMessage=function(e){e.data&&"UBExtensionMsg"===e.data.messageType&&this.onContentMessage(e.data)},r.prototype.connect=function(e){var t=this,n=void 0;return t.connected?Promise.resolve(t):r.extensionExists()?(n=window.parent&&window.parent!==window?new Promise(function(e,n){var i=void 0,s=function s(a){return a.data&&"initUbExtensionParent"===a.data.messageType?(clearTimeout(i),"initUbExtensionReady"!==a.data.detail?(n(new o.UBError(r.createFeatureUpdateMsg("extension","-",!1))),a):(t.iFarmeMode=!0,window.removeEventListener("message",s),window.addEventListener("message",t.onParentWinMessage.bind(t),!1),void e(!0))):a};window.addEventListener("message",s,!1),window.parent.postMessage({messageType:"initUbExtension"},"*"),i=setTimeout(function(){n(new o.UBError(r.createFeatureUpdateMsg("extension","-",!1)))},1500)}):Promise.resolve(!0),n.then(function(){return t.invoke("__extensionVersion")}).then(function(e){var t=r.versionToNumber(e);if(t<r.versionToNumber(r.features.extension.minVersion))throw o.logDebug("browser extension version",e,"is smaller when required",r.features.extension.minVersion),new o.UBError(r.createFeatureUpdateMsg("extension",e,!0));return t!==r.versionToNumber(r.features.extension.minVersion)&&o.logDebug("Current version of extension",e,"is more than required",r.features.extension.minVersion),!0}).then(function(){return t.invoke("__connect",{hostAppName:t.hostAppName},e).then(function(e){var n=r.features[t.feature].minVersion;if(t.connected=!0,t.featureVersion=e,r.versionToNumber(e)<r.versionToNumber(n))throw new o.UBError(r.createFeatureUpdateMsg(t.feature,e,!0));return e!==n&&o.logDebug("Current version of feature",t.feature,e,"is more than required",n),t},function(e){throw o.logError(e),new o.UBError(r.createFeatureUpdateMsg(t.feature,"-",!1))})}).catch(function(e){throw t.disconnect(),e})):Promise.reject(new o.UBError(r.createFeatureUpdateMsg("extension","-",!1)))},r.prototype.disconnect=function(){var e=this;return e.connected?e.invoke("__disconnect").then(function(t){return o.logDebug("UBNativeMessage. Disconnected with message",t),e.connected=!1,e.eventElm&&e.eventElm.removeEventListener("UBExtensionMsg",e.onContentMessage),!0}):Promise.resolve(!0)},r.prototype.onMsgTimeOut=function(e){var t,n=this;t=n.pendingMessages[e],t&&(t.timerID=null,delete n.pendingMessages[e],t.deffer.reject(new o.UBError("unknownError","pluginMethodCallTimedOut")))},r.prototype.idCounter=0,r.createFeatureUpdateMsg=function(e,t,n){var s,a,u=r.features[e],c=o.format(u.installer,u.minVersion);return a="NM"+(n?"Update":"Install")+("extension"===e?"Extension"+(o.isOpera?"Opera":"Chrome"):"Feature"),s=o.format(i(a),i(u.UIName),u.minVersion,t,c)},e.exports=r},function(e,t,n){"use strict";function r(e){return(e||"").toLowerCase()}function o(e){var t={},n=void 0,o=void 0,i=void 0;return e?(e.split("\n").forEach(function(e){i=e.indexOf(":"),n=r(e.substr(0,i).trim()),o=e.substr(i+1).trim(),n&&(t[n]?t[n]+=", "+o:t[n]=o)}),t):t}function i(e){var t="object"===(void 0===e?"undefined":m(e))?e:void 0;return function(n){return t||(t=o(e)),n?t[r(n)]:t}}function s(e,t,n){return"function"==typeof n?n(e,t):(n.forEach(function(n){e=n(e,t)}),e)}function a(e,t,n){var r=Promise.resolve(e);return"function"==typeof n?r.then(function(e){return n(e,t)}):(n.forEach(function(e){r=r.then(function(n){return e(n,t)})}),r)}function u(e){return e>=200&&e<300}function c(e,t,n){var r=Object.keys(e);return r.forEach(function(r){t.call(n,e[r],r)}),r}function l(e,t,n){var r=Object.keys(e).sort();return r.forEach(function(r){t.call(n,e[r],r)}),r}function h(e,t){if(!t)return e;var n=[];return l(t,function(e,t){null!=e&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){"object"===(void 0===e?"undefined":m(e))&&(e=JSON.stringify(e)),n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}))}),e+(e.indexOf("?")===-1?"?":"&")+n.join("&")}function f(e){var t=x,n={transformRequest:t.transformRequest,transformResponse:t.transformResponse},o=function(e){var n=t.headers,o=v.apply({},e.headers),i=void 0,s=void 0,a=void 0,u=function(e){c(e,function(t,n){if("function"==typeof t){var r=t();r?e[n]=r:delete e[n]}})};n=v.apply({},n.common,n[r(e.method)]),u(n),u(o);e:for(i in n){s=r(i);for(a in o)if(r(a)===s)continue e;o[i]=n[i]}return o},l=o(e);v.apply(n,e),n.headers=l,n.method=n.method?n.method.toUpperCase():"GET";var h=void 0,f=void 0,d=void 0;return h=function(e){return a(e.data,e.headers,n.transformResponse).then(function(t){return e.data=t,u(e.status)?e:Promise.reject(e)})},f=function(e){l=e.headers;var n=s(e.data,i(l),e.transformRequest),o=b;if(b=(new Date).getTime(),e.data){if(E===e.url&&"string"==typeof n&&g===n&&b-o<100)throw new v.UBError("monkeyRequestsDetected");g=n,E=e.url}else c(l,function(e,t){"content-type"===r(t)&&delete l[t]});return!e.withCredentials&&t.withCredentials&&(e.withCredentials=t.withCredentials),!e.timeout&&t.timeout&&(e.timeout=t.timeout),p(e,n,l).then(h,h)},d=Promise.resolve(n),S.filter(function(e){return!!e.request||!!e.requestError}).map(function(e){return{success:e.request,failure:e.requestError}}).concat({success:f}).concat(S.filter(function(e){return!!e.response||!!e.responseError}).map(function(e){return{success:e.response,failure:e.responseError}})).forEach(function(e){d=d.then(e.success,e.failure)}),d}function p(e,t,n){var r=h(e.url,e.params),o=new Promise(function(o,s){var a=new A,l=-1,h=void 0,f=void 0;T.push(e),a.open(e.method,r,!0),c(n,function(e,t){e&&a.setRequestHeader(t,e)}),a.onreadystatechange=function(){if(4===a.readyState){var t=void 0,n=void 0;h!==l&&(n=a.getAllResponseHeaders(),t=a.responseType?a.response:a.responseText),f&&clearTimeout(f),h=h||a.status,a=null,h=Math.max(1223===h?204:h,0);var r=T.indexOf(e);r!==-1&&T.splice(r,1),(u(h)?o:s)({data:t,status:h,headers:i(n),config:e})}},e.onProgress&&(a.upload?a.upload.onprogress=e.onProgress:a.onprogress=e.onProgress),e.withCredentials&&(a.withCredentials=!0),e.responseType&&(a.responseType=e.responseType),a.send(t||null),e.timeout>0&&(f=setTimeout(function(){h=l,a&&a.abort()},e.timeout))});return o}function d(e,t){return f(v.apply(t||{},{method:"GET",url:e}))}function y(e,t,n){return f(v.apply(n||{},{method:"POST",url:e,data:t}))}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=n(1),g=void 0,b=(new Date).getTime(),E=void 0;f.allowRequestReiteration=function(){g=null};var w={"Content-Type":"application/json;charset=utf-8"},x={transformRequest:[function(e){return e&&"object"===(void 0===e?"undefined":m(e))&&""+e!="[object File]"&&""+e!="[object ArrayBuffer]"?JSON.stringify(e):e;
}],transformResponse:[function(e,t){return"string"==typeof e&&(t("content-type")||"").indexOf("json")>=0&&(e=JSON.parse(e)),e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:w,put:w,patch:w},timeout:12e4},S=[],T=[],A=XMLHttpRequest;e.exports={interceptors:S,pendingRequests:T,xhrDefaults:x,xhr:f,get:d,post:y}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),a=/\[.*]/,u={equal:"isNull",notEqual:"notIsNull",custom:"custom"},c=function(){function e(t){r(this,e),this.fieldList=[],this.groupList=[],this.whereList={},this.logicalPredicates=[],this.joinAs=[],this.orderList=[],this.options={},this.method="select",this.__description="",this.__misc={},this.entityName=t}return i(e,[{key:"using",value:function(e){return this.method=e,this}},{key:"attrs",value:function(e){var t=s.flatten(Array.prototype.slice.call(arguments));return this.fieldList=this.fieldList.concat(t),this}},{key:"where",value:function(t,n,r,i){var c=void 0;if(!i)for(i="c"+Object.keys(this.whereList).length+1;this.whereList[i];)i+="_";var l=n,h=e.prototype.WhereCondition;if(n=h[n],t&&"custom"!==n&&!a.test(t)&&(t="["+t+"]"),!n)throw Error("Unknown conditions");if(("in"===n||"notIn"===n)&&r instanceof e)c=n,n="subquery",r=r.ubql();else if("subquery"===n)c=l,r instanceof e&&(r=r.ubql());else if("in"!==n||Array.isArray(r))if("in"!==n||r&&r.length)if("notIn"!==n||r&&r.length){if(null===r&&("isNull"!==n||"notIsNull"!==n)){var f=n;if(r=void 0,n=u[f],!n)throw Error("Condition "+f+"is passed to CustomRepository.where but value is null");console.warn("Condition "+f+"is passed to CustomRepository.where but value is null -> condition transformed to "+n+". Check your logic")}}else console.warn('Condition "notIn" is passed to CustomRepository.where but value is empty array -> condition transformed to "1=1". Check your logic'),t="1",n=h.equal,r={a:1};else console.warn('Condition "in" is passed to CustomRepository.where but value is empty array -> condition transformed to "0=1". Check your logic'),t="0",n=h.equal,r={a:1};else console.debug('Condition "in" is passed to CustomRepository.where but values is not an array -> condition transformed to equal. Check your logic'),n=h.equal;if("in"===n&&1===r.length&&(n=h.equal,r=r[0]),void 0!==r&&("object"!==(void 0===r?"undefined":o(r))||Array.isArray(r)||s.isDate(r))){var p={};p[i]=r,r=p}var d={expression:t,condition:n};return"subquery"===n&&(d.subQueryType=c),void 0!==r&&(d.values=r),this.whereList[i]=d,this}},{key:"exists",value:function(e,t){return this.where("","exists",e,t)}},{key:"notExists",value:function(e,t){return this.where("","notExists",e,t)}},{key:"correlation",value:function(e,t,n,r){return a.test(e)||(e="["+e+"]"),n||(n="="),this.where(e+n+"[{master}."+t+"]","custom",void 0,r)}},{key:"logic",value:function(e){return this.logicalPredicates.push(e),this}},{key:"join",value:function(e){return this.joinAs.push(e),this}},{key:"joinCondition",value:function(e,t,n,r){if(!r)for(r="c"+Object.keys(this.whereList).length+1;this.whereList[r];)r+="_";return this.where(e,t,n,r),this.joinAs.push(r),this}},{key:"orderBy",value:function(e,t){return t=t||"asc",this.orderList.push({expression:e,order:t}),this}},{key:"orderByDesc",value:function(e){return this.orderList.push({expression:e,order:"desc"}),this}},{key:"groupBy",value:function(e){return s.isArray(e)?this.groupList=this.groupList.concat(e):s.isString(e)&&this.groupList.push(e),this}},{key:"start",value:function(e){return this.options.start=e,this}},{key:"limit",value:function(e){return this.options.limit=e,this}},{key:"describe",value:function(e){return this.__description=e,this}},{key:"ubql",value:function(){var e=this.orderList.length,t={entity:this.entityName,method:this.method,fieldList:this.fieldList};if(this.groupList.length>0&&(t.groupList=this.groupList),Object.keys(this.whereList).length&&(t.whereList=this.whereList),e>0){t.orderList={};for(var n=0;n<e;n++)t.orderList[n]=this.orderList[n]}return Object.keys(this.options).length&&(t.options=this.options),this.logicalPredicates.length&&(t.logicalPredicates=this.logicalPredicates),this.joinAs.length&&(t.joinAs=this.joinAs),s.defaults(t,this.__misc),t}},{key:"selectAsObject",value:function(){throw Error("abstract")}},{key:"selectAsArray",value:function(){throw Error("abstract")}},{key:"selectAsStore",value:function(e){throw Error("abstract")}},{key:"select",value:function(e){throw Error("abstract")}},{key:"selectSingle",value:function(){throw Error("abstract")}},{key:"selectScalar",value:function(){throw Error("abstract")}},{key:"selectById",value:function(e){throw Error("abstract")}},{key:"misc",value:function(e){return s.assign(this.__misc,e),this}},{key:"withTotal",value:function(){return this.options.totalRequired=!0,this}}]),e}();c.prototype.getRunListItem=c.prototype.ubql,c.prototype.ubRequest=c.prototype.ubql,c.prototype.WhereCondition={gt:"more",">":"more",more:"more",lt:"less","<":"less",less:"less",eq:"equal","=":"equal",equal:"equal",ge:"moreEqual",geq:"moreEqual",">=":"moreEqual",moreEqual:"moreEqual",le:"lessEqual",leq:"lessEqual","<=":"lessEqual",lessEqual:"lessEqual",ne:"notEqual",neq:"notEqual","<>":"notEqual","!=":"notEqual","!==":"notEqual",notEqual:"notEqual",contains:"like",like:"like",notContains:"notLike",notLike:"notLike",isNull:"isNull",null:"isNull",notNull:"notIsNull",notIsNull:"notIsNull",isNotNull:"notIsNull",beginWith:"startWith",startWith:"startWith",startsWith:"startWith",startswith:"startWith",notBeginWith:"notStartWith",notStartWith:"notStartWith",notStartsWith:"notStartWith",includes:"in",in:"in",notIncludes:"notIn",notIn:"notIn",match:"match",subquery:"subquery",exists:"subquery",notExists:"subquery",custom:"custom"},e.exports=c},function(e,t,n){"use strict";function r(e){var t=this,n=Object.keys(e.domain),r=void 0===e.entityMethods;this.entities={},this.connections=e.connections,n.forEach(function(n){if(r){var o=e.domain[n];t.entities[n]=new a(o,o.entityMethods||{},o.i18n,n,t)}else t.entities[n]=new a(e.domain[n],e.entityMethods[n]||{},e.i18n[n],n,t)}),this.models={};var i=Object.keys(e.models);i.forEach(function(n){var r=e.models[n];t.models[n]=new o(r.path,r.needInit,r.needLocalize,r.order)}),this.forceMIMEConvertors=e.forceMIMEConvertors}function o(e,t,n,r){this.path=e,t&&(this.needInit=t),n&&(this.needLocalize=n),this.order=r}function i(){}function s(e){this.selectName=e.selectName||"",this.execName=e.execName||this.selectName,this.pkGenerator=e.pkGenerator}function a(e,t,n,o,a){var u=this,c=void 0,l=void 0,h=void 0,E=void 0;n&&b.merge(e,n),this.domain=a,this.code=o,this.modelName=e.modelName,this.name=e.name,e.caption&&(this.caption=e.caption),e.description&&(this.description=e.description),e.documentation&&(this.documentation=e.documentation),e.descriptionAttribute&&(this.descriptionAttribute=e.descriptionAttribute),e.cacheType&&(this.cacheType=e.cacheType),e.dsType&&(this.dsType=e.dsType),this.sqlAlias=e.sqlAlias,this.connectionName=e.connectionName,this.isFTSDataTable=e.isFTSDataTable===!0,this.connectionConfig=this.connectionName&&this.domain.connections?b.find(this.domain.connections,{name:this.connectionName}):void 0,this.mapping=void 0,e.mapping&&Object.keys(e.mapping).length&&(E=r.dialectsPriority[this.connectionConfig.dialect],b.forEach(E,function(t){if(e.mapping[t])return u.mapping=new s(e.mapping[t]),!1})),this.dbKeys=e.dbKeys&&Object.keys(e.dbKeys).length?e.dbKeys:void 0,this.dbExtensions=e.dbExtensions&&Object.keys(e.dbExtensions).length?e.dbExtensions:void 0,this.attributes=new i,b.forEach(e.attributes,function(e,t){u.attributes[t]=new f(e,t,u)}),c=Object.keys(e.mixins||{}),this.mixins={},c.forEach(function(t){switch(l=e.mixins[t],h=n&&n.mixins?n.mixins[t]:null,t){case"mStorage":u.mixins[t]=new d(l,h,t);break;case"dataHistory":u.mixins[t]=new y(l,h,t);break;case"aclRls":u.mixins[t]=new m(l,h,t);break;case"fts":u.mixins[t]=new v(l,h,t);break;case"als":u.mixins[t]=new g(l,h,t);break;default:u.mixins[t]=new p(l,h,t)}}),this.entityMethods=t||{}}function u(e){return e?new Date(e):null}function c(e){var t=e?new Date(e):null;return t&&t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3),t}function l(e){return"boolean"==typeof e?e:void 0===e||null===e||""===e?null:1===e}function h(e){this.expressionType=e.expressionType,this.expression=e.expression}function f(e,t,n){this.code=t,this.name=e.name,this.entity=n,this.dataType=e.dataType||"String",this.associatedEntity=e.associatedEntity,this.associationAttr=e.associationAttr,this.caption=e.caption||"",this.description=e.description||"",this.documentation=e.documentation||"",this.size=e.size||0,this.allowNull=e.allowNull!==!1,this.allowSort=e.allowSort!==!1,this.isUnique=e.isUnique===!0,this.defaultValue=e.defaultValue,this.readOnly=e.readOnly===!0,this.isMultiLang=e.isMultiLang===!0,this.cascadeDelete=e.cascadeDelete===!0,this.enumGroup=e.enumGroup,this.customSettings=e.customSettings||{},this.associationManyData=e.associationManyData,this.storeName=e.storeName,this.generateFK=e.generateFK!==!1,this.defaultView=e.defaultView!==!1,this.mapping=void 0;var o=this;if(e.mapping&&Object.keys(e.mapping).length){var i=r.dialectsPriority[this.entity.connectionConfig.dialect];b.forEach(i,function(t){if(e.mapping[t])return o.mapping=new h(e.mapping[t]),!1})}this.physicalDataType=r.getPhysicalDataType(this.dataType||"String")}function p(e,t,n){this.code=n,b.assign(this,e),t&&b.assign(this,t)}function d(e,t,n){p.apply(this,arguments)}function y(e,t,n){p.apply(this,arguments)}function m(e,t,n){p.apply(this,arguments)}function v(e,t,n){p.apply(this,arguments)}function g(e,t,n){p.apply(this,arguments)}var b=n(3);r.prototype.isEntityMethodsAccessible=function(e,t){var n=this.entities[e];return!!n&&(Array.isArray(t)?n.haveAccessToMethods(t):n.haveAccessToMethod(t))},r.prototype.get=function(e,t){var n=this.entities[e];if(t!==!1&&!n)throw Error('Entity with code "'+e+'" does not exists or not accessible');return n},r.prototype.has=function(e){return!!this.entities[e]},r.prototype.eachEntity=function(e){return b.forEach(this.entities,e)},r.prototype.filterEntities=function(e){return b.isFunction(e)?b.filter(this.entities,e):b.filter(this.entities,function(t){var n=!0;for(var r in e)e.hasOwnProperty(r)&&(n=n&&t[r]===e[r]);return n})},r.ubDataTypes={String:"String",Int:"Int",BigInt:"BigInt",Float:"Float",Currency:"Currency",Boolean:"Boolean",DateTime:"DateTime",Text:"Text",ID:"ID",Entity:"Entity",Document:"Document",Many:"Many",TimeLog:"TimeLog",Enum:"Enum",BLOB:"BLOB",Date:"Date"},r.prototype.ubDataTypes=r.ubDataTypes,r.ExpressionType={Field:"Field",Expression:"Expresion"},r.ubMixins={dataHistory:"dataHistory",mStorage:"mStorage",unity:"unity",treePath:"treePath"},r.ubServiceFields={dateFrom:"mi_datefrom",dateTo:"mi_dateto"},r.EntityDataSourceType={Normal:"Normal",External:"External",System:"System",Virtual:"Virtual"},r.EntityCacheTypes={None:"None",Entity:"Entity",Session:"Session",SessionEntity:"SessionEntity"},r.dialectsPriority={MSSQL2012:["MSSQL2012","MSSQL","AnsiSQL"],MSSQL2008:["MSSQL2008","MSSQL","AnsiSQL"],MSSQL:["MSSQL","AnsiSQL"],Oracle11:["Oracle11","Oracle","AnsiSQL"],Oracle10:["Oracle10","Oracle","AnsiSQL"],Oracle9:["Oracle9","Oracle","AnsiSQL"],Oracle:["Oracle","AnsiSQL"],PostgreSQL:["PostgreSQL","AnsiSQL"],AnsiSQL:["AnsiSQL"],Firebird:["Firebird","AnsiSQL"],SQLite3:["SQLite3","AnsiSQL"]},r.getPhysicalDataType=function(e){var t=r.ubDataTypes,n={};return this.physicalTypeMap||(n[t.Int]="int",n[t.Entity]="int",n[t.ID]="int",n[t.BigInt]="int",n[t.String]="string",n[t.Text]="string",n[t.Enum]="string",n[t.Float]="float",n[t.Currency]="float",n[t.Boolean]="boolean",n[t.Date]="date",n[t.DateTime]="date",this.physicalTypeMap=n),this.physicalTypeMap[e]||"auto"},o.prototype.needInit=!1,o.prototype.needLocalize=!1,i.prototype.asJSON=function(){var e={};return b.forEach(this,function(t,n){t.asJSON?e[n]=t.asJSON():e[n]=t}),e},a.prototype.caption="",a.prototype.description="",a.prototype.documentation="",a.prototype.descriptionAttribute="",a.prototype.cacheType="None",a.prototype.dsType="Normal",a.prototype.getEntityCaption=function(){return this.caption||this.description},a.prototype.attr=function(e,t){var n=this.attributes[e];return n||t||(n=this.getEntityAttribute(e)),n},a.prototype.getAttribute=function(e){var t=this.attributes[e];if(!t)throw Error("Attribute "+this.code+"."+e+" doesn't exist");return t},a.prototype.eachAttribute=function(e){return b.forEach(this.attributes,e)},a.prototype.mixin=function(e){return this.mixins[e]},a.prototype.hasMixin=function(e){var t=this.mixins[e];return"audit"===e?!t||!!t&&t.enabled:!!t&&t.enabled},a.prototype.checkMixin=function(e){if(!this.hasMixin(e))throw Error("Entity "+this.code+" does not have mixin "+e)},a.prototype.asJSON=function(){var e={code:this.code};return b.forEach(this,function(t,n){"domain"!==n&&(t.asJSON?e[n]=t.asJSON():e[n]=t)}),e},a.prototype.haveAccessToMethod=function(e){return 1===this.entityMethods[e]},a.prototype.filterAttribute=function(e){return b.isFunction(e)?b.filter(this.attributes,e):b.filter(this.attributes,function(t){var n=!0;for(var r in e)e.hasOwnProperty(r)&&(n=n&&t[r]===e[r]);return n})},a.prototype.haveAccessToAnyMethods=function(e){var t=this,n=e||[],r=!1;return n.forEach(function(e){r=r||1===t.entityMethods[e]}),r},a.prototype.haveAccessToMethods=function(e){var t=this,n=!0,r=e||[];return r.forEach(function(e){n=n&&1===t.entityMethods[e]}),n},a.prototype.getConvertRules=function(e){var t=this,n=[],o=r.ubDataTypes;return e.forEach(function(e,r){var i=t.attr(e);i&&(i.dataType===o.DateTime?n.push({index:r,convertFn:u}):i.dataType===o.Date?n.push({index:r,convertFn:c}):i.dataType===o.Boolean&&n.push({index:r,convertFn:l}))}),n},a.prototype.getDescriptionAttribute=function(){var e=this.descriptionAttribute||"caption";if(!this.attr(e))throw Error("Missing description attribute for entity "+this.code);return e},a.prototype.getEntityAttributeInfo=function(e,t){var n=this,r=e.split("."),o=-(r.length-1),i=[],s=this.code,a=void 0,u=void 0;if(t&&t>0)return{entity:s,attribute:n.attr(r[0]),attributeCode:r[0]};for(;n&&r.length;){if(n&&1===r.length)return i=r[0].split("@"),i.length>1&&(n=this.domain.get(i[1]),e=i[0]),{entity:s,attribute:n.attr(e),attributeCode:e};if(u=r.shift(),i=u.split("@"),i.length>1&&(s=i[1],n=this.domain.get(s),u=i[0]),a=n.attr(u),!a)return;if(o===(t||0))return{entity:s,attribute:a,attributeCode:u};if(e=r[0],"Enum"===a.dataType&&"name"===e)return{entity:s,attribute:a,attributeCode:u};s=a.associatedEntity,n=a.getAssociatedEntity(),o+=1}},a.prototype.getEntityAttribute=function(e,t){var n=this,r=e.split("."),o=-(r.length-1),i=[],s=void 0,a=void 0;if(t&&t>0)return n.attributes[r[0]];for(;n&&r.length;){if(n&&1===r.length)return i=r[0].split("@"),i.length>1&&(n=this.domain.get(i[1]),e=i[0]),n.attributes[e];if(a=r.shift(),i=a.split("@"),i.length>1&&(n=this.domain.get(i[1]),a=i[0]),s=n.attributes[a],!s)return;if(o===(t||0))return s;if(e=r[0],"Enum"===s.dataType){if("name"===e)return s;n=this.domain.get("ubm_enum")}else n=this.domain.get(s.associatedEntity);o+=1}},a.prototype.getAttributeNames=function(e){var t=[];return e?(b.forEach(this.filterAttribute(e),function(e){t.push(e.code)}),t):Object.keys(this.attributes)},a.prototype.getEntityRequirements=function(e){var t=[];e=e||this.getAttributeNames();for(var n=0,r=e.length;n<r;++n){var o=e[n].split("."),i=this.getEntityAttribute(o[0]);if("Entity"===i.dataType)if(o.length>1){var s=[o.slice(1).join(".")];t=b.union(t,i.getAssociatedEntity().getEntityRequirements(s))}else t=b.union(t,[i.associatedEntity])}return t},a.prototype.checkAttributeExist=function(e,t){var n=this;e=b.isArray(e)?e:[e],b.forEach(e,function(e){if(!n.getEntityAttributeInfo(e))throw Error(t+(t?" ":"")+'The entity "'+n.code+'" does not have attribute "'+e+'"')})},a.prototype.getEntityDescription=function(){return this.description||this.caption},f.prototype.getAssociatedEntity=function(){return this.associatedEntity?this.entity.domain.get(this.associatedEntity):null},f.prototype.asJSON=function(){var e={};return b.forEach(this,function(t,n){"entity"!==n&&(t.asJSON?e[n]=t.asJSON():e[n]=t)}),e},p.prototype.enabled=!0,d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.prototype.simpleAudit=!1,d.prototype.safeDelete=!1,y.prototype=Object.create(p.prototype),y.prototype.constructor=y,y.prototype.historyType="common",m.prototype=Object.create(p.prototype),m.prototype.constructor=m,m.prototype.aclRlsUseUnityName=!1,m.prototype.aclRlsSelectionRule="exists",v.prototype=Object.create(p.prototype),v.prototype.constructor=v,v.prototype.scope="connection",v.prototype.dataProvider="mixin",g.prototype=Object.create(p.prototype),g.prototype.constructor=g,g.prototype.alsOptimistic=!0,e.exports=r},function(e,t){"use strict";function n(e,t,n){var o=e,s=r(o.result.split("+")[0]),a=o.uData?JSON.parse(o.uData):{lang:"en",login:"anonymous"},u=o.result,c=t||"",l="undefined"==typeof window?ncrc32(0,u+c):null;a.login||(a.login=o.logonname),Object.defineProperty(this,"sessionID",{enumerable:!0,writable:!1,value:s}),this.logonname=o.logonname,this.userData=a,this.authSchema=n||"UB",this.signature=function(){var e,t;switch(this.authSchema){case"None":return"";case"UBIP":return this.logonname;default:return e=Math.floor((new Date).getTime()/1e3),t=r(e),s+t+r("undefined"==typeof window?ncrc32(l,t):i(u+c+t))}},this.isAnonymous=function(){return"None"===this.authSchema},this.authHeader=function(){return this.isAnonymous()?"":this.authSchema+" "+this.signature()}}n.prototype.hexa8=function(e){for(var t=parseInt(e,10),n=isNaN(t)?"00000000":t.toString(16);n.length<8;)n="0"+n;return n};var r=n.prototype.hexa8,o={};n.prototype.crc32=function(e,t,n,r){var i,s,a,u,c;for(e+="",t=t||79764919,n=n||4294967295,r=r||4294967295,c=n,i=o[t],i||(i=o[t]=function(){var e,n,r,o=[],i=function(e,t){for(var n=0;t;)n=2*n+e%2,e/=2,e-=e%1,t--;return n};for(e=255;e>=0;e--){for(r=i(e,32),n=0;n<8;n++)r=(2*r^(r>>>31)%2*t)>>>0;o[e]=i(r,32)}return o}()),s=0;s<e.length;s++){if(u=e.charCodeAt(s),u>255)throw new RangeError;a=c%256^u,c=(c/256^i[a])>>>0}return(c^r)>>>0};var i=n.prototype.crc32;e.exports=n},function(e,t){"use strict";function n(e,t){var n=this;this.dbName=e.toLowerCase();var i=new Promise(function(e,i){o||i({errMsg:"unsupportedBrowser",errDetails:"indexedDB not found"});var s=o.open(n.dbName,t||1);s.onerror=function(e){i(e)},s.onblocked=function(){i({errMsg:"databaseIsBlocked",errDetails:"we need to upgrade database, but some other browser tab also open it"})},s.onsuccess=function(){e(s.result)},s.onupgradeneeded=function(e){var t=e.target.result,n=e.target.transaction;console.log('upgrading database "'+t.name+'" from version '+e.oldVersion+" to version "+e.newVersion+"..."),r.stores.forEach(function(e){t.objectStoreNames.contains(e)?n.objectStore(e).clear():t.createObjectStore(e)})}});this.ready=function(){return i}}var r={name:"UB",stores:["permanent","session","userData"],version:1},o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB;n.SESSION="session",n.PERMANENT="permanent",n.cacheTypes={None:"None",Entity:"Entity",Session:"Session",SessionEntity:"SessionEntity"},n.prototype.onTransactionComplete=function(e){},n.prototype.onTransactionAbort=function(e){window.console&&window.console.error("IDB transaction aborted: "+(e.target.error.message||e.target.errorCode))},n.prototype.onTransactionError=function(e){window.console&&window.console.error("IDB transaction failed: "+e.target.errorCode)},n.prototype.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"userData",n=this;return this.ready().then(function(r){var o=r.transaction([t],"readwrite");return o.oncomplete=n.onTransactionComplete,o.onabort=n.onTransactionAbort,o.onerror=n.onTransactionError,new Promise(function(n,r){var i=o.objectStore(t).get(e);i.onsuccess=function(){n(i.result)},i.onerror=function(){r({errMsg:i.error.name})}})})},n.prototype.getAllKeys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"userData",t=this;return this.ready().then(function(n){var r=n.transaction([e],"readwrite");return r.oncomplete=t.onTransactionComplete,r.onabort=t.onTransactionAbort,r.onerror=t.onTransactionError,new Promise(function(t,n){var o=[],i=r.objectStore(e).openCursor();i.onsuccess=function(e){var n=e.target.result;n?(o.push(n.key),n.continue()):t(o)},i.onerror=function(e){n(e.target.result)}})})},n.prototype.put=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"userData",n=this;return this.ready().then(function(r){var o=r.transaction([t],"readwrite");return o.oncomplete=n.onTransactionComplete,o.onabort=n.onTransactionAbort,o.onerror=n.onTransactionError,new Promise(function(n,r){var i=void 0;Array.isArray(e)?e.forEach(function(s,a){i=o.objectStore(t).put(void 0===s.value?null:s.value,s.key),i.onerror=function(e){r(e.target.result)},i.onsuccess=function(t){a===e.length-1&&n(t.target.result)}}):(i=o.objectStore(t).put(void 0===e.value?null:e.value,e.key),i.onsuccess=i.onerror=function(e){n(e.target.result)})})})},n.prototype.clear=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"userData",t=this;return this.ready().then(function(n){var r=n.transaction([e],"readwrite");return r.oncomplete=t.onTransactionComplete,r.onabort=t.onTransactionAbort,r.onerror=t.onTransactionError,new Promise(function(t,n){var o=r.objectStore(e).clear();o.onsuccess=function(e){t(e.target.result)},o.onerror=function(e){n(e.target.result)}})})},n.prototype.remove=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"userData",n=this;return this.ready().then(function(r){var o=r.transaction([t],"readwrite");return o.oncomplete=n.onTransactionComplete,o.onabort=n.onTransactionAbort,o.onerror=n.onTransactionError,new Promise(function(n,r){var i=void 0;"string"==typeof e?(i=o.objectStore(t).delete(e),i.onsuccess=i.onerror=function(e){n(e.target.result)}):Array.isArray(e)?e.length?e.forEach(function(s,a){i=o.objectStore(t).delete(s),i.onerror=function(e){r(e.target.result)},i.onsuccess=function(t){a===e.length-1&&n(t.target.result)}}):n(!0):r({errMsg:"invalid key for UBCache.remove call"})})})},n.prototype.removeIfMach=function(e,t){var n=this;return n.getAllKeys(t).then(function(r){var o=r.filter(function(t){return e.test(t)});return n.remove(o,t)})},e.exports=n},function(e,t,n){"use strict";function r(e,t){if(t)throw new c.UBError("Access deny");return Promise.resolve({authSchema:N,login:D})}function o(e){var t=e.host||"http://localhost:888",n=e.appName||"/",o=e.requestAuthParams,i=void 0,s=void 0,h=void 0;u.call(this),a.assign(this,u.prototype),this.ubNotifier=null,this.appConfig={},this.preferredLocale="en",this.domain=null,"/"!==n.charAt(0)&&(n="/"+n),o||(o=r),s=t+n,this.serverUrl=s,i=window.location.origin===t?n:s,"/"!==i.charAt(i.length-1)&&(i+="/"),this.baseURL=i,this.appName=n,this.exchangeKeysPromise=null,this.channelEncryptor=null,this._pki=null,this.isPKIReady=function(){return null!==this._pki},this.cache=null,this.lastLoginName="",this.useCacheForXHR=window&&(window.ActiveXObject||"ActiveXObject"in window),this._bufferedRequests=[],this._bufferTimeoutID=0,this.isAuthorized=function(){return void 0!==h},this.userLogin=function(){return this.userData("login")},this.userLang=function(){return this.userData("lang")},this.userData=function(e){var t=this.isAuthorized()?h.userData:{lang:"en",login:D};return e?t[e]:t},this.authorize=function(e){var t=this;return h?Promise.resolve(h):(this.exchangeKeysPromise=null,o(this,e).then(function(e){return t.doAuth(e).then(function(n){return h=n,t.emit("authorized",t,n,e),n}).catch(function(e){return e&&e instanceof c.UBAbortError||t.emit("authorizationFail",e),t.authorize(!0)})}))},this.authorizationClear=function(){this.lastLoginName=this.userLogin(),h=void 0},this.authHandshakeUBIP=function(e){return e.login?this.post(C,"",{headers:{Authorization:e.authSchema+" "+e.login}}):Promise.reject({errMsg:"invalid user name"})},this.authHandshakeOpenIDConnect=function(e){return Promise.resolve(e).then(function(e){return e.authSchema="UB",e})},this.authHandshakeUB=function(e){var t=this,r=void 0;return e.login&&e.password?this.post(C,"",{params:{AUTHTYPE:e.authSchema,userName:e.login}}).then(function(o){var i=void 0,s=void 0,a=void 0,u={params:{AUTHTYPE:e.authSchema,userName:e.login,password:""}},c=""+v((new Date).toISOString().substr(0,16));u.params.clientNonce=c,o.data.connectionID&&(u.params.connectionID=o.data.connectionID);var l=o.data.realm;if(l){if(i=o.data.nonce,!i)throw Error("invalid LDAP auth response");o.data.useSasl?(s=g(e.login.split("\\")[1].toUpperCase()+":"+l+":"+e.password),s.concat(m.enc.Utf8.parse(":"+i+":"+c)),a=""+g(s),r=a):(a=window.btoa(e.password),r=a)}else{if(i=o.data.result,!i)throw Error("invalid auth response");s=""+v("salt"+e.password);var h="/"===n?"/":n.replace(/\//g,"");a=""+v(h.toLowerCase()+i+c+e.login+s),r=s}return u.params.password=a,t.post(C,"",u).then(function(e){return e.secretWord=r,e})}):Promise.reject({errMsg:"invalid user name or password"})},this.authHandshakeCERT=function(e){var t=this,n=void 0,r=void 0,o={AUTHTYPE:e.authSchema};return e.login&&(o.userName=e.login),e.password&&(o.password=e.password),e.registration&&(o.registration=e.registration),t.pki().then(function(e){return n=e,n.readPK(t)}).then(function(e){var n=e.ownIITCert;return e.ownIITEncryptCert&&""!==e.ownIITEncryptCert&&(n=[e.ownIITCert,e.ownIITEncryptCert,e.ownIITEncryptSignature].join(" ")),t.xhr({url:C,method:"POST",headers:{"Content-Type":"application/octet-stream"},params:o,responseType:"arraybuffer",data:n})}).then(function(){throw new c.UBError("msgInvalidCertAuth")},function(e){var i=void 0,s=void 0,a=void 0;if(e instanceof Error||e instanceof c.UBError)throw e;if(401!==e.status){if(e.data&&e.data instanceof ArrayBuffer&&e.data.byteLength>1){try{var u=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e.data)));(65===u.errCode||0===u.errCode)&&u.errMsg&&/<<<.*>>>/.test(u.errMsg)&&(a=u.errMsg.match(/<<<(.*)>>>/)[1])}catch(e){}if(a)throw new c.UBError(a)}throw new c.UBError("msgInvalidCertAuth")}if(s=e.headers("WWW-Authenticate"),!s&&"CERT "!==s.substr(0,5))throw Error("invalidCertAuthRespAuthType");if(i=s.split(" "),3!==i.length)throw Error("invalidCertAuthResponse");return o.CONNECTIONID=i[1],n.setRecipientCertificate(i[2]).then(function(){return c.base64FromAny(e.data)}).then(function(e){if(!e||""===e)throw Error("invalidCertAuthEnvelop");return n.decryptEnvelope(e,!0)}).then(function(e){return r=window.atob(e),n.encryptEnvelope(e,!0)}).then(function(e){var n=c.base64toArrayBuffer(e);if(0===n.byteLength)throw Error("invalidCertAuthEnvelopOut");return t.xhr({url:C,method:"POST",headers:{"Content-Type":"application/octet-stream"},params:o,data:n})}).then(function(e){return e.secretWord=r,e})}).then(function(){n&&n.closePK()},function(){n&&n.closePK()})},this.doAuth=function(e){var t=this,n=void 0;if(e.authSchema=e.authSchema||"UB",t.isAuthorized())return Promise.reject({errMsg:"invalid auth call",errDetails:"contact developers"});switch(e.authSchema){case N:n=Promise.resolve({data:{result:"0+0",uData:JSON.stringify({login:D})},secretWord:""});break;case"UB":n=t.authHandshakeUB(e);break;case"CERT":n=t.authHandshakeCERT(e);break;case"UBIP":n=t.authHandshakeUBIP(e);break;case"OpenIDConnect":n=t.authHandshakeOpenIDConnect(e);break;case"Negotiate":n=t.post(C,"",{params:{USERNAME:"",AUTHTYPE:e.authSchema}}).then(function(e){return e.secretWord=e.data.logonname,e});break;default:n=Promise.reject({errMsg:"invalid authentication schema "+e.authSchema})}return n=n.then(function(n){var r=new f(n.data,n.secretWord,e.authSchema),o=r.userData;return o.lang&&t.appConfig.supportedLanguages.indexOf(o.lang)!==-1||(o.lang=t.appConfig.supportedLanguages[0]),r},function(n){var r={};if(n instanceof Error)throw n;n.data&&(r={errMsg:n.data.errMsg,errCode:n.data.errCode,errDetails:n.data.errMsg}),403===n.status?r.errMsg="UB"===e.authSchema?"msgInvalidUBAuth":"msgInvalidCertAuth":r.errMsg||(r.errMsg="unknownError"),0===n.status&&(r.errDetails="network error"),/<<<.*>>>/.test(r.errMsg)&&(r.errMsg=r.errMsg.match(/<<<(.*)>>>/)[1]);var o=t.serverErrorByCode(r.errCode);throw o&&(r.errDetails=o+" "+r.errDetails,l(o)!==o&&(r.errMsg=o)),new c.UBError(r.errMsg,r.errDetails,r.errCode)})},this.recordedXHRs=[],this.recorderEnabled=!1}function i(e){var t=this.config=a.clone(e),n=new o({host:t.host,appName:t.path||"/",requestAuthParams:t.onCredentialRequired});return t.onAuthorizationFail&&n.on("authorizationFail",t.onAuthorizationFail),t.onNeedChangePassword&&n.on("passwordExpired",t.onNeedChangePassword),n.getAppInfo().then(function(e){n.appConfig=a.defaults(a.clone(e),{applicationName:"UnityBase",applicationTitle:"UnityBase",loginWindowTopLogoURL:"",loginWindowBottomLogoURL:"",themeName:"UBGrayTheme",userDbVersion:null,defaultLang:"en",supportedLanguages:["en"]}),n.ubNotifier=new w(n);var r=I&&I.getItem(n.appName+"preferredLocale");return r||(r=n.appConfig.defaultLang),n.appConfig.supportedLanguages.indexOf(r)===-1&&(r=n.appConfig.defaultLang),n.preferredLocale=r,!t.onGotApplicationConfig||t.onGotApplicationConfig(n)}).then(function(){return n.initEncriptionIfNeed()}).then(function(){return n.initCache(n.appConfig.userDbVersion)}).then(function(){return n.authorize()}).then(function(){var e=n.userData("lang");return I&&I.setItem(n.appName+"preferredLocale",e),n.preferredLocale=e,n.getDomainInfo(t.onGotApplicationDomain)}).then(function(e){return n.domain=e,n})}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(2),u=n(5),c=n(1),l=n(6).i18n,h=n(12),f=n(16),p=n(9),d=n(15),y=n(17),m=n(4),v=n(8),g=n(7),b=n(19),E=n(20),w=n(21),x=n(10),S=/(\/|^)(models|auth|getAppInfo|downloads)(\/|\?|$)/,T=/(\/|^)(initEncryption)(\/|\?|$)/,A=20,C="auth",D="anonymous",N="None";o.prototype.initCache=function(e){var t=this;return t.cache=new y(t.baseURL,e),t.cachedSessionEntityRequested={},t.cache.clear(y.SESSION)},o.prototype.cacheKeyCalculate=function(e,t){var n=this,r=[n.userLogin().toLowerCase(),n.userLang(),e];return Array.isArray(t)&&r.push(""+g(JSON.stringify(t))),r.join("#").replace(/[\\:\.]/g,"#")},o.prototype.cacheOccurrenceRefresh=function(e,t){var n=this,r=void 0,o=void 0,i=void 0,s=Promise.resolve(!0),a=void 0,u=void 0,c=void 0;return t!==y.cacheTypes.Session&&t!==y.cacheTypes.SessionEntity||(a=this.domain.get(e),a&&a.hasMixin("unity")&&(u=a.mixin("unity"),c=this.domain.get(u.entity),c&&u.entity!==e&&c.cacheType!==y.cacheTypes.None&&(s=s.then(function(){n.cacheOccurrenceRefresh(u.entity,c.cacheType)}))),r=n.cacheKeyCalculate(e),i=RegExp("^"+r),o=Object.keys(n.cachedSessionEntityRequested).filter(function(e){return i.test(e)}),o.forEach(function(e){delete n.cachedSessionEntityRequested[e]}),t===y.cacheTypes.Session&&(s=s.then(function(){n.cache.removeIfMach(i,y.SESSION)}))),s},o.prototype.cacheOccurrenceRemove=function(e,t){var n=this,r=n.cacheKeyCalculate(e),o=RegExp("^"+r),i=Object.keys(n.cachedSessionEntityRequested).filter(function(e){return o.test(e)});i.forEach(function(e){delete n.cachedSessionEntityRequested[e]});var s=t===y.cacheTypes.Session?y.SESSION:y.PERMANENT;return n.cache.removeIfMach(o,s)},o.prototype.cacheClearAll=function(){
var e=this;return Object.keys(e.cachedSessionEntityRequested).forEach(function(t){delete e.cachedSessionEntityRequested[t]}),Promise.all([e.cache.clear(y.SESSION),e.cache.clear(y.PERMANENT)])},o.prototype.pki=function(){var e=this;return new Promise(function(t,n){e._pki||(e._pki=new E,e._pkiInit=e._pki.init()),e._pkiInit.then(function(){t(e._pki)},function(e){n(e)})})},o.prototype.exchangeKeys=function(e){var t=void 0,n=void 0,r=this;return r.exchangeKeysPromise?r.exchangeKeysPromise.isFulfilled()&&r.encryptionKeyLifetime>0&&(t=r.exchangeKeysPromise.valueOf().doneTime,n=(new Date).getTime(),(n-t)/1e3>this.encryptionKeyLifetime-10&&(r.exchangeKeysPromise=r.doKeyExchange(e))):r.exchangeKeysPromise=this.doKeyExchange(e),r.exchangeKeysPromise},o.prototype.get=function(e,t){return this.xhr(a.assign({},t,{method:"GET",url:e}))},o.prototype.post=function(e,t,n){return this.xhr(a.assign({},n,{method:"POST",url:e,data:t}))},o.prototype.xhr=function(e){function t(t,r){var o=(r("content-encoding")||"").toUpperCase(),i="UBEZ"===o,s=i||"UBE"===o,a=(r("content-type")||"").indexOf("json")>=0,u="arraybuffer"===e.responseType,l=Promise.resolve(t);return s&&(l=l.then(function(e){return n.channelEncryptor.decryptArr(e,u,i)})),l.then(function(t){if("arraybuffer"===e.responseType&&(t=c.base64toArrayBuffer(t)),"string"==typeof t&&a)try{t=JSON.parse(t)}catch(e){throw console.log(t),e}return t})}var n=this,r=a.assign({headers:{}},e),o=r.url,i=!1,u=void 0;return n.recorderEnabled&&n.recordedXHRs.push(e),(o.length<n.baseURL.length||o.substring(0,n.baseURL.length)!==n.baseURL)&&(r.url=n.baseURL+r.url),S.test(o)?u=h.xhr(r):(u=n.authorize(),n.trafficEncryption&&!T.test(o)&&(u=u.then(function(e){return n.exchangeKeys(e)}).then(function(){var e=s(r.data);return"string"!==e&&("object"!==e||r.data instanceof Blob||r.data.byteLength)?(i=!0,c.base64FromAny(r.data)):JSON.stringify(r.data)}).then(function(e){if(r.transformResponse=t,r.responseType="arraybuffer",r.transformRequest=function(e){return e},!e)return!0;var o=function(){var t=e.length>1e3;return{v:n.channelEncryptor.encryptToArray(e,i,t).then(function(e){r.headers["Content-Encoding"]=t?"UBEZ":"UBE",r.data=new Uint8Array(e)})}}();return"object"===(void 0===o?"undefined":s(o))?o.v:void 0})),u=u.then(function(){return n.authorize().then(function(e){var t=e.authHeader();return t&&(r.headers.Authorization=t),h.xhr(r)})}).catch(function(t){var r="";if(401===t.status){if(c.logDebug("unauth: %o",t),n.isAuthorized()&&n.authorizationClear(),!t.config.url||!/\/logout/.test(t.config.url))return h.xhr.allowRequestReiteration(),n.xhr(e);n.lastLoginName=""}if(t.data&&t.data.hasOwnProperty("errCode")){var o=t.data.errCode,i=r=t.data.errMsg;if(/<<<.*>>>/.test(r)&&(r=l(r.match(/<<<(.*)>>>/)[1])),72===o&&n.emit("passwordExpired"))throw new c.UBAbortError;throw new c.UBError(r,i,o)}throw t})),u},o.prototype.getAppInfo=function(){var e=this;return e.get("getAppInfo").then(function(t){var n=t.data;return Object.defineProperty(e,"trafficEncryption",{enumerable:!0,writable:!1,value:n.trafficEncryption||!1}),Object.defineProperty(e,"serverCertificate",{enumerable:!0,writable:!1,value:n.serverCertificate||""}),Object.defineProperty(e,"encryptionKeyLifetime",{enumerable:!0,writable:!1,value:n.encryptionKeyLifetime||0}),Object.defineProperty(e,"authMethods",{enumerable:!0,writable:!1,value:n.authMethods}),Object.defineProperty(e,"supportedWSProtocols",{enumerable:!0,writable:!1,value:n.supportedWSProtocols||[]}),Object.defineProperty(e,"serverVersion",{enumerable:!0,writable:!1,value:n.serverVersion||""}),c.apply(e.appConfig,n.uiSettings.adminUI),n})},o.prototype.getDomainInfo=function(e){var t=this;return t.get("getDomainInfo",{params:{v:4,userName:this.userLogin()}}).then(function(n){var r=n.data,o=new d(r);return t.domain=o,e&&e(r,o),o})},o.prototype.initEncriptionIfNeed=function(){var e=this;return e.trafficEncryption&&!e.channelEncryptor?e.serverCertificate?(e.channelEncryptor=new b,e.channelEncryptor.init(e.serverCertificate)):(e.channelEncryptor=null,Promise.reject(Error("During call to getAppInfo server not return certificate required for encrypted communication"))):Promise.resolve(!0)},o.prototype.doKeyExchange=function(e){var t=this;return t.trafficEncryption?t.isAuthorized()?t.channelEncryptor.getEnvelopeWithKey().then(function(n){var r={url:"initEncryption",method:"POST",data:n,headers:{"Content-Type":"application/octet-stream",Authorization:"UB "+e.signature()}};return t.xhr(r)}).then(function(){return{doneTime:(new Date).getTime(),trafficEncryption:t.trafficEncryption}}):Promise.reject({errMsg:"must be authorized before do key agreement"}):Promise.resolve({doneTime:0,trafficEncryption:t.trafficEncryption})},o.prototype.processBuffer=function(){var e=this,t=e._bufferedRequests;e._bufferTimeoutID=0,e._bufferedRequests=[],e.post("ubql",a.map(t,"request")).then(function(e){t.forEach(function(t,n){t.deferred.resolve(e.data[n])})},function(e){t.forEach(function(t){t.deferred.reject(e)})})},o.prototype.query=function(e,t){var n=this;return void 0!==t&&t!==!1&&A?(this._bufferTimeoutID||(this._bufferTimeoutID=setTimeout(n.processBuffer.bind(n),A)),new Promise(function(t,r){n._bufferedRequests.push({request:e,deferred:{resolve:t,reject:r}})})):n.post("ubql",[e]).then(function(e){return e.data[0]})},o.prototype.run=o.prototype.query,o.prototype.convertResponseDataToJsTypes=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,s=void 0,a=void 0;if(e.entity&&e.resultData&&!e.resultData.notModified&&e.resultData.fields&&e.resultData.data&&e.resultData.data.length&&(t=this.domain.get(e.entity).getConvertRules(e.resultData.fields),n=t.length,o=e.resultData.data,r=o.length,n))for(i=0;i<r;i++)for(s=0;s<n;s++)a=t[s].index,o[i][a]=t[s].convertFn(o[i][a]);return e.resultLock&&e.resultLock.lockTime&&(e.resultLock.lockTime=c.iso8601Parse(e.resultLock.lockTime)),e},o.prototype.doFilterAndSort=function(e,t){return p.doFilterAndSort(e,t)},o.prototype.addNew=function(e){var t=this;return e.method="addnew",t.query(e,!0).then(t.convertResponseDataToJsTypes.bind(t))},o.prototype.invalidateCache=function(e){var t=this,n=t.domain.get(e.entity).cacheType;return n===y.cacheTypes.none?e:t.cacheOccurrenceRefresh(e.entity,n).then(function(){return e})},o.prototype.update=function(e,t){var n=this;return e.method=e.method||"update",n.query(e,t).then(n.convertResponseDataToJsTypes.bind(n)).then(n.invalidateCache.bind(n))},o.prototype.insert=function(e,t){var n=this;return e.method=e.method||"insert",n.query(e,t).then(n.convertResponseDataToJsTypes.bind(n)).then(n.invalidateCache.bind(n))},o.prototype.doDelete=function(e,t){var n=this;return e.method=e.method||"delete",n.query(e,t).then(n.invalidateCache.bind(n))},o.prototype.select=function(e,t){var n=this,r=y.cacheTypes,o={},i=void 0,s=void 0,a=void 0,u=function(e,t){return e.resultData.notModified?(n.cachedSessionEntityRequested[s]=e.version,n.cache.get(s,t)):n.cache.put([{key:s+":v",value:e.version},{key:s,value:e.resultData}],t).then(function(){return n.cachedSessionEntityRequested[s]=e.version,e.resultData})};t=t||e.__mip_disablecache===!0;var l=t||e.ID||e.bypassCache?y.cacheTypes.None:n.domain.get(e.entity).cacheType;return e.method||(e.method="select"),l===r.None?i=n.query(e,!0).then(n.convertResponseDataToJsTypes.bind(n)).then(function(t){var n={};if(c.apply(n,t),t.__totalRecCount)n.total=t.__totalRecCount;else if(t.resultData&&t.resultData.data){var r=t.resultData.data.length;if(e.options){var o=e.options||{},i=o.start?o.start:0,s=o.limit||0;n.total=r<s?i+r:-1}else n.total=r}return n}):(s=n.cacheKeyCalculate(e.entity,e.fieldList),a=l===r.Session?y.SESSION:y.PERMANENT,i=n.cache.get(s+":v",a).then(function(t){var i=void 0;return!t||t&&l===r.Entity||t&&l===r.SessionEntity&&n.cachedSessionEntityRequested[s]!==t?(c.apply(o,e),delete o.whereList,delete o.orderList,delete o.options,o.version=t||"-1",i=n.query(o,!0).then(n.convertResponseDataToJsTypes.bind(n)).then(function(e){return u(e,a)})):i=n.cache.get(s,a),i}).then(function(t){return n.doFilterAndSort(t,e)})),i},o.selectResultToArrayOfObjects=p.selectResultToArrayOfObjects,o.prototype.runTrans=function(e){var t=this;return t.post("ubql",e).then(function(e){return e.data})};var k=["entity","attribute","ID","id","isDirty","forceMime","fileName","store","revision"];o.prototype.getDocument=function(e,t){var n=a.defaults({},t),r={url:"getDocument",method:n.bypassCache?"POST":"GET"};return t&&t.resultIsBinary&&(r.responseType="arraybuffer"),n.bypassCache?(r.data=a.clone(e),Object.keys(r.data).forEach(function(e){k.indexOf(e)===-1&&(delete r.data[e],c.logDebug('invalid parameter "'+e+'" passed to getDocument request'))})):r.params=e,this.xhr(r).then(function(e){return e.data})},o.prototype.hexa8=f.prototype.hexa8,o.prototype.crc32=f.prototype.crc32,o.prototype.logout=function(){var e=this;return e.isAuthorized()?e.post("logout",{}).then(function(){return new Promise(function(t){setTimeout(function(){e._pki&&e._pki.closePK(),t(!0)},20)})}):Promise.resolve(!0)},o.prototype.serverErrorCodes={1:"ubErrNotImplementedErrnum",2:"ubErrRollbackedErrnum",3:"ubErrNotExecutedErrnum",4:"ubErrInvaliddataforrunmethod",5:"ubErrInvaliddataforrunmethodlist",6:"ubErrNoMethodParameter",7:"ubErrMethodNotExist",8:"ubErrElsAccessDeny",9:"ubErrElsInvalidUserOrPwd",10:"ubErrElsNeedAuth",11:"ubErrNoEntityParameter",13:"ubErrNoSuchRecord",14:"ubErrInvalidDocpropFldContent",15:"ubErrEntityNotExist",16:"ubErrAttributeNotExist",17:"ubErrNotexistEntitymethod",18:"ubErrInvalidSetdocData",19:"ubErrSoftlockExist",20:"ubErrNoErrorDescription",21:"ubErrUnknownStore",22:"ubErrObjdatasrcempty",23:"ubErrObjattrexprbodyempty",24:"ubErrNecessaryfieldNotExist",25:"ubErrRecordmodified",26:"ubErrNotexistnecessparam",27:"ubErrNotexistfieldlist",28:"ubErrUpdaterecnotfound",29:"ubErrNecessaryparamnotexist",30:"ubErrInvalidstoredirs",31:"ubErrNofileinstore",32:"ubErrAppnotsupportconnection",33:"ubErrAppnotsupportstore",34:"ubErrDeleterecnotfound",35:"ubErrNotfoundlinkentity",36:"ubErrEntitynotcontainmixinaslink",37:"ubErrEssnotinherfromessaslink",38:"ubErrInstancedatanameisreadonly",39:"ubErrManyrecordsforsoftlock",40:"ubErrNotfoundidentfieldsl",41:"ubErrInvalidlocktypevalue",42:"ubErrLockedbyanotheruser",43:"ubErrInvalidwherelistinparams",44:"ubErrRecnotlocked",45:"ubErrManyrecordsforchecksign",46:"ubErrNotfoundparamnotrootlevel",47:"ubErrCantcreatedirlogmsg",48:"ubErrCantcreatedirclientmsg",49:"ubErrConnectionNotExist",50:"ubErrDirectUnityModification",51:"ubErrCantdelrecthisvalueusedinassocrec",52:"ubErrAssocattrnotfound",53:"ubErrAttrassociationtoentityisempty",54:"ubErrNotfoundconforentityinapp",55:"ubErrNewversionrecnotfound",56:"ubErrElsAccessDenyEntity",57:"ubErrAlsAccessDenyEntityattr",58:"ubErrDatastoreEmptyentity",67:"ubErrTheServerHasExceededMaximumNumberOfConnections",69:"ubErrFtsForAppDisabled",72:"ubErrElsPwdIsExpired",73:"ELS_USER_NOT_FOUND",74:"VALUE_MUST_ME_UNIQUE"},o.prototype.serverErrorByCode=function(e){return this.serverErrorCodes[e]},o.prototype.Repository=function(e){return new x(this,e)};var I=window&&window.localStorage;e.exports={UBConnection:o,connect:i}},function(e,t,n){"use strict";function r(e){var t,n=Object.create(r.prototype),s=!1;return t=new i("dstu"),n.nm=t,n.nm.callTimeOut=e&&e.waitTimeout||18e4,n.init=function(e){return s?Promise.resolve(n):t.connect().then(function(t){return t.invoke("init",e).then(function(){return s=!0,n})})},n.encryptToArray=function(e,n,r){return t.invoke("encrypt",{data:e,isBase64:n,compress:r||!1}).then(function(e){return o.base64toArrayBuffer(e)})},n.decryptArr=function(e,n,r){if(!e)throw Error("Do not call decryptArr method with empty value");return o.base64FromAny(e).then(function(e){return t.invoke("decrypt",{data:e,toBase64:n,isCompressed:r||!1})})},n.getEnvelopeWithKey=function(){return t.invoke("getEnvelopeWithKey")},n}var o=n(1),i=n(11);e.exports=r},function(e,t,n){"use strict";function r(e){var t,n=Object.create(r.prototype),s=!1;return t=new i("iit"),n.nm=t,n.nm.callTimeOut=e&&e.waitTimeout||18e4,n.init=function(){return s?Promise.resolve(n):t.connect().then(function(e){return e.invoke("init",null).then(function(){return s=!0,n})})},n.readPK=function(e){function t(t){var n,i=t.data,s=[];return _.forEach(i,function(t){n=e.get("downloads/cert/"+t,{responseType:"arraybuffer"}).then(function(e){return o.base64FromAny(e.data)}).then(function(e){return r.nm.invoke("AddCert",e)}),s.push(n)}),Promise.all(s)}var n,r=this;return n=r.nm.invoke("getPrivateKeyReaded").then(function(n){return!!n||r.nm.invoke("CheckSettings").then(function(n){return n?r.nm.invoke("readPK",[],3e5).then(function(n){switch(parseInt(n.result,10)){case 0:return n.result;case 12:throw new o.UBAbortError("readPKCanceled");case 51:return r.nm.invoke("loadCertDialog",[],3e5).then(function(){return e.get("downloads/cert/CertList.json")}).then(t).then(function(){return r.nm.invoke("readPK",[],3e5).then(function(e){if(51===parseInt(e.result,10))throw new o.UBError("invalidPrivateKeyCertificate",e.lastError);return e.result})});default:throw n.lastError?new o.UBError(n.lastError,n.result):Error(n.result)}}):Promise.reject({errMsg:"nm.CheckSettings() fail"})})}),n.then(function(){var e={};return r.nm.invoke("getOwnCert").then(function(t){if(e.ownIITCert=t,!e.ownIITCert||""===e.ownIITCert)throw Error("getOwnCertFail");return r.nm.invoke("getOwnCertEncrypt").then(function(t){return e.ownIITEncryptCert=t,r.nm.invoke("getOwnCertEncryptSignature").then(function(t){return e.ownIITEncryptSignature=t,e})})})},function(e){throw r.nm.invoke("closePK"),e})},n.setServerCertificate=function(e){return this.nm.invoke("setServerCert",e)},n.setRecipientCertificate=function(e){return this.nm.invoke("setServerCert",e)},n.decryptEnvelope=function(e,t){return this.nm.invoke("decryptEnvelope",{data:e,toBase64:t})},n.encryptEnvelope=function(e,t){return this.nm.invoke("encryptEnvelope",{data:e,isBase64:t})},n.closePK=function(){return this.nm.invoke("closePK")},n.signData=function(e,t){return this.nm.invoke("IITSignData",{data:e,isBase64:void 0===t||t})},n.verifySignature=function(e,t,n){return this.nm.invoke("IITVerifyData",{data:e,signature:t,isBase64:void 0===n||n})},n}var o=n(1),i=n(11);e.exports=r},function(e,t,n){"use strict";function r(e){function t(e){u&&(f=new WebSocket(h+"?SESSION_SIGNATURE="+e.signature(),"ubNotifier"),f.onopen=function(e){c("connected to",e.target.url,"protocol:",e.target.protocol),r.emit("connected",e.target.url,e.target.protocol)},f.onmessage=function(e){var t;c("Got a raw data",e.data);try{t=JSON.parse(e.data)}catch(t){console.error("ubNotifier: Invalid command from server:",e.data)}var n,o=t.command,i=t.params;switch(c("Got a command",o,"with params",i),o){case"accepted":for(p=!0;(n=d.shift())&&p;)r.sendCommand(n.command,n.params);d=[],r.emit("accepted",i.connectionID);break;case"error":c("Got an error from server",i),r.emit("error",i);break;default:c("Emit event ",o,"with params",i),r.emit(o,i)}},f.onclose=function(e){p=!1,c("Connection closed. Code:",e.code,"Reason:",e.reason),r.emit("disconnected",e.code,e.reason)})}function n(n,r,o){p=!1,e.supportedWSProtocols.indexOf(s)!==-1?t(r):console.warn("ubNotifier: protocol not supported")}var r=this,u=e.supportedWSProtocols.indexOf(s)!==-1;this.supported=u,i.call(this),o.assign(this,i.prototype);var c=function(){},l=!1;Object.defineProperty(r,"debugMode",{get:function(){return l},set:function(e){l!==e&&(l=e,c=l?console.debug.bind(console,"ubNotifier"):function(){})},enumerable:!0,configurable:!0});var h="ws"+e.serverUrl.slice(4)+"ws",f=null,p=!1,d=[];this.sendCommand=function(e,t){u&&(p?f.send(JSON.stringify({command:e,params:t})):(d.push({command:e,params:t}),d.length>a&&d.shift()))},e.on("authorized",n)}var o=n(2),i=n(5),s="ubNotifier",a=100;e.exports=r},function(e,t){"use strict";function n(e,t){var n=void 0;return n=i[e]?i[e]:i[e]=new Promise(function(n,r){var a=null,u=/\.css(?:\?|$)/.test(e);u?(a=document.createElement("link"),a.rel="stylesheet",a.async=!0):(a=document.createElement("script"),a.type="text/javascript",t&&(a.charset=t),a.async=!0),a.onerror=function(t){var n="Required "+(t.target.href||t.target.src)+" is not accessible";delete i[e],a.onerror=a.onload=a.onreadystatechange=null,r(Error(n))},a.onload=function(){a.onerror=a.onload=a.onreadystatechange=null,setTimeout(function(){var e=a;n(),e.parentNode&&!e.rel&&(e.parentNode.removeChild(a),a=null)},0)},s.appendChild(a),u?a.href=o(e):a.src=o(e)})}function r(e){var t=u.test(e)?u.exec(e)[1]:"_web";return a&&a[t]?"?ubver="+a[t]:""}function o(e){var t=r(e);return t?e+t:e}var i={},s=document.getElementsByTagName("head")[0],a=window.__ubVersion,u=RegExp("models/(.+?)/");e.exports={inject:n,addResourceVersion:o}}]);
//# sourceMappingURL=ub-core.min.js.map